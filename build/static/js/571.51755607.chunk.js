"use strict";(self.webpackChunkprotal_web=self.webpackChunkprotal_web||[]).push([[571],{62461:function(e,i,l){l.d(i,{Z:function(){return d}});var n=l(1413),t=l(14868),o=l(22293),s=[{value:"",label:"T\u1ea5t c\u1ea3"},{value:1,label:"K\xedch ho\u1ea1t"},{value:0,label:"B\u1ecb \u1ea9n"}],r=l(80184),d=function(e){var i=e.formik,l=e.setFieldValue,d=e.addOrEdit;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(t.Z,{fullWidth:!0,size:"small",disablePortal:!0,disableClearable:!0,id:"combo-box-demo",value:null===s||void 0===s?void 0:s.filter((function(e){var l;return e.value===(null===i||void 0===i||null===(l=i.values)||void 0===l?void 0:l.status)}))[0],options:d?s.filter((function(e){return""!==e.value})):s,renderInput:function(e){return(0,r.jsx)(o.Z,(0,n.Z)((0,n.Z)({},e),{},{label:"Tr\u1ea1ng th\xe1i"}))},onChange:function(e,i){return l("status",null===i||void 0===i?void 0:i.value)}})})}},58357:function(e,i,l){l.d(i,{Z:function(){return d}});var n=l(5289),t=l(65661),o=l(97123),s=l(36151),r=l(80184);function d(e){var i=e.name,l=e.open,d=e.handleClose;return(0,r.jsx)(n.Z,{open:l,onClose:function(){return d(!1)},keepMounted:!0,maxWidth:"xs","aria-labelledby":"item-delete-title","aria-describedby":"item-delete-description",children:l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.Z,{id:"item-delete-title",children:(0,r.jsxs)("p",{children:[i," - B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf4ng?"]})})," ",(0,r.jsxs)(o.Z,{sx:{mr:2},children:[(0,r.jsx)(s.Z,{size:"small",onClick:function(){return d(!1)},variant:"outlined",children:"H\u1ee7y"}),(0,r.jsx)(s.Z,{variant:"contained",onClick:function(){return d(!0)},autoFocus:!0,size:"small",children:"X\xf3a"})]})]})})}},36370:function(e,i,l){var n=l(1413),t=(l(72791),l(95193)),o=l(5289),s=l(64554),r=l(39157),d=l(20890),a=l(13400),u=l(13967),c=l(5130),v=l(80184);i.Z=function(e){var i=e.children,l=e.title,h=e.open,m=e.handleClose,x=e.styleDialog,f=e.styleBox,p=e.styleTitle,Z=e.styleChildBox,g=e.showButtonCloseDialog,b=(0,u.Z)(),j=(0,t.Z)(b.breakpoints.down("sm")),w=(0,t.Z)(b.breakpoints.down("lg"));return(0,v.jsx)(o.Z,{open:h,onClose:function(){return m()},keepMounted:!0,"aria-labelledby":"item-delete-title","aria-describedby":"item-delete-description",fullScreen:!0,sx:{"&>div:nth-of-type(3)":{"&>div":(0,n.Z)({m:0,borderRadius:j?"0px":"15px",width:j?"100%":"auto",height:j?"100vh":"auto",background:"#F9FAFB"},x)}},children:h&&(0,v.jsx)(s.Z,{children:(0,v.jsxs)(r.Z,{sx:(0,n.Z)({maxHeight:"90vh",minHeight:"450px",overflowY:"auto",p:"0px",position:"relative",width:j?"100%":w?"750px":"800px"},f),children:[(0,v.jsxs)(s.Z,{sx:(0,n.Z)({position:"sticky",top:0,borderBottom:"1px solid #BCC7D2",pb:1,width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#F9FAFB",zIndex:9999},p),children:[(0,v.jsx)(d.Z,{sx:{fontSize:"18px",fontWeight:600,"&:first-letter":{textTransform:"capitalize"}},children:l}),g&&(0,v.jsx)(a.Z,{onClick:function(){return m()},size:"small",children:(0,v.jsx)(c.Z,{fontSize:"small"})})]}),(0,v.jsx)(s.Z,{sx:(0,n.Z)({},Z),className:"box-popup",children:i})]})})})}},99198:function(e,i,l){var n=l(80184);i.Z=function(){return(0,n.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(214, 214, 214, 0.2)",zIndex:9999},children:(0,n.jsx)("div",{className:"lds-hourglass"})})}},79472:function(e,i,l){var n=l(13967),t=l(47524),o=l(80184);i.Z=function(){var e=(0,n.Z)();return(0,o.jsxs)("div",{className:"noData",children:[(0,o.jsx)(t.Z,{sx:{mr:1,color:e.palette.primary.dark}}),(0,o.jsx)("p",{style:{fontSize:"14px"},children:"Kh\xf4ng c\xf3 b\u1ea3n ghi n\xe0o \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb"})]})}},39987:function(e,i,l){var n=l(1413),t=(l(72791),l(9955)),o=l(66934),s=l(80184);i.Z=function(e){var i=e.status,l=e.id,r=e.handleStatus,d=(0,o.ZP)((function(e){return(0,s.jsx)(t.Z,(0,n.Z)({focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,onChange:function(e,i){return r(i?1:0,l)},defaultChecked:!!i},e))}))((function(e){var i=e.theme;return{width:40,height:20,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(20px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:"dark"===i.palette.mode?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:"light"===i.palette.mode?i.palette.grey[100]:i.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:"light"===i.palette.mode?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:16,height:16},"& .MuiSwitch-track":{borderRadius:13,backgroundColor:"light"===i.palette.mode?"#E9E9EA":"#39393D",opacity:1,transition:i.transitions.create(["background-color"],{duration:500})}}}));return(0,s.jsx)(d,{})}},15405:function(e,i,l){var n=l(1413),t=l(45987),o=l(72791),s=l(22293),r=l(47071),d=l(29388),a=l(80184),u=["name","required","label","formik","errors","size","maxLength","type","bgColor","handleChange","readOnly"];i.Z=function(e){var i,l,c,v=e.name,h=e.required,m=e.label,x=e.formik,f=e.errors,p=e.size,Z=e.maxLength,g=e.type,b=e.bgColor,j=e.handleChange,w=e.readOnly,y=(0,t.Z)(e,u),k=(0,o.useMemo)((function(){var e,i,l,t,o,u;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,(0,n.Z)((0,n.Z)({},y),{},{sx:{"& input":{background:b||"#fff"}},label:h?(0,a.jsxs)("span",{className:"input-label",children:["".concat(m),(0,a.jsx)("span",{children:" *"})]}):m,type:g||"text",fullWidth:!0,id:v,name:v,size:p||"small",value:null===x||void 0===x||null===(e=x.values)||void 0===e?void 0:e[v],onChange:function(e){Z&&e.target.value.length>Z&&(e.target.value=e.target.value.slice(0,Z)),null===x||void 0===x||x.setFieldTouched(v,!0),null===x||void 0===x||x.handleChange(e),j&&j(e.target.value)},error:(null===x||void 0===x||null===(i=x.touched)||void 0===i?void 0:i[v])&&Boolean(null===x||void 0===x||null===(l=x.errors)||void 0===l?void 0:l[v])||Boolean(null===f||void 0===f?void 0:f[v]),InputProps:{readOnly:w}})),((null===x||void 0===x||null===(t=x.touched)||void 0===t?void 0:t[v])&&(null===x||void 0===x||null===(o=x.errors)||void 0===o?void 0:o[v])||(null===f||void 0===f?void 0:f[v]))&&(0,a.jsxs)(r.Z,{error:!0,className:"error-custom",children:[(0,a.jsx)(d.Z,{fontSize:"small",sx:{mr:.5,width:"18px",height:"18px"}}),(null===x||void 0===x||null===(u=x.errors)||void 0===u?void 0:u[v])||(null===f||void 0===f?void 0:f[v])]})]})}),[null===x||void 0===x||null===(i=x.values)||void 0===i?void 0:i[v],null===x||void 0===x||null===(l=x.touched)||void 0===l?void 0:l[v],null===x||void 0===x||null===(c=x.errors)||void 0===c?void 0:c[v],null===f||void 0===f?void 0:f[v],h,m,g]);return(0,a.jsx)(a.Fragment,{children:k})}},64571:function(e,i,l){l.r(i),l.d(i,{default:function(){return me}});var n=l(1413),t=l(70885),o=l(72791),s=l(94667),r=l(93051),d=l(51179),a=l(32004),u=l(95193),c=l(73974),v=l(64554),h=l(20890),m=l(47924),x=l(61889),f=l(63466),p=l(13400),Z=l(36151),g=l(13967),b=l(55705),j=l(96051),w=l(53329),y=l(3746),k=l(20165),S=l(38926),C=l(15405),I=l(62461),z=/(^(([\w]*[\w.]{1,})+([a-zA-Z]|([0-9]+[a-zA-Z])|([a-zA-Z]+[0-9]{1,})))|(^[a-zA-Z]+[\w]{2,}))+@([\w-]+\.)+[\w-]{2,4}$/,V=/^(((\+|)84)|0)(3[2-9]|5[6|8|9]|7[0|6-9]|8[0-6|8|9]|9[0-4|6-9])[0-9]{7}$/,N=/^[a-zA-Z\u0110\xc0\xc1\u1ea2\u1ea0\xc3\u1ea6\u1ea4\u1ea8\u1eac\u1eaa\xc2\u1eae\u1eb0\u1eb6\u1eb4\u0102\u1eb2\xc8\xc9\u1eb8\u1eba\u1ebc\u1ec2\u1ebe\u1ec0\u1ec6\u1ec4\xca\u1eca\xcc\xcd\u0128\u1ec8\xd2\xd3\u1ece\u1ecc\xd5\xd4\u1ed0\u1ed2\u1ed4\u1ed8\u1ed6\u1edc\u1eda\u1ee0\u1ee2\u1ede\u01a0\xd9\xda\u1ee4\u1ee6\u0168\u1ee8\u1eea\u1eec\u1eee\u1ef0\u01af\xdd\u1ef2\u1ef6\u1ef8\u1ef4\u0111\xe0\xe1\u1ea3\u1ea1\xe3\u1ea7\u1ea5\u1ea9\u1ead\u1eab\xe2\u1eaf\u1eb1\u1eb7\u1eb5\u0103\u1eb3\xe8\xe9\u1eb9\u1ebb\u1ebd\u1ec3\u1ebf\u1ec1\u1ec7\u1ec5\xea\u1ecb\xec\xed\u0129\u1ec9\xf2\xf3\u1ecf\u1ecd\xf5\xf4\u1ed1\u1ed3\u1ed5\u1ed9\u1ed7\u1edd\u1edb\u1ee1\u1ee3\u1edf\u01a1\xf9\xfa\u1ee5\u1ee7\u0169\u1ee9\u1eeb\u1eed\u1eef\u1ef1\u01b0\xfd\u1ef3\u1ef7\u1ef9\u1ef5 ]+$/,F=/^[a-zA-Z0-9_-]+$/,E=/^[\w!@#$%^&*()-_+=,./?]*$/,O=l(14868),D=l(22293),G=l(47071),A=l(29388),P=l(80184),M=function(e){var i=e.formik,l=e.setFieldValue,s=e.addOrEdit,d=(0,r.I0)(),a=(0,o.useState)([]),u=(0,t.Z)(a,2),c=u[0],v=u[1];(0,o.useEffect)((function(){h()}),[]);var h=function(){d({type:"userGroup/fetchLazyLoading",payload:{filter:JSON.stringify({status:1}),range:JSON.stringify([0,20])},callback:function(e){var i=(null===e||void 0===e?void 0:e.results).list,l=null===i||void 0===i?void 0:i.map((function(e){return{value:e.id,label:e.name}}));v(l)}})};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(O.Z,{fullWidth:!0,size:"small",disablePortal:!0,id:"combo-box-demo",value:(null===c||void 0===c?void 0:c.length)>0?null===c||void 0===c?void 0:c.filter((function(e){var l;return e.value===(null===i||void 0===i||null===(l=i.values)||void 0===l?void 0:l.userGroupId)}))[0]:{value:"",label:""},options:c,disableClearable:s,renderInput:function(e){var l;return(0,P.jsx)(D.Z,(0,n.Z)((0,n.Z)({},e),{},{name:"userGroupId",label:s?(0,P.jsxs)("span",{className:"input-label",children:["Nh\xf3m t\xe0i kho\u1ea3n ",(0,P.jsx)("span",{children:" *"})]}):"Nh\xf3m t\xe0i kho\u1ea3n",error:i.touched.userGroupId&&Boolean(null===(l=i.errors)||void 0===l?void 0:l.userGroupId)}))},onChange:function(e,i){return l("userGroupId",null===i||void 0===i?void 0:i.value)}}),i.touched.userGroupId&&i.errors.userGroupId&&(0,P.jsxs)(G.Z,{error:!0,className:"error-custom",children:[(0,P.jsx)(A.Z,{fontSize:"small",sx:{mr:.5,width:"18px",height:"18px"}}),i.errors.userGroupId]})]})},q=l(99198),B=function(e){var i=e.visible,l=e.closeDrawer,s=e.dataEdit,d=e.getList,O=(0,r.I0)(),D=(0,g.Z)(),G=(0,u.Z)(D.breakpoints.down("md")),A=(0,o.useState)(!1),B=(0,t.Z)(A,2),L=B[0],T=B[1],_=(0,o.useState)({}),H=(0,t.Z)(_,2),J=H[0],W=H[1],R=(0,o.useState)(!1),X=(0,t.Z)(R,2),$=X[0],Y=X[1],U=(0,o.useState)(!1),K=(0,t.Z)(U,2),Q=K[0],ee=K[1],ie=function(e){e.preventDefault()},le=j.Ry().shape({fullName:j.Z_().trim().min(2,"Vui l\xf2ng nh\u1eadp t\u1ed1i thi\u1ec3u 2 k\xfd t\u1ef1").max(50,"Vui l\xf2ng nh\u1eadp t\u1ed1i \u0111a 50 k\xfd t\u1ef1").matches(N,"Vui l\xf2ng nh\u1eadp t\xean theo \u0111\u1ecbnh d\u1ea1ng [a-z]").required("Vui l\xf2ng nh\u1eadp h\u1ecd t\xean"),username:j.Z_().trim().max(50,"Vui l\xf2ng nh\u1eadp t\u1ed1i \u0111a 50 k\xfd t\u1ef1").matches(F,"Vui l\xf2ng nh\u1eadp t\xean theo \u0111\u1ecbnh d\u1ea1ng [a-z][0-9] v\xe0 -").required("Vui l\xf2ng nh\u1eadp t\xean t\xe0i kho\u1ea3n"),email:j.Z_().trim().max(50,"Vui l\xf2ng nh\u1eadp t\u1ed1i \u0111a 50 k\xfd t\u1ef1").matches(z,"Email is not valid").email("Vui l\xf2ng nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng email").required("Vui l\xf2ng nh\u1eadp email"),mobile:j.Z_().trim().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").max(12).matches(V,"Vui l\xf2ng nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),password:j.Z_().trim().matches(E,"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u t\u1ed1i thi\u1ec3u 6 k\xfd t\u1ef1 v\xe0 kh\xf4ng ch\u1ee9a k\xfd t\u1ef1 \u0111\u1eb7c bi\u1ec7t").min(6,"Vui l\xf2ng nh\u1eadp t\u1ed1i thi\u1ec3u 6 k\xfd t\u1ef1").max(20,"Vui l\xf2ng nh\u1eadp t\u1ed1i \u0111a 20 k\xfd t\u1ef1").required("Password is required"),password_confirmation:j.Z_().trim().oneOf([j.iH("password"),null],"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u ch\u01b0a ch\xednh x\xe1c").required("Vui l\xf2ng nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u"),userGroupId:j.Z_().required("Vui l\xf2ng ch\u1ecdn nh\xf3m t\xe0i kho\u1ea3n")}),ne=(0,b.TA)({enableReinitialize:!0,initialValues:{username:(null===s||void 0===s?void 0:s.username)||"",password:null!==s&&void 0!==s&&s.id?"password":"",password_confirmation:null!==s&&void 0!==s&&s.id?"password":"",fullName:(null===s||void 0===s?void 0:s.fullName)||"",email:(null===s||void 0===s?void 0:s.email)||"",mobile:(null===s||void 0===s?void 0:s.mobile)||"",userGroupId:(null===s||void 0===s?void 0:s.userGroupId)||"",status:0===(null===s||void 0===s?void 0:s.status)?0:1},validationSchema:le,onSubmit:function(e){te(e)}}),te=function(e){var i,l,t;T(!0);var o=(0,n.Z)((0,n.Z)({},e),{},{fullName:null===e||void 0===e||null===(i=e.fullName)||void 0===i?void 0:i.trim(),username:null===e||void 0===e||null===(l=e.username)||void 0===l?void 0:l.trim(),usernameOld:null===s||void 0===s||null===(t=s.username)||void 0===t?void 0:t.trim()});null!==s&&void 0!==s&&s.id?O({type:"user/update",payload:{id:null===s||void 0===s?void 0:s.id,params:(0,n.Z)({},o)},callback:function(e){null!==e&&void 0!==e&&e.success?((0,a.Z)("success",null===e||void 0===e?void 0:e.message),d(),oe()):(W(e.error),(0,a.Z)("error",e.message)),T(!1)}}):O({type:"user/add",payload:o,callback:function(e){T(!1),null!==e&&void 0!==e&&e.success?((0,a.Z)("success",null===e||void 0===e?void 0:e.message),d(),oe()):(W(e.error),(0,a.Z)("error",e.message))}})},oe=function(){l(),W({}),ne.resetForm(),ne.setTouched({},!1)};return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(c.ZP,{anchor:"right",open:i,onClose:oe,children:[(0,P.jsxs)(v.Z,{sx:{width:G?"100%":"400px",p:2},children:[(0,P.jsxs)(h.Z,{variant:"h4",sx:{mb:3},children:[null!==s&&void 0!==s&&s.id?"C\u1eadp nh\u1eadt th\xf4ng tin ".concat(null===s||void 0===s?void 0:s.username):"Th\xeam m\u1edbi nh\xf3m t\xe0i kho\u1ea3n",(0,P.jsx)(m.Z,{sx:{mt:1}})]}),(0,P.jsxs)("form",{onSubmit:ne.handleSubmit,children:[(0,P.jsxs)(x.ZP,{container:!0,spacing:3,children:[(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(C.Z,{name:"username",formik:ne,label:"T\xe0i kho\u1ea3n",errors:J,required:!0})}),!s.id&&(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(C.Z,{errors:J,name:"password",type:$?"text":"password",formik:ne,label:"M\u1eadt kh\u1ea9u",required:!0,InputProps:{endAdornment:(0,P.jsx)(f.Z,{position:"end",children:(0,P.jsx)(p.Z,{"aria-label":"toggle password visibility",onClick:function(){Y(!$)},onMouseDown:ie,edge:"end",children:$?(0,P.jsx)(y.Z,{}):(0,P.jsx)(k.Z,{})})})}})}),!s.id&&(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(C.Z,{name:"password_confirmation",formik:ne,type:Q?"text":"password",label:"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u",errors:J,required:!0,InputProps:{endAdornment:(0,P.jsx)(f.Z,{position:"end",children:(0,P.jsx)(p.Z,{"aria-label":"toggle password visibility",onClick:function(){ee(!Q)},onMouseDown:ie,edge:"end",children:Q?(0,P.jsx)(y.Z,{}):(0,P.jsx)(k.Z,{})})})}})}),(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(C.Z,{name:"fullName",formik:ne,label:"H\u1ecd t\xean",errors:J,required:!0})}),(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(C.Z,{name:"email",formik:ne,label:"Email",errors:J,required:!0})}),(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(C.Z,{name:"mobile",formik:ne,label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",errors:J,required:!0})}),(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(M,{formik:ne,setFieldValue:ne.setFieldValue,addOrEdit:!0})}),(0,P.jsx)(x.ZP,{item:!0,xs:12,children:(0,P.jsx)(I.Z,{addOrEdit:!0,formik:ne,setFieldValue:ne.setFieldValue})})]}),(0,P.jsxs)(x.ZP,{item:!0,xs:12,sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:[" ",(0,P.jsx)(Z.Z,{onClick:function(){return oe()},size:"small",variant:"outlined",sx:{mr:"10px"},type:"submit",endIcon:(0,P.jsx)(S.Z,{}),children:"H\u1ee7y"}),(0,P.jsx)(Z.Z,{size:"small",variant:"contained",type:"submit",endIcon:(0,P.jsx)(w.Z,{}),children:"L\u01b0u l\u1ea1i"})]})]})]}),L&&(0,P.jsx)(q.Z,{})]})})},L=l(5403),T=l(42419),_=Number("20"),H=function(e){var i,l,n,t=e.setDataEdit,o=e.setVisibleDrawer,s=e.setLoading,u=(0,r.I0)(),c=(0,r.v9)(d.EA),v=(0,b.TA)({enableReinitialize:!0,initialValues:{email:(null===c||void 0===c||null===(i=c.filter)||void 0===i?void 0:i.email)||"",userGroupId:(null===c||void 0===c||null===(l=c.filter)||void 0===l?void 0:l.userGroupId)||"",status:(null===c||void 0===c||null===(n=c.filter)||void 0===n?void 0:n.status)||""},onSubmit:function(e){h(e)}}),h=function(e){var i,l;s(!0);var n={email:null===e||void 0===e||null===(i=e.email)||void 0===i?void 0:i.trim(),userGroupId:null===e||void 0===e?void 0:e.userGroupId,status:null===e||void 0===e?void 0:e.status};null!==e&&void 0!==e&&null!==(l=e.email)&&void 0!==l&&l.trim()||delete n.email,null!==e&&void 0!==e&&e.userGroupId||delete n.userGroupId,null!==e&&void 0!==e&&e.status||delete n.status;var t={filter:JSON.stringify(n),range:JSON.stringify([0,_]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,username,fullName,email,mobile,status,createdAt,userGroupId"};u((0,d.hX)(e)),u({type:"user/fetch",payload:t,callback:function(e){s(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,a.Z)("error",null===e||void 0===e?void 0:e.message)}})};return(0,P.jsx)("form",{onSubmit:v.handleSubmit,children:(0,P.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,P.jsx)(x.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,P.jsx)(C.Z,{name:"email",formik:v,label:"Email"})}),(0,P.jsx)(x.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,P.jsx)(M,{formik:v,setFieldValue:v.setFieldValue,addOrEdit:!1})}),(0,P.jsx)(x.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,P.jsx)(I.Z,{addOrEdit:!1,formik:v,setFieldValue:v.setFieldValue})}),(0,P.jsxs)(x.ZP,{item:!0,xs:12,md:6,lg:3,sx:{display:"flex",justifyContent:"flex-end"},children:[(0,P.jsx)(Z.Z,{variant:"contained",endIcon:(0,P.jsx)(L.Z,{}),type:"submit",children:"T\xecm ki\u1ebfm"}),(0,P.jsx)(Z.Z,{variant:"outlined",color:"success",endIcon:(0,P.jsx)(T.Z,{}),sx:{ml:2},onClick:function(){t({}),o(!0)},children:"Th\xeam m\u1edbi"})]})]})})},J=l(35855),W=l(53994),R=l(39281),X=l(79836),$=l(56890),Y=l(53382),U=l(57246),K=l(72426),Q=l.n(K),ee=l(41286),ie=l(27247),le=l(39987),ne=l(79472),te=l(58357),oe=l(20068),se=l(59434),re=l(5130),de=l(36370),ae=function(e){var i,l=e.formik,s=e.setFieldValue,d=e.addOrEdit,a=e.readOnly,u=e.handleChange,c=(0,r.I0)(),v=(0,o.useState)([]),h=(0,t.Z)(v,2),m=h[0],x=h[1],f=(0,o.useState)([]),p=(0,t.Z)(f,2),Z=p[0],g=p[1];(0,o.useEffect)((function(){b()}),[]),(0,o.useEffect)((function(){var e,i,n=null===l||void 0===l||null===(e=l.values)||void 0===e||null===(i=e.websites)||void 0===i?void 0:i.map((function(e){return"delete"!==(null===e||void 0===e?void 0:e.flag)?null===e||void 0===e?void 0:e.value:-1}));x(null===Z||void 0===Z?void 0:Z.filter((function(e){return!(null!==n&&void 0!==n&&n.includes(null===e||void 0===e?void 0:e.value))})))}),[null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.websites]);var b=function(){c({type:"website/fetchLazyLoading",payload:{filter:JSON.stringify({status:1}),range:JSON.stringify([0,50])},callback:function(e){var i=(null===e||void 0===e?void 0:e.results).list,l=null===i||void 0===i?void 0:i.map((function(e){return{value:e.id,label:e.name}}));x(l),g(l)}})};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(O.Z,{fullWidth:!0,size:"small",disablePortal:!0,id:"combo-box-demo",multiple:!0,value:[],readOnly:a,options:m,disableClearable:d,renderInput:function(e){var i;return(0,P.jsx)(D.Z,(0,n.Z)((0,n.Z)({},e),{},{name:"websites",label:d?(0,P.jsxs)("span",{className:"input-label",children:["Vui l\xf2ng ch\u1ecdn website ",(0,P.jsx)("span",{children:" *"})]}):"Vui l\xf2ng ch\u1ecdn website",error:l.touched.websites&&Boolean(null===(i=l.errors)||void 0===i?void 0:i.websites)}))},onChange:function(e,i){var t,o,r,d,a,c=null===i||void 0===i?void 0:i[0],v=null===l||void 0===l||null===(t=l.values)||void 0===t||null===(o=t.websites)||void 0===o?void 0:o.find((function(e){return(null===e||void 0===e?void 0:e.value)===(null===c||void 0===c?void 0:c.value)}));(console.log("websiteDeleted",v),v)?s("websites",null===l||void 0===l||null===(r=l.values)||void 0===r||null===(d=r.websites)||void 0===d?void 0:d.map((function(e){return(null===e||void 0===e?void 0:e.value)===(null===c||void 0===c?void 0:c.value)?(0,n.Z)((0,n.Z)({},e),{},{flag:null===e||void 0===e?void 0:e.oldFlag}):e}))):s("websites",[(0,n.Z)((0,n.Z)({},c),{},{flag:"add",oldFlag:"add"})].concat(null===l||void 0===l||null===(a=l.values)||void 0===a?void 0:a.websites));u&&u()}}),l.touched.websites&&l.errors.websites&&(0,P.jsxs)(G.Z,{error:!0,className:"error-custom",children:[(0,P.jsx)(A.Z,{fontSize:"small",sx:{mr:.5,width:"18px",height:"18px"}}),l.errors.websites]})]})},ue=function(e){var i,l,s,r,d=e.open,c=e.id,m=e.handleClose,x=(0,se.I0)(),f=(0,g.Z)(),j=(0,u.Z)(f.breakpoints.down("md")),y=(0,o.useState)(!1),k=(0,t.Z)(y,2),C=k[0],I=k[1],z=(0,o.useState)([]),V=(0,t.Z)(z,2),N=V[0],F=V[1];(0,o.useEffect)((function(){d&&E()}),[d]);var E=function(){I(!0),x({type:"websiteUser/fetch",payload:{id:c},callback:function(e){if(I(!1),null!==e&&void 0!==e&&e.success){var i,l,n=e.results.list,t=null===n||void 0===n||null===(i=n[0])||void 0===i||null===(l=i.websites)||void 0===l?void 0:l.map((function(e){return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name,flag:"update",oldFlag:"update"}}));F(t)}else(0,a.Z)("error",null===e||void 0===e?void 0:e.message)}})},O=(0,b.TA)({enableReinitialize:!0,initialValues:{websites:N||[]},onSubmit:function(e){D(e)}}),D=function(e){I(!0),x({type:"websiteUser/update",payload:{id:c,params:{websites:null===e||void 0===e?void 0:e.websites}},callback:function(e){I(!1),null!==e&&void 0!==e&&e.success?((0,a.Z)("success",null===e||void 0===e?void 0:e.message),G()):(0,a.Z)("error",null===e||void 0===e?void 0:e.message)}})};console.log("websites",null===O||void 0===O||null===(i=O.values)||void 0===i?void 0:i.websites);var G=function(){m(),F([]),O.resetForm(),O.setTouched({},!1)};return(0,P.jsx)(de.Z,{open:d,title:"C\u1ea5p quy\u1ec1n",handleClose:function(){G()},styleBox:{minWidth:j?"100%":"500px",maxWidth:"500px",minHeight:"350px"},styleChildBox:{p:"20px 30px 20px"},styleTitle:{p:"10px 30px"},showButtonCloseDialog:!0,children:(0,P.jsxs)(v.Z,{children:[(0,P.jsx)(ae,{formik:O,setFieldValue:O.setFieldValue,addOrEdit:!1}),(0,P.jsx)(h.Z,{variant:"h4",sx:{mt:1,fontWeight:500},children:"Danh s\xe1ch website t\xe0i kho\u1ea3n \u0111\u01b0\u1ee3c truy c\u1eadp:"}),(0,P.jsxs)("form",{onSubmit:O.handleSubmit,style:{position:"relative"},children:[(0,P.jsx)(v.Z,{sx:{minHeight:"150px"},children:null===O||void 0===O||null===(l=O.values)||void 0===l||null===(s=l.websites)||void 0===s||null===(r=s.filter((function(e){return"delete"!==(null===e||void 0===e?void 0:e.flag)})))||void 0===r?void 0:r.map((function(e){return(0,P.jsxs)(h.Z,{variant:"h5",sx:{mt:.5,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[null===e||void 0===e?void 0:e.label,(0,P.jsx)(oe.Z,{placement:"left",title:"X\xf3a",children:(0,P.jsx)(p.Z,{onClick:function(){var i,l,t,o;"add"===(null===e||void 0===e?void 0:e.flag)?O.setFieldValue("websites",null===O||void 0===O||null===(i=O.values)||void 0===i||null===(l=i.websites)||void 0===l?void 0:l.filter((function(i){return(null===i||void 0===i?void 0:i.value)!==(null===e||void 0===e?void 0:e.value)}))):O.setFieldValue("websites",null===O||void 0===O||null===(t=O.values)||void 0===t||null===(o=t.websites)||void 0===o?void 0:o.map((function(i){return(null===i||void 0===i?void 0:i.value)===(null===e||void 0===e?void 0:e.value)?(0,n.Z)((0,n.Z)({},i),{},{flag:"delete"}):i})))},children:(0,P.jsx)(re.Z,{color:"error",sx:{cursor:"pointer"}})})})]},null===e||void 0===e?void 0:e.value)}))}),(0,P.jsxs)(v.Z,{sx:{mt:3,display:"flex",justifyContent:"center"},children:[(0,P.jsx)(Z.Z,{onClick:function(){return G()},size:"small",variant:"outlined",sx:{mr:"10px"},endIcon:(0,P.jsx)(S.Z,{}),children:"H\u1ee7y"}),(0,P.jsx)(Z.Z,{size:"small",variant:"contained",type:"submit",endIcon:(0,P.jsx)(w.Z,{}),children:"L\u01b0u l\u1ea1i"})]}),C&&(0,P.jsx)(q.Z,{})]})]})})},ce=Number("20"),ve=function(e){var i=e.dataEdit,l=e.setDataEdit,s=e.setVisibleDrawer,c=e.loading,m=e.setLoading,x=e.getList,f=(0,r.I0)(),p=(0,g.Z)(),b=(0,u.Z)(p.breakpoints.down("md")),j=(0,r.v9)(d.EA),w=j.data.list,y=j.data.pagination,k=(0,o.useState)(!1),S=(0,t.Z)(k,2),C=S[0],I=S[1],z=(0,o.useState)(!1),V=(0,t.Z)(z,2),N=V[0],F=V[1],E=(0,o.useState)(0),O=(0,t.Z)(E,2),D=O[0],G=O[1],A=function(e,i){f({type:"user/updateStatus",payload:{id:i,params:{status:e}},callback:function(e){!0===(null===e||void 0===e?void 0:e.success)?(0,a.Z)("success",null===e||void 0===e?void 0:e.message):(0,a.Z)("error",null===e||void 0===e?void 0:e.message)}})},M=function(e){return(0,P.jsx)(le.Z,{status:null===e||void 0===e?void 0:e.status,id:null===e||void 0===e?void 0:e.id,handleStatus:A})},B=function(e){return(0,P.jsxs)(P.Fragment,{children:[1!==(null===e||void 0===e?void 0:e.userGroupId)&&(0,P.jsx)(Z.Z,{size:"small",variant:"outlined",color:"success",endIcon:(0,P.jsx)(ee.Z,{}),onClick:function(){G((null===e||void 0===e?void 0:e.id)||0),F(!0)},children:"C\u1ea5p quy\u1ec1n"}),(0,P.jsx)(Z.Z,{size:"small",variant:"outlined",sx:{ml:1},endIcon:(0,P.jsx)(ee.Z,{}),onClick:function(){l(e),s(!0)},children:"S\u1eeda"}),(0,P.jsx)(Z.Z,{size:"small",variant:"outlined",color:"error",sx:{ml:1},endIcon:(0,P.jsx)(ie.Z,{}),onClick:function(){I(!0),l(e)},children:"X\xf3a"})]})};return(0,P.jsxs)(v.Z,{sx:{position:"relative",pb:2},children:[(0,P.jsxs)(R.Z,{sx:{overflow:"auto"},children:[(0,P.jsxs)(X.Z,{children:[(0,P.jsx)($.Z,{children:function(){var e={whiteSpace:"nowrap",fontWeight:"bold"};return(0,P.jsxs)(J.Z,{children:[(0,P.jsx)(W.Z,{sx:(0,n.Z)((0,n.Z)({},e),{},{width:"5%"}),align:"center",children:"#"}),(0,P.jsx)(W.Z,{sx:e,children:"H\u1ecd t\xean"}),(0,P.jsx)(W.Z,{sx:e,children:"Username"}),(0,P.jsx)(W.Z,{sx:e,children:"Email"}),(0,P.jsx)(W.Z,{sx:e,children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,P.jsx)(W.Z,{sx:e,children:"Nh\xf3m t\xe0i kho\u1ea3n"}),(0,P.jsx)(W.Z,{sx:e,children:"Ng\xe0y t\u1ea1o"}),(0,P.jsx)(W.Z,{sx:e,children:"Tr\u1ea1ng th\xe1i"}),(0,P.jsx)(W.Z,{align:"right",sx:e,children:"H\xe0nh \u0111\u1ed9ng"})]})}()}),(0,P.jsx)(Y.Z,{children:null===w||void 0===w?void 0:w.map((function(e,i){return function(e,i){var l;return(0,P.jsxs)(J.Z,{hover:!0,children:[(0,P.jsx)(W.Z,{sx:{width:"5%"},align:"center",children:(0,P.jsx)(h.Z,{variant:"body2",children:i+ce*((null===y||void 0===y?void 0:y.current)-1)+1})}),(0,P.jsx)(W.Z,{sx:{width:"20%",overflow:"hidden",maxWidth:300},component:"th",scope:"row",children:e.fullName}),(0,P.jsx)(W.Z,{children:null===e||void 0===e?void 0:e.username}),(0,P.jsx)(W.Z,{children:null===e||void 0===e?void 0:e.email}),(0,P.jsx)(W.Z,{children:null===e||void 0===e?void 0:e.mobile}),(0,P.jsx)(W.Z,{children:null===e||void 0===e||null===(l=e.userGroup)||void 0===l?void 0:l.name}),(0,P.jsx)(W.Z,{children:Q()(null===e||void 0===e?void 0:e.createdAt).format("DD/MM/YYYY HH:mm")}),(0,P.jsx)(W.Z,{children:M(e)}),(0,P.jsx)(W.Z,{align:"right",children:B(e)})]},e.id)}(e,i)}))})]}),(null===w||void 0===w?void 0:w.length)>0&&(0,P.jsx)(U.Z,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},size:b?"small":"medium",count:Math.floor((null===y||void 0===y?void 0:y.total)/(null===y||void 0===y?void 0:y.pageSize))+1,page:null===y||void 0===y?void 0:y.current,color:"primary",shape:"rounded",onChange:function(e,i){var l,n;m(!0);var t=j.filter,o={email:null===t||void 0===t||null===(l=t.email)||void 0===l?void 0:l.trim(),userGroupId:null===t||void 0===t?void 0:t.userGroupId,status:null===t||void 0===t?void 0:t.status};null!==t&&void 0!==t&&null!==(n=t.email)&&void 0!==n&&n.trim()||delete o.email,null!==t&&void 0!==t&&t.userGroupId||delete o.userGroupId,""===(null===t||void 0===t?void 0:t.status)&&delete o.status;var s={filter:JSON.stringify(o),range:JSON.stringify([i*y.pageSize-y.pageSize,i*y.pageSize]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,username,fullName,email,mobile,status,createdAt,userGroupId"};f({type:"user/fetch",payload:s,callback:function(e){m(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,a.Z)("error",null===e||void 0===e?void 0:e.message)}})}})]}),0===(null===w||void 0===w?void 0:w.length)&&(0,P.jsx)(ne.Z,{}),c&&(0,P.jsx)(q.Z,{}),C&&(0,P.jsx)(te.Z,{name:null===i||void 0===i?void 0:i.fullName,open:C,handleClose:function(e){I(!1),e&&f({type:"user/delete",payload:{id:null===i||void 0===i?void 0:i.id},callback:function(e){!0===(null===e||void 0===e?void 0:e.success)?((0,a.Z)("success",null===e||void 0===e?void 0:e.message),x()):!1===(null===e||void 0===e?void 0:e.success)&&(0,a.Z)("error",null===e||void 0===e?void 0:e.message)}})}}),(0,P.jsx)(ue,{open:N,handleClose:function(){F(!1)},id:D})]})},he=Number("20"),me=function(){var e=(0,r.I0)(),i=(0,r.v9)(d.EA),l=(0,o.useState)(!1),u=(0,t.Z)(l,2),c=u[0],v=u[1],h=(0,o.useState)(!1),m=(0,t.Z)(h,2),x=m[0],f=m[1],p=(0,o.useState)({id:0,username:"",password:"",fullName:"",email:"",mobile:0,status:0,createdAt:""}),Z=(0,t.Z)(p,2),g=Z[0],b=Z[1];(0,o.useEffect)((function(){j()}),[]);var j=function(){v(!0);var l=i.query,t=i.filter,o={filter:JSON.stringify({}),range:JSON.stringify([0,he]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,username,fullName,email,mobile,status,createdAt,userGroupId"};"{}"!==(null===l||void 0===l?void 0:l.filter)&&(o=(0,n.Z)((0,n.Z)({},o),{},{filter:null===l||void 0===l?void 0:l.filter})),"{}"!==(null===l||void 0===l?void 0:l.range)&&(o=(0,n.Z)((0,n.Z)({},o),{},{range:null===l||void 0===l?void 0:l.range})),"{}"!==(null===l||void 0===l?void 0:l.sort)&&(o=(0,n.Z)((0,n.Z)({},o),{},{sort:null===l||void 0===l?void 0:l.sort})),e((0,d.hX)(t)),e({type:"user/fetch",payload:o,callback:function(e){v(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,a.Z)("error",null===e||void 0===e?void 0:e.message)}})};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(s.Z,{title:(0,P.jsx)(H,{setDataEdit:b,setVisibleDrawer:f,setLoading:v}),content:!1,children:(0,P.jsx)(ve,{getList:j,dataEdit:g,setDataEdit:b,setVisibleDrawer:f,loading:c,setLoading:v})}),(0,P.jsx)(B,{visible:x,closeDrawer:function(){return f(!1)},dataEdit:g,getList:j})]})}}}]);
//# sourceMappingURL=571.51755607.chunk.js.map