"use strict";(self.webpackChunkprotal_web=self.webpackChunkprotal_web||[]).push([[454],{50065:function(e,i,l){l.r(i),l.d(i,{default:function(){return $}});var t=l(1413),n=l(70885),d=l(72791),s=l(94667),o=l(93051),a=l(68931),r=l(32004),u=l(13967),c=l(95193),v=l(61889),m=l(64554),x=l(36151),g=l(96051),h=l(55705),Z=l(53329),f=l(38926),j=l(36370),p=l(62461),b=l(15405),y=l(99198),I=l(20958),w=l(45912),S=l(12069),k=l(68418),V=l(77630),C=l(20782),N=l(80184),F=function(e){var i,l,s,a=e.open,F=e.dataEdit,E=e.handleClose,O=e.getList,P=(0,o.I0)(),D=(0,u.Z)(),T=(0,c.Z)(D.breakpoints.down("lg")),z=(0,d.useState)({}),A=(0,n.Z)(z,2),L=A[0],_=A[1],J=(0,d.useState)(!1),q=(0,n.Z)(J,2),Y=q[0],H=q[1],W=(0,d.useState)({}),B=(0,n.Z)(W,2),M=B[0],R=B[1];(0,d.useEffect)((function(){a&&(null!==F&&void 0!==F&&F.id?(H(!0),P({type:"article/getOne",payload:{id:null===F||void 0===F?void 0:F.id},callback:function(e){if(H(!1),!0===(null===e||void 0===e?void 0:e.success)){var i=e.results.list;_(i)}else!1===(null===e||void 0===e?void 0:e.success)&&(0,r.Z)("error",null===e||void 0===e?void 0:e.message)}})):_({}))}),[a]);var X=g.Ry().shape({title:g.Z_().trim().max(254).required("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 tin t\u1ee9c"),url:g.Z_().trim().max(254).required("Vui l\xf2ng nh\u1eadp url"),description:g.Z_().trim().max(1e3),author:g.Z_().trim().max(254),source:g.Z_().trim().max(254),label:g.Z_().trim().max(254),websiteId:g.Z_().required("Vui l\xf2ng ch\u1ecdn website"),categoryId:g.Z_().required("Vui l\xf2ng ch\u1ecdn chuy\xean m\u1ee5c")}),Q=(0,h.TA)({enableReinitialize:!0,initialValues:{title:(null===L||void 0===L?void 0:L.title)||"",description:(null===L||void 0===L?void 0:L.description)||"",content:(null===L||void 0===L?void 0:L.content)||"",url:(null===L||void 0===L?void 0:L.url)||"",author:(null===L||void 0===L?void 0:L.author)||"",source:(null===L||void 0===L?void 0:L.source)||"",label:(null===L||void 0===L?void 0:L.label)||"",images:(null===L||void 0===L?void 0:L.images)||"",websiteId:(null===L||void 0===L?void 0:L.websiteId)||"",categoryId:(null===L||void 0===L?void 0:L.categoryId)||"",categoryName:(null===L||void 0===L||null===(i=L.category)||void 0===i?void 0:i.text)||"",status:0===(null===L||void 0===L?void 0:L.status)?0:1},validationSchema:X,onSubmit:function(e){G(e)}}),G=function(e){var i,l;H(!0);var n=(0,t.Z)((0,t.Z)({},e),{},{title:null===e||void 0===e||null===(i=e.title)||void 0===i?void 0:i.trim(),titleOld:null===L||void 0===L||null===(l=L.title)||void 0===l?void 0:l.trim()});null!==L&&void 0!==L&&L.id?P({type:"article/update",payload:{id:null===L||void 0===L?void 0:L.id,params:n},callback:function(e){null!==e&&void 0!==e&&e.success?((0,r.Z)("success",null===e||void 0===e?void 0:e.message),O(),K()):(R(e.error),(0,r.Z)("error",e.message)),H(!1)}}):P({type:"article/add",payload:n,callback:function(e){H(!1),null!==e&&void 0!==e&&e.success?((0,r.Z)("success",null===e||void 0===e?void 0:e.message),O(),K()):(R(e.error),(0,r.Z)("error",e.message))}})},K=function(){E(),Q.resetForm(),Q.setTouched({},!1),R({})},U=[{value:0,label:"Th\xf4ng tin c\u01a1 b\u1ea3n",tab:(0,N.jsxs)(v.ZP,{container:!0,spacing:3,children:[(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:8,children:(0,N.jsx)(b.Z,{name:"title",formik:Q,errors:M,required:!0,label:"T\xean tin t\u1ee9c",handleChange:function(e){!function(e){var i,l,t=(0,k.CQ)(e),n=null===t||void 0===t||null===(i=t.split(" "))||void 0===i||null===(l=i.join("-"))||void 0===l?void 0:l.toLowerCase();Q.setFieldValue("url",n)}(e)}})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(b.Z,{name:"url",formik:Q,errors:M,required:!0,label:"\u0110\u01b0\u1eddng d\u1eabn"})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(b.Z,{name:"author",formik:Q,errors:M,label:"T\xe1c gi\u1ea3"})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(b.Z,{name:"source",formik:Q,errors:M,label:"Ngu\xf4n"})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(b.Z,{name:"label",formik:Q,errors:M,label:"Nh\xe3n"})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(I.Z,{formik:Q,setFieldValue:Q.setFieldValue,addOrEdit:!0,handleChange:function(){Q.setFieldValue("categoryId",""),Q.setFieldValue("categoryName","")}})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(w.Z,{formik:Q,setFieldValue:Q.setFieldValue,addOrEdit:!0,websiteId:null===Q||void 0===Q||null===(l=Q.values)||void 0===l?void 0:l.websiteId})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(p.Z,{addOrEdit:!1,formik:Q,setFieldValue:Q.setFieldValue})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:8,children:(0,N.jsx)(b.Z,{name:"description",formik:Q,errors:M,label:"N\u1ed9i dung ng\u1eafn",multiline:!0,rows:6})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,N.jsx)(C.Z,{image:Q.values.images,setFieldValue:Q.setFieldValue,field:"images",multiple:!0})})]})},{value:1,label:"N\u1ed9i dung",tab:(0,N.jsx)(S.Z,{handleChange:function(e){null===Q||void 0===Q||Q.setFieldValue("content",e)},data:null===Q||void 0===Q||null===(s=Q.values)||void 0===s?void 0:s.content})}];return(0,N.jsx)(j.Z,{open:a,title:null!==L&&void 0!==L&&L.id?"C\u1eadp nh\u1eadt th\xf4ng tin ".concat(null===L||void 0===L?void 0:L.title):"Th\xeam m\u1edbi tin t\u1ee9c",handleClose:function(){K()},styleBox:{minWidth:T?"100%":"1300px",minHeight:"700px"},styleChildBox:{p:"0px 30px 20px"},styleTitle:{p:"10px 30px"},showButtonCloseDialog:!0,children:(0,N.jsxs)(m.Z,{children:[(0,N.jsxs)("form",{onSubmit:Q.handleSubmit,children:[(0,N.jsx)(V.Z,{tabWrapper:U}),(0,N.jsxs)(m.Z,{sx:{mt:3,mb:T?15:0,display:"flex",justifyContent:"center"},children:[(0,N.jsx)(x.Z,{onClick:function(){return K()},size:"small",variant:"outlined",sx:{mr:"10px"},endIcon:(0,N.jsx)(f.Z,{}),children:"H\u1ee7y"}),(0,N.jsx)(x.Z,{size:"small",variant:"contained",type:"submit",endIcon:(0,N.jsx)(Z.Z,{}),children:"L\u01b0u l\u1ea1i"})]})]}),Y&&(0,N.jsx)(y.Z,{})]})})},E=l(5403),O=l(42419),P=Number("20"),D=function(e){var i,l,t,n,d,s,u=e.setDataEdit,c=e.setVisibleDrawer,m=e.setLoading,g=(0,o.I0)(),Z=(0,o.v9)(a.Y2),f=(0,h.TA)({enableReinitialize:!0,initialValues:{title:(null===Z||void 0===Z||null===(i=Z.filter)||void 0===i?void 0:i.title)||"",websiteId:(null===Z||void 0===Z||null===(l=Z.filter)||void 0===l?void 0:l.websiteId)||"",categoryId:(null===Z||void 0===Z||null===(t=Z.filter)||void 0===t?void 0:t.categoryId)||"",categoryName:(null===Z||void 0===Z||null===(n=Z.filter)||void 0===n?void 0:n.categoryName)||"",status:(null===Z||void 0===Z||null===(d=Z.filter)||void 0===d?void 0:d.status)||""},onSubmit:function(e){j(e)}}),j=function(e){var i,l;m(!0);var t={title:null===e||void 0===e||null===(i=e.title)||void 0===i?void 0:i.trim(),websiteId:null===e||void 0===e?void 0:e.websiteId,categoryId:null===e||void 0===e?void 0:e.categoryId,status:"".concat(null===e||void 0===e?void 0:e.status)};null!==e&&void 0!==e&&null!==(l=e.title)&&void 0!==l&&l.trim()||delete t.title,null!==e&&void 0!==e&&e.websiteId||delete t.websiteId,null!==e&&void 0!==e&&e.categoryId||(delete t.categoryId,delete t.categoryName),null!==e&&void 0!==e&&e.status||delete t.status;var n={filter:JSON.stringify(t),range:JSON.stringify([0,P]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,title,websiteId,categoryId,author,source,status,createdAt"};g((0,a.hX)(e)),g({type:"article/fetch",payload:n,callback:function(e){m(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,r.Z)("error",null===e||void 0===e?void 0:e.message)}})};return(0,N.jsx)("form",{onSubmit:f.handleSubmit,children:(0,N.jsxs)(v.ZP,{container:!0,spacing:2,children:[(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,N.jsx)(b.Z,{name:"title",formik:f,label:"T\xean tin t\u1ee9c"})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,N.jsx)(I.Z,{formik:f,setFieldValue:f.setFieldValue,addOrEdit:!1,handleChange:function(){f.setFieldValue("categoryId",""),f.setFieldValue("categoryName","")}})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,N.jsx)(w.Z,{formik:f,setFieldValue:f.setFieldValue,addOrEdit:!1,websiteId:null===f||void 0===f||null===(s=f.values)||void 0===s?void 0:s.websiteId})}),(0,N.jsx)(v.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,N.jsx)(p.Z,{addOrEdit:!1,formik:f,setFieldValue:f.setFieldValue})}),(0,N.jsxs)(v.ZP,{item:!0,xs:12,md:12,lg:12,sx:{display:"flex",justifyContent:"flex-end"},children:[(0,N.jsx)(x.Z,{variant:"contained",endIcon:(0,N.jsx)(E.Z,{}),type:"submit",children:"T\xecm ki\u1ebfm"}),(0,N.jsx)(x.Z,{variant:"outlined",color:"success",endIcon:(0,N.jsx)(O.Z,{}),sx:{ml:2},onClick:function(){u({}),c(!0)},children:"Th\xeam m\u1edbi"})]})]})})},T=l(35855),z=l(53994),A=l(20890),L=l(39281),_=l(79836),J=l(56890),q=l(53382),Y=l(57246),H=l(41286),W=l(27247),B=l(79472),M=l(39987),R=l(58357),X=l(72426),Q=l.n(X),G=Number("20"),K=function(e){var i=e.dataEdit,l=e.setDataEdit,s=e.setVisibleDrawer,v=e.loading,g=e.setLoading,h=e.getList,Z=(0,o.I0)(),f=(0,u.Z)(),j=(0,c.Z)(f.breakpoints.down("md")),p=(0,o.v9)(a.Y2),b=p.data.list,I=p.data.pagination,w=(0,d.useState)(!1),S=(0,n.Z)(w,2),k=S[0],V=S[1],C=function(e,i){Z({type:"article/updateStatus",payload:{id:i,params:{status:e}},callback:function(e){!0===(null===e||void 0===e?void 0:e.success)?(0,r.Z)("success",null===e||void 0===e?void 0:e.message):(0,r.Z)("error",null===e||void 0===e?void 0:e.message)}})},F=function(e){return(0,N.jsx)(M.Z,{status:null===e||void 0===e?void 0:e.status,id:null===e||void 0===e?void 0:e.id,handleStatus:C})},E=function(e){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(x.Z,{size:"small",variant:"outlined",endIcon:(0,N.jsx)(H.Z,{}),onClick:function(){l(e),s(!0)},children:"S\u1eeda"}),(0,N.jsx)(x.Z,{size:"small",variant:"outlined",color:"error",sx:{ml:1},endIcon:(0,N.jsx)(W.Z,{}),onClick:function(){V(!0),l(e)},children:"X\xf3a"})]})};return(0,N.jsxs)(m.Z,{sx:{position:"relative",pb:2},children:[(0,N.jsxs)(L.Z,{sx:{overflow:"auto"},children:[(0,N.jsxs)(_.Z,{children:[(0,N.jsx)(J.Z,{children:function(){var e={whiteSpace:"nowrap",fontWeight:"bold"};return(0,N.jsxs)(T.Z,{children:[(0,N.jsx)(z.Z,{sx:(0,t.Z)((0,t.Z)({},e),{},{width:"5%"}),align:"center",children:"#"}),(0,N.jsx)(z.Z,{sx:e,children:"T\xean tin t\u1ee9c"}),(0,N.jsx)(z.Z,{sx:e,children:"Website"}),(0,N.jsx)(z.Z,{sx:e,children:"Chuy\xean m\u1ee5c"}),(0,N.jsx)(z.Z,{sx:e,children:"T\xe1c gi\u1ea3"}),(0,N.jsx)(z.Z,{sx:e,children:"Ng\xe0y t\u1ea1o"}),(0,N.jsx)(z.Z,{sx:e,children:"Tr\u1ea1ng th\xe1i"}),(0,N.jsx)(z.Z,{align:"right",sx:e,children:"H\xe0nh \u0111\u1ed9ng"})]})}()}),(0,N.jsx)(q.Z,{children:null===b||void 0===b?void 0:b.map((function(e,i){return function(e,i){var l,t;return(0,N.jsxs)(T.Z,{hover:!0,children:[(0,N.jsx)(z.Z,{sx:{width:"5%"},align:"center",children:(0,N.jsx)(A.Z,{variant:"body2",children:i+G*((null===I||void 0===I?void 0:I.current)-1)+1})}),(0,N.jsx)(z.Z,{sx:{width:"20%",overflow:"hidden",maxWidth:300},component:"th",scope:"row",children:null===e||void 0===e?void 0:e.title}),(0,N.jsx)(z.Z,{children:null===e||void 0===e||null===(l=e.website)||void 0===l?void 0:l.name}),(0,N.jsx)(z.Z,{children:null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.text}),(0,N.jsx)(z.Z,{children:null===e||void 0===e?void 0:e.author}),(0,N.jsx)(z.Z,{children:Q()(null===e||void 0===e?void 0:e.createdAt).format("DD/MM/YYYY HH:mm")}),(0,N.jsx)(z.Z,{children:F(e)}),(0,N.jsx)(z.Z,{align:"right",children:E(e)})]},e.id)}(e,i)}))})]}),(null===b||void 0===b?void 0:b.length)>0&&(0,N.jsx)(Y.Z,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},size:j?"small":"medium",count:Math.floor((null===I||void 0===I?void 0:I.total)/(null===I||void 0===I?void 0:I.pageSize))+1,page:null===I||void 0===I?void 0:I.current,color:"primary",shape:"rounded",onChange:function(e,i){var l,t;g(!0);var n=p.filter,d={name:null===n||void 0===n||null===(l=n.name)||void 0===l?void 0:l.trim(),status:null===n||void 0===n?void 0:n.status};null!==n&&void 0!==n&&null!==(t=n.name)&&void 0!==t&&t.trim()||delete d.name,""===(null===n||void 0===n?void 0:n.status)&&delete d.status;var s={filter:JSON.stringify(d),range:JSON.stringify([i*I.pageSize-I.pageSize,i*I.pageSize]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,title,websiteId,categoryId,author,source,status,createdAt"};Z({type:"article/fetch",payload:s,callback:function(e){g(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,r.Z)("error",null===e||void 0===e?void 0:e.message)}})}})]}),0===(null===b||void 0===b?void 0:b.length)&&(0,N.jsx)(B.Z,{}),v&&(0,N.jsx)(y.Z,{}),k&&(0,N.jsx)(R.Z,{name:null===i||void 0===i?void 0:i.title,open:k,handleClose:function(e){V(!1),e&&Z({type:"article/delete",payload:{id:null===i||void 0===i?void 0:i.id},callback:function(e){!0===(null===e||void 0===e?void 0:e.success)?((0,r.Z)("success",null===e||void 0===e?void 0:e.message),h()):!1===(null===e||void 0===e?void 0:e.success)&&(0,r.Z)("error",e&&e.message)}})}})]})},U=Number("20"),$=function(){var e=(0,o.I0)(),i=(0,o.v9)(a.Y2),l=(0,d.useState)(!1),u=(0,n.Z)(l,2),c=u[0],v=u[1],m=(0,d.useState)(!1),x=(0,n.Z)(m,2),g=x[0],h=x[1],Z=(0,d.useState)({id:0,title:"",description:"",createdAt:"",status:0}),f=(0,n.Z)(Z,2),j=f[0],p=f[1];(0,d.useEffect)((function(){b()}),[]);var b=function(){v(!0);var l=i.query,n=i.filter,d={filter:JSON.stringify({}),range:JSON.stringify([0,U]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,title,websiteId,categoryId,author,source,status,createdAt"};"{}"!==(null===l||void 0===l?void 0:l.filter)&&(d=(0,t.Z)((0,t.Z)({},d),{},{filter:null===l||void 0===l?void 0:l.filter})),"{}"!==(null===l||void 0===l?void 0:l.range)&&(d=(0,t.Z)((0,t.Z)({},d),{},{range:null===l||void 0===l?void 0:l.range})),"{}"!==(null===l||void 0===l?void 0:l.sort)&&(d=(0,t.Z)((0,t.Z)({},d),{},{sort:null===l||void 0===l?void 0:l.sort})),e((0,a.hX)(n)),e({type:"article/fetch",payload:d,callback:function(e){v(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,r.Z)("error",null===e||void 0===e?void 0:e.message)}})};return(0,N.jsxs)(s.Z,{title:(0,N.jsx)(D,{setDataEdit:p,setVisibleDrawer:h,setLoading:v}),content:!1,children:[(0,N.jsx)(K,{getList:b,dataEdit:j,setDataEdit:p,setVisibleDrawer:h,loading:c,setLoading:v}),(0,N.jsx)(F,{open:g,dataEdit:j,handleClose:function(){return h(!1)},getList:b})]})}}}]);
//# sourceMappingURL=454.19bf68c5.chunk.js.map