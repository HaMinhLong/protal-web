{"version":3,"file":"static/js/613.08c9ad2c.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/ArrowForwardIos.js","../node_modules/@mui/icons-material/Description.js","../node_modules/@mui/icons-material/Folder.js","../node_modules/@mui/icons-material/Image.js","../node_modules/@mui/icons-material/ListAlt.js","../node_modules/fast-deep-equal/index.js","../node_modules/react-dnd-html5-backend/src/utils/js_utils.ts","../node_modules/react-dnd-html5-backend/src/EnterLeaveCounter.ts","../node_modules/react-dnd-html5-backend/src/NativeDragSources/NativeDragSource.ts","../node_modules/react-dnd-html5-backend/src/NativeTypes.ts","../node_modules/react-dnd-html5-backend/src/NativeDragSources/getDataFromDataTransfer.ts","../node_modules/react-dnd-html5-backend/src/NativeDragSources/nativeTypesConfig.ts","../node_modules/react-dnd-html5-backend/src/NativeDragSources/index.ts","../node_modules/react-dnd-html5-backend/src/BrowserDetector.ts","../node_modules/react-dnd-html5-backend/src/MonotonicInterpolant.ts","../node_modules/react-dnd-html5-backend/src/OffsetUtils.ts","../node_modules/react-dnd-html5-backend/src/OptionsReader.ts","../node_modules/react-dnd-html5-backend/src/HTML5BackendImpl.ts","../node_modules/react-dnd-html5-backend/src/getEmptyImage.ts","../node_modules/react-dnd-html5-backend/src/index.ts","../node_modules/react-dnd/src/hooks/useDragDropManager.ts","../node_modules/react-dnd/src/hooks/useIsomorphicLayoutEffect.ts","../node_modules/react-dnd/src/hooks/useCollector.ts","../node_modules/react-dnd/src/hooks/useCollectedProps.ts","../node_modules/react-dnd/src/hooks/useMonitorOutput.ts","../node_modules/react-dnd/src/hooks/useOptionalFactory.ts","../node_modules/react-dnd/src/hooks/useDrag/connectors.ts","../node_modules/@react-dnd/shallowequal/src/index.ts","../node_modules/react-dnd/src/internals/isRef.ts","../node_modules/react-dnd/src/internals/wrapConnectorHooks.ts","../node_modules/react-dnd/src/internals/SourceConnector.ts","../node_modules/react-dnd/src/internals/DragSourceMonitorImpl.ts","../node_modules/react-dnd/src/hooks/useDrag/DragSourceImpl.ts","../node_modules/react-dnd/src/hooks/useDrag/useRegisteredDragSource.ts","../node_modules/react-dnd/src/hooks/useDrag/useDragSource.ts","../node_modules/react-dnd/src/hooks/useDrag/useDragType.ts","../node_modules/react-dnd/src/internals/registration.ts","../node_modules/react-dnd/src/hooks/useDrag/useDrag.ts","../node_modules/react-dnd/src/hooks/useDrag/useDragSourceMonitor.ts","../node_modules/react-dnd/src/hooks/useDrag/useDragSourceConnector.ts","../node_modules/react-dnd/src/hooks/useDrop/connectors.ts","../node_modules/react-dnd/src/internals/TargetConnector.ts","../node_modules/react-dnd/src/internals/DropTargetMonitorImpl.ts","../node_modules/react-dnd/src/hooks/useDrop/DropTargetImpl.ts","../node_modules/react-dnd/src/hooks/useDrop/useRegisteredDropTarget.ts","../node_modules/react-dnd/src/hooks/useDrop/useDropTarget.ts","../node_modules/react-dnd/src/hooks/useDrop/useAccept.ts","../node_modules/react-dnd/src/hooks/useDrop/useDrop.ts","../node_modules/react-dnd/src/hooks/useDrop/useDropTargetMonitor.ts","../node_modules/react-dnd/src/hooks/useDrop/useDropTargetConnector.ts","../node_modules/dnd-multi-backend/dist/esm/createTransition.js","../node_modules/dnd-multi-backend/dist/esm/transitions.js","../node_modules/dnd-multi-backend/dist/esm/PreviewListImpl.js","../node_modules/dnd-multi-backend/dist/esm/MultiBackendImpl.js","../node_modules/dnd-multi-backend/dist/esm/MultiFactory.js","../node_modules/react-dnd-touch-backend/src/interfaces.ts","../node_modules/react-dnd-touch-backend/src/OptionsReader.ts","../node_modules/react-dnd-touch-backend/src/utils/predicates.ts","../node_modules/react-dnd-touch-backend/src/utils/offsets.ts","../node_modules/react-dnd-touch-backend/src/utils/supportsPassive.ts","../node_modules/react-dnd-touch-backend/src/TouchBackendImpl.ts","../node_modules/react-dnd-touch-backend/src/utils/math.ts","../node_modules/react-dnd-touch-backend/src/index.ts","../node_modules/react-dnd/src/hooks/useDragLayer.ts","../node_modules/@react-dnd/invariant/src/index.ts","../node_modules/react-dnd/src/core/DndContext.ts","../node_modules/dnd-core/src/utils/js_utils.ts","../node_modules/dnd-core/src/actions/dragDrop/types.ts","../node_modules/dnd-core/src/actions/dragDrop/local/setClientOffset.ts","../node_modules/dnd-core/src/actions/dragDrop/beginDrag.ts","../node_modules/dnd-core/src/actions/dragDrop/drop.ts","../node_modules/dnd-core/src/actions/dragDrop/endDrag.ts","../node_modules/dnd-core/src/utils/matchesType.ts","../node_modules/dnd-core/src/actions/dragDrop/hover.ts","../node_modules/dnd-core/src/actions/dragDrop/publishDragSource.ts","../node_modules/dnd-core/src/classes/DragDropManagerImpl.ts","../node_modules/dnd-core/src/actions/dragDrop/index.ts","../node_modules/dnd-core/src/utils/coords.ts","../node_modules/dnd-core/src/utils/dirtiness.ts","../node_modules/dnd-core/src/classes/DragDropMonitorImpl.ts","../node_modules/@react-dnd/asap/src/makeRequestCall.ts","../node_modules/@react-dnd/asap/src/AsapQueue.ts","../node_modules/@react-dnd/asap/src/RawTask.ts","../node_modules/@react-dnd/asap/src/TaskFactory.ts","../node_modules/@react-dnd/asap/src/asap.ts","../node_modules/dnd-core/src/actions/registry.ts","../node_modules/dnd-core/src/interfaces.ts","../node_modules/dnd-core/src/contracts.ts","../node_modules/dnd-core/src/utils/getNextUniqueId.ts","../node_modules/dnd-core/src/classes/HandlerRegistryImpl.ts","../node_modules/dnd-core/src/utils/equality.ts","../node_modules/dnd-core/src/reducers/dirtyHandlerIds.ts","../node_modules/dnd-core/src/reducers/dragOffset.ts","../node_modules/dnd-core/src/reducers/dragOperation.ts","../node_modules/dnd-core/src/reducers/refCount.ts","../node_modules/dnd-core/src/reducers/stateId.ts","../node_modules/dnd-core/src/reducers/index.ts","../node_modules/dnd-core/src/createDragDropManager.ts","../node_modules/react-dnd/src/core/DndProvider.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z\"\n}), 'ArrowForwardIos');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"\n}), 'Description');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"\n}), 'Folder');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"\n}), 'Image');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 5v14H5V5h14m1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9zM11 7h6v2h-6V7zm0 4h6v2h-6v-2zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z\"\n}), 'ListAlt');\n\nexports.default = _default;","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","// cheap lodash replacements\n\nexport function memoize<T>(fn: () => T): () => T {\n\tlet result: T | null = null\n\tconst memoized = () => {\n\t\tif (result == null) {\n\t\t\tresult = fn()\n\t\t}\n\t\treturn result\n\t}\n\treturn memoized\n}\n\n/**\n * drop-in replacement for _.without\n */\nexport function without<T>(items: T[], item: T) {\n\treturn items.filter((i) => i !== item)\n}\n\nexport function union<T extends string | number>(itemsA: T[], itemsB: T[]) {\n\tconst set = new Set<T>()\n\tconst insertItem = (item: T) => set.add(item)\n\titemsA.forEach(insertItem)\n\titemsB.forEach(insertItem)\n\n\tconst result: T[] = []\n\tset.forEach((key) => result.push(key))\n\treturn result\n}\n","import { union, without } from './utils/js_utils.js'\n\ntype NodePredicate = (node: Node | null | undefined) => boolean\n\nexport class EnterLeaveCounter {\n\tprivate entered: any[] = []\n\tprivate isNodeInDocument: NodePredicate\n\n\tpublic constructor(isNodeInDocument: NodePredicate) {\n\t\tthis.isNodeInDocument = isNodeInDocument\n\t}\n\n\tpublic enter(enteringNode: EventTarget | null): boolean {\n\t\tconst previousLength = this.entered.length\n\n\t\tconst isNodeEntered = (node: Node): boolean =>\n\t\t\tthis.isNodeInDocument(node) &&\n\t\t\t(!node.contains || node.contains(enteringNode as Node))\n\n\t\tthis.entered = union(this.entered.filter(isNodeEntered), [enteringNode])\n\n\t\treturn previousLength === 0 && this.entered.length > 0\n\t}\n\n\tpublic leave(leavingNode: EventTarget | null): boolean {\n\t\tconst previousLength = this.entered.length\n\n\t\tthis.entered = without(\n\t\t\tthis.entered.filter(this.isNodeInDocument),\n\t\t\tleavingNode,\n\t\t)\n\n\t\treturn previousLength > 0 && this.entered.length === 0\n\t}\n\n\tpublic reset(): void {\n\t\tthis.entered = []\n\t}\n}\n","import type { DragDropMonitor } from 'dnd-core'\n\nimport type { NativeItemConfig } from './nativeTypesConfig.js'\n\nexport class NativeDragSource {\n\tpublic item: any\n\tprivate config: NativeItemConfig\n\n\tpublic constructor(config: NativeItemConfig) {\n\t\tthis.config = config\n\t\tthis.item = {}\n\t\tthis.initializeExposedProperties()\n\t}\n\n\tprivate initializeExposedProperties() {\n\t\tObject.keys(this.config.exposeProperties).forEach((property) => {\n\t\t\tObject.defineProperty(this.item, property, {\n\t\t\t\tconfigurable: true, // This is needed to allow redefining it later\n\t\t\t\tenumerable: true,\n\t\t\t\tget() {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`Browser doesn't allow reading \"${property}\" until the drop event.`,\n\t\t\t\t\t)\n\t\t\t\t\treturn null\n\t\t\t\t},\n\t\t\t})\n\t\t})\n\t}\n\n\tpublic loadDataTransfer(dataTransfer: DataTransfer | null | undefined): void {\n\t\tif (dataTransfer) {\n\t\t\tconst newProperties: PropertyDescriptorMap = {}\n\t\t\tObject.keys(this.config.exposeProperties).forEach((property) => {\n\t\t\t\tconst propertyFn = this.config.exposeProperties[property]\n\t\t\t\tif (propertyFn != null) {\n\t\t\t\t\tnewProperties[property] = {\n\t\t\t\t\t\tvalue: propertyFn(dataTransfer, this.config.matchesTypes),\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tObject.defineProperties(this.item, newProperties)\n\t\t}\n\t}\n\n\tpublic canDrag(): boolean {\n\t\treturn true\n\t}\n\n\tpublic beginDrag(): any {\n\t\treturn this.item\n\t}\n\n\tpublic isDragging(monitor: DragDropMonitor, handle: string): boolean {\n\t\treturn handle === monitor.getSourceId()\n\t}\n\n\tpublic endDrag(): void {\n\t\t// empty\n\t}\n}\n","export const FILE = '__NATIVE_FILE__'\nexport const URL = '__NATIVE_URL__'\nexport const TEXT = '__NATIVE_TEXT__'\nexport const HTML = '__NATIVE_HTML__'\n","export function getDataFromDataTransfer(\n\tdataTransfer: DataTransfer,\n\ttypesToTry: string[],\n\tdefaultValue: string,\n): string {\n\tconst result = typesToTry.reduce(\n\t\t(resultSoFar, typeToTry) => resultSoFar || dataTransfer.getData(typeToTry),\n\t\t'',\n\t)\n\n\treturn result != null ? result : defaultValue\n}\n","import * as NativeTypes from '../NativeTypes.js'\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer.js'\n\nexport interface NativeItemConfigExposePropreties {\n\t[property: string]: (\n\t\tdataTransfer: DataTransfer,\n\t\tmatchesTypes: string[],\n\t) => any\n}\n\nexport interface NativeItemConfig {\n\texposeProperties: NativeItemConfigExposePropreties\n\tmatchesTypes: string[]\n}\n\nexport const nativeTypesConfig: {\n\t[key: string]: NativeItemConfig\n} = {\n\t[NativeTypes.FILE]: {\n\t\texposeProperties: {\n\t\t\tfiles: (dataTransfer: DataTransfer): File[] =>\n\t\t\t\tArray.prototype.slice.call(dataTransfer.files),\n\t\t\titems: (dataTransfer: DataTransfer): DataTransferItemList =>\n\t\t\t\tdataTransfer.items,\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Files'],\n\t},\n\t[NativeTypes.HTML]: {\n\t\texposeProperties: {\n\t\t\thtml: (dataTransfer: DataTransfer, matchesTypes: string[]): string =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, ''),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Html', 'text/html'],\n\t},\n\t[NativeTypes.URL]: {\n\t\texposeProperties: {\n\t\t\turls: (dataTransfer: DataTransfer, matchesTypes: string[]): string[] =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n'),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Url', 'text/uri-list'],\n\t},\n\t[NativeTypes.TEXT]: {\n\t\texposeProperties: {\n\t\t\ttext: (dataTransfer: DataTransfer, matchesTypes: string[]): string =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, ''),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Text', 'text/plain'],\n\t},\n}\n","import { NativeDragSource } from './NativeDragSource.js'\nimport { nativeTypesConfig } from './nativeTypesConfig.js'\n\nexport function createNativeDragSource(\n\ttype: string,\n\tdataTransfer?: DataTransfer,\n): NativeDragSource {\n\tconst config = nativeTypesConfig[type]\n\tif (!config) {\n\t\tthrow new Error(`native type ${type} has no configuration`)\n\t}\n\tconst result = new NativeDragSource(config)\n\tresult.loadDataTransfer(dataTransfer)\n\treturn result\n}\n\nexport function matchNativeItemType(\n\tdataTransfer: DataTransfer | null,\n): string | null {\n\tif (!dataTransfer) {\n\t\treturn null\n\t}\n\n\tconst dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || [])\n\treturn (\n\t\tObject.keys(nativeTypesConfig).filter((nativeItemType) => {\n\t\t\tconst typeConfig = nativeTypesConfig[nativeItemType]\n\t\t\tif (!typeConfig?.matchesTypes) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\treturn typeConfig.matchesTypes.some(\n\t\t\t\t(t) => dataTransferTypes.indexOf(t) > -1,\n\t\t\t)\n\t\t})[0] || null\n\t)\n}\n","import { memoize } from './utils/js_utils.js'\n\ndeclare global {\n\tinterface Window extends HTMLElement {\n\t\tsafari: any\n\t}\n}\n\nexport type Predicate = () => boolean\nexport const isFirefox: Predicate = memoize(() =>\n\t/firefox/i.test(navigator.userAgent),\n)\nexport const isSafari: Predicate = memoize(() => Boolean(window.safari))\n","export class MonotonicInterpolant {\n\tprivate xs: any\n\tprivate ys: any\n\tprivate c1s: any\n\tprivate c2s: any\n\tprivate c3s: any\n\n\tpublic constructor(xs: number[], ys: number[]) {\n\t\tconst { length } = xs\n\n\t\t// Rearrange xs and ys so that xs is sorted\n\t\tconst indexes = []\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tindexes.push(i)\n\t\t}\n\t\tindexes.sort((a, b) => ((xs[a] as number) < (xs[b] as number) ? -1 : 1))\n\n\t\t// Get consecutive differences and slopes\n\t\tconst dys = []\n\t\tconst dxs = []\n\t\tconst ms = []\n\t\tlet dx\n\t\tlet dy\n\t\tfor (let i = 0; i < length - 1; i++) {\n\t\t\tdx = (xs[i + 1] as number) - (xs[i] as number)\n\t\t\tdy = (ys[i + 1] as number) - (ys[i] as number)\n\t\t\tdxs.push(dx)\n\t\t\tdys.push(dy)\n\t\t\tms.push(dy / dx)\n\t\t}\n\n\t\t// Get degree-1 coefficients\n\t\tconst c1s = [ms[0]]\n\t\tfor (let i = 0; i < dxs.length - 1; i++) {\n\t\t\tconst m2 = ms[i] as number\n\t\t\tconst mNext = ms[i + 1] as number\n\t\t\tif (m2 * mNext <= 0) {\n\t\t\t\tc1s.push(0)\n\t\t\t} else {\n\t\t\t\tdx = dxs[i] as number\n\t\t\t\tconst dxNext = dxs[i + 1] as number\n\t\t\t\tconst common = dx + dxNext\n\t\t\t\tc1s.push(\n\t\t\t\t\t(3 * common) / ((common + dxNext) / m2 + (common + dx) / mNext),\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tc1s.push(ms[ms.length - 1])\n\n\t\t// Get degree-2 and degree-3 coefficients\n\t\tconst c2s = []\n\t\tconst c3s = []\n\t\tlet m\n\t\tfor (let i = 0; i < c1s.length - 1; i++) {\n\t\t\tm = ms[i] as number\n\t\t\tconst c1 = c1s[i] as number\n\t\t\tconst invDx = 1 / (dxs[i] as number)\n\t\t\tconst common = c1 + (c1s[i + 1] as number) - m - m\n\t\t\tc2s.push((m - c1 - common) * invDx)\n\t\t\tc3s.push(common * invDx * invDx)\n\t\t}\n\n\t\tthis.xs = xs\n\t\tthis.ys = ys\n\t\tthis.c1s = c1s\n\t\tthis.c2s = c2s\n\t\tthis.c3s = c3s\n\t}\n\n\tpublic interpolate(x: number): number {\n\t\tconst { xs, ys, c1s, c2s, c3s } = this\n\n\t\t// The rightmost point in the dataset should give an exact result\n\t\tlet i = xs.length - 1\n\t\tif (x === xs[i]) {\n\t\t\treturn ys[i]\n\t\t}\n\n\t\t// Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\t\tlet low = 0\n\t\tlet high = c3s.length - 1\n\t\tlet mid\n\t\twhile (low <= high) {\n\t\t\tmid = Math.floor(0.5 * (low + high))\n\t\t\tconst xHere = xs[mid]\n\t\t\tif (xHere < x) {\n\t\t\t\tlow = mid + 1\n\t\t\t} else if (xHere > x) {\n\t\t\t\thigh = mid - 1\n\t\t\t} else {\n\t\t\t\treturn ys[mid]\n\t\t\t}\n\t\t}\n\t\ti = Math.max(0, high)\n\n\t\t// Interpolate\n\t\tconst diff = x - xs[i]\n\t\tconst diffSq = diff * diff\n\t\treturn ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq\n\t}\n}\n","import type { XYCoord } from 'dnd-core'\n\nimport { isFirefox, isSafari } from './BrowserDetector.js'\nimport { MonotonicInterpolant } from './MonotonicInterpolant.js'\n\nconst ELEMENT_NODE = 1\n\nexport function getNodeClientOffset(node: Node): XYCoord | null {\n\tconst el = node.nodeType === ELEMENT_NODE ? node : node.parentElement\n\n\tif (!el) {\n\t\treturn null\n\t}\n\n\tconst { top, left } = (el as HTMLElement).getBoundingClientRect()\n\treturn { x: left, y: top }\n}\n\nexport function getEventClientOffset(e: MouseEvent): XYCoord {\n\treturn {\n\t\tx: e.clientX,\n\t\ty: e.clientY,\n\t}\n}\n\nfunction isImageNode(node: any) {\n\treturn (\n\t\tnode.nodeName === 'IMG' &&\n\t\t(isFirefox() || !document.documentElement?.contains(node))\n\t)\n}\n\nfunction getDragPreviewSize(\n\tisImage: boolean,\n\tdragPreview: any,\n\tsourceWidth: number,\n\tsourceHeight: number,\n) {\n\tlet dragPreviewWidth = isImage ? dragPreview.width : sourceWidth\n\tlet dragPreviewHeight = isImage ? dragPreview.height : sourceHeight\n\n\t// Work around @2x coordinate discrepancies in browsers\n\tif (isSafari() && isImage) {\n\t\tdragPreviewHeight /= window.devicePixelRatio\n\t\tdragPreviewWidth /= window.devicePixelRatio\n\t}\n\treturn { dragPreviewWidth, dragPreviewHeight }\n}\n\nexport function getDragPreviewOffset(\n\tsourceNode: HTMLElement,\n\tdragPreview: HTMLElement,\n\tclientOffset: XYCoord,\n\tanchorPoint: { anchorX: number; anchorY: number },\n\toffsetPoint: { offsetX: number; offsetY: number },\n): XYCoord {\n\t// The browsers will use the image intrinsic size under different conditions.\n\t// Firefox only cares if it's an image, but WebKit also wants it to be detached.\n\tconst isImage = isImageNode(dragPreview)\n\tconst dragPreviewNode = isImage ? sourceNode : dragPreview\n\tconst dragPreviewNodeOffsetFromClient = getNodeClientOffset(\n\t\tdragPreviewNode,\n\t) as XYCoord\n\tconst offsetFromDragPreview = {\n\t\tx: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n\t\ty: clientOffset.y - dragPreviewNodeOffsetFromClient.y,\n\t}\n\tconst { offsetWidth: sourceWidth, offsetHeight: sourceHeight } = sourceNode\n\tconst { anchorX, anchorY } = anchorPoint\n\tconst { dragPreviewWidth, dragPreviewHeight } = getDragPreviewSize(\n\t\tisImage,\n\t\tdragPreview,\n\t\tsourceWidth,\n\t\tsourceHeight,\n\t)\n\n\tconst calculateYOffset = () => {\n\t\tconst interpolantY = new MonotonicInterpolant(\n\t\t\t[0, 0.5, 1],\n\t\t\t[\n\t\t\t\t// Dock to the top\n\t\t\t\toffsetFromDragPreview.y,\n\t\t\t\t// Align at the center\n\t\t\t\t(offsetFromDragPreview.y / sourceHeight) * dragPreviewHeight,\n\t\t\t\t// Dock to the bottom\n\t\t\t\toffsetFromDragPreview.y + dragPreviewHeight - sourceHeight,\n\t\t\t],\n\t\t)\n\t\tlet y = interpolantY.interpolate(anchorY)\n\t\t// Work around Safari 8 positioning bug\n\t\tif (isSafari() && isImage) {\n\t\t\t// We'll have to wait for @3x to see if this is entirely correct\n\t\t\ty += (window.devicePixelRatio - 1) * dragPreviewHeight\n\t\t}\n\t\treturn y\n\t}\n\n\tconst calculateXOffset = () => {\n\t\t// Interpolate coordinates depending on anchor point\n\t\t// If you know a simpler way to do this, let me know\n\t\tconst interpolantX = new MonotonicInterpolant(\n\t\t\t[0, 0.5, 1],\n\t\t\t[\n\t\t\t\t// Dock to the left\n\t\t\t\toffsetFromDragPreview.x,\n\t\t\t\t// Align at the center\n\t\t\t\t(offsetFromDragPreview.x / sourceWidth) * dragPreviewWidth,\n\t\t\t\t// Dock to the right\n\t\t\t\toffsetFromDragPreview.x + dragPreviewWidth - sourceWidth,\n\t\t\t],\n\t\t)\n\t\treturn interpolantX.interpolate(anchorX)\n\t}\n\n\t// Force offsets if specified in the options.\n\tconst { offsetX, offsetY } = offsetPoint\n\tconst isManualOffsetX = offsetX === 0 || offsetX\n\tconst isManualOffsetY = offsetY === 0 || offsetY\n\treturn {\n\t\tx: isManualOffsetX ? offsetX : calculateXOffset(),\n\t\ty: isManualOffsetY ? offsetY : calculateYOffset(),\n\t}\n}\n","import type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\nexport class OptionsReader {\n\tpublic ownerDocument: Document | null = null\n\tprivate globalContext: HTML5BackendContext\n\tprivate optionsArgs: HTML5BackendOptions | undefined\n\n\tpublic constructor(\n\t\tglobalContext: HTML5BackendContext,\n\t\toptions?: HTML5BackendOptions,\n\t) {\n\t\tthis.globalContext = globalContext\n\t\tthis.optionsArgs = options\n\t}\n\n\tpublic get window(): Window | undefined {\n\t\tif (this.globalContext) {\n\t\t\treturn this.globalContext\n\t\t} else if (typeof window !== 'undefined') {\n\t\t\treturn window\n\t\t}\n\t\treturn undefined\n\t}\n\n\tpublic get document(): Document | undefined {\n\t\tif (this.globalContext?.document) {\n\t\t\treturn this.globalContext.document\n\t\t} else if (this.window) {\n\t\t\treturn this.window.document\n\t\t} else {\n\t\t\treturn undefined\n\t\t}\n\t}\n\n\tpublic get rootElement(): Node | undefined {\n\t\treturn this.optionsArgs?.rootElement || this.window\n\t}\n}\n","import type {\n\tBackend,\n\tDragDropActions,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport { EnterLeaveCounter } from './EnterLeaveCounter.js'\nimport {\n\tcreateNativeDragSource,\n\tmatchNativeItemType,\n} from './NativeDragSources/index.js'\nimport type { NativeDragSource } from './NativeDragSources/NativeDragSource.js'\nimport * as NativeTypes from './NativeTypes.js'\nimport {\n\tgetDragPreviewOffset,\n\tgetEventClientOffset,\n\tgetNodeClientOffset,\n} from './OffsetUtils.js'\nimport { OptionsReader } from './OptionsReader.js'\nimport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\ntype RootNode = Node & { __isReactDndBackendSetUp: boolean | undefined }\n\nexport class HTML5BackendImpl implements Backend {\n\tprivate options: OptionsReader\n\n\t// React-Dnd Components\n\tprivate actions: DragDropActions\n\tprivate monitor: DragDropMonitor\n\tprivate registry: HandlerRegistry\n\n\t// Internal State\n\tprivate enterLeaveCounter: EnterLeaveCounter\n\n\tprivate sourcePreviewNodes: Map<string, Element> = new Map()\n\tprivate sourcePreviewNodeOptions: Map<string, any> = new Map()\n\tprivate sourceNodes: Map<string, Element> = new Map()\n\tprivate sourceNodeOptions: Map<string, any> = new Map()\n\n\tprivate dragStartSourceIds: string[] | null = null\n\tprivate dropTargetIds: string[] = []\n\tprivate dragEnterTargetIds: string[] = []\n\tprivate currentNativeSource: NativeDragSource | null = null\n\tprivate currentNativeHandle: Identifier | null = null\n\tprivate currentDragSourceNode: Element | null = null\n\tprivate altKeyPressed = false\n\tprivate mouseMoveTimeoutTimer: number | null = null\n\tprivate asyncEndDragFrameId: number | null = null\n\tprivate dragOverTargetIds: string[] | null = null\n\n\tprivate lastClientOffset: XYCoord | null = null\n\tprivate hoverRafId: number | null = null\n\n\tpublic constructor(\n\t\tmanager: DragDropManager,\n\t\tglobalContext?: HTML5BackendContext,\n\t\toptions?: HTML5BackendOptions,\n\t) {\n\t\tthis.options = new OptionsReader(globalContext, options)\n\t\tthis.actions = manager.getActions()\n\t\tthis.monitor = manager.getMonitor()\n\t\tthis.registry = manager.getRegistry()\n\t\tthis.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument)\n\t}\n\n\t/**\n\t * Generate profiling statistics for the HTML5Backend.\n\t */\n\tpublic profile(): Record<string, number> {\n\t\treturn {\n\t\t\tsourcePreviewNodes: this.sourcePreviewNodes.size,\n\t\t\tsourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n\t\t\tsourceNodeOptions: this.sourceNodeOptions.size,\n\t\t\tsourceNodes: this.sourceNodes.size,\n\t\t\tdragStartSourceIds: this.dragStartSourceIds?.length || 0,\n\t\t\tdropTargetIds: this.dropTargetIds.length,\n\t\t\tdragEnterTargetIds: this.dragEnterTargetIds.length,\n\t\t\tdragOverTargetIds: this.dragOverTargetIds?.length || 0,\n\t\t}\n\t}\n\n\t// public for test\n\tpublic get window(): Window | undefined {\n\t\treturn this.options.window\n\t}\n\tpublic get document(): Document | undefined {\n\t\treturn this.options.document\n\t}\n\t/**\n\t * Get the root element to use for event subscriptions\n\t */\n\tprivate get rootElement(): Node | undefined {\n\t\treturn this.options.rootElement as Node\n\t}\n\n\tpublic setup(): void {\n\t\tconst root = this.rootElement as RootNode | undefined\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\tif (root.__isReactDndBackendSetUp) {\n\t\t\tthrow new Error('Cannot have two HTML5 backends at the same time.')\n\t\t}\n\t\troot.__isReactDndBackendSetUp = true\n\t\tthis.addEventListeners(root)\n\t}\n\n\tpublic teardown(): void {\n\t\tconst root = this.rootElement as RootNode\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\troot.__isReactDndBackendSetUp = false\n\t\tthis.removeEventListeners(this.rootElement as Element)\n\t\tthis.clearCurrentDragSourceNode()\n\t\tif (this.asyncEndDragFrameId) {\n\t\t\tthis.window?.cancelAnimationFrame(this.asyncEndDragFrameId)\n\t\t}\n\t}\n\n\tpublic connectDragPreview(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourcePreviewNodeOptions.set(sourceId, options)\n\t\tthis.sourcePreviewNodes.set(sourceId, node)\n\n\t\treturn (): void => {\n\t\t\tthis.sourcePreviewNodes.delete(sourceId)\n\t\t\tthis.sourcePreviewNodeOptions.delete(sourceId)\n\t\t}\n\t}\n\n\tpublic connectDragSource(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourceNodes.set(sourceId, node)\n\t\tthis.sourceNodeOptions.set(sourceId, options)\n\n\t\tconst handleDragStart = (e: any) => this.handleDragStart(e, sourceId)\n\t\tconst handleSelectStart = (e: any) => this.handleSelectStart(e)\n\n\t\tnode.setAttribute('draggable', 'true')\n\t\tnode.addEventListener('dragstart', handleDragStart)\n\t\tnode.addEventListener('selectstart', handleSelectStart)\n\n\t\treturn (): void => {\n\t\t\tthis.sourceNodes.delete(sourceId)\n\t\t\tthis.sourceNodeOptions.delete(sourceId)\n\n\t\t\tnode.removeEventListener('dragstart', handleDragStart)\n\t\t\tnode.removeEventListener('selectstart', handleSelectStart)\n\t\t\tnode.setAttribute('draggable', 'false')\n\t\t}\n\t}\n\n\tpublic connectDropTarget(targetId: string, node: HTMLElement): Unsubscribe {\n\t\tconst handleDragEnter = (e: DragEvent) => this.handleDragEnter(e, targetId)\n\t\tconst handleDragOver = (e: DragEvent) => this.handleDragOver(e, targetId)\n\t\tconst handleDrop = (e: DragEvent) => this.handleDrop(e, targetId)\n\n\t\tnode.addEventListener('dragenter', handleDragEnter)\n\t\tnode.addEventListener('dragover', handleDragOver)\n\t\tnode.addEventListener('drop', handleDrop)\n\n\t\treturn (): void => {\n\t\t\tnode.removeEventListener('dragenter', handleDragEnter)\n\t\t\tnode.removeEventListener('dragover', handleDragOver)\n\t\t\tnode.removeEventListener('drop', handleDrop)\n\t\t}\n\t}\n\n\tprivate addEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.addEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.addEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStart as EventListener,\n\t\t)\n\t\ttarget.addEventListener('dragstart', this.handleTopDragStartCapture, true)\n\t\ttarget.addEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('dragover', this.handleTopDragOver as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate removeEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.removeEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.removeEventListener('dragstart', this.handleTopDragStart as any)\n\t\ttarget.removeEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStartCapture,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOver as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.removeEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate getCurrentSourceNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourceNodeOptions = this.sourceNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tdropEffect: this.altKeyPressed ? 'copy' : 'move',\n\t\t\t...(sourceNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getCurrentDropEffect() {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\t// It makes more sense to default to 'copy' for native resources\n\t\t\treturn 'copy'\n\t\t}\n\n\t\treturn this.getCurrentSourceNodeOptions().dropEffect\n\t}\n\n\tprivate getCurrentSourcePreviewNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tanchorX: 0.5,\n\t\t\tanchorY: 0.5,\n\t\t\tcaptureDraggingState: false,\n\t\t\t...(sourcePreviewNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getSourceClientOffset = (sourceId: string): XYCoord | null => {\n\t\tconst source = this.sourceNodes.get(sourceId)\n\t\treturn (source && getNodeClientOffset(source as HTMLElement)) || null\n\t}\n\n\tprivate isDraggingNativeItem() {\n\t\tconst itemType = this.monitor.getItemType()\n\t\treturn Object.keys(NativeTypes).some(\n\t\t\t(key: string) => (NativeTypes as any)[key] === itemType,\n\t\t)\n\t}\n\n\tprivate beginDragNativeItem(type: string, dataTransfer?: DataTransfer) {\n\t\tthis.clearCurrentDragSourceNode()\n\n\t\tthis.currentNativeSource = createNativeDragSource(type, dataTransfer)\n\t\tthis.currentNativeHandle = this.registry.addSource(\n\t\t\ttype,\n\t\t\tthis.currentNativeSource,\n\t\t)\n\t\tthis.actions.beginDrag([this.currentNativeHandle])\n\t}\n\n\tprivate endDragNativeItem = (): void => {\n\t\tif (!this.isDraggingNativeItem()) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.actions.endDrag()\n\t\tif (this.currentNativeHandle) {\n\t\t\tthis.registry.removeSource(this.currentNativeHandle)\n\t\t}\n\t\tthis.currentNativeHandle = null\n\t\tthis.currentNativeSource = null\n\t}\n\n\tprivate isNodeInDocument = (node: Node | null | undefined): boolean => {\n\t\t// Check the node either in the main document or in the current context\n\t\treturn Boolean(\n\t\t\tnode &&\n\t\t\t\tthis.document &&\n\t\t\t\tthis.document.body &&\n\t\t\t\tthis.document.body.contains(node),\n\t\t)\n\t}\n\n\tprivate endDragIfSourceWasRemovedFromDOM = (): void => {\n\t\tconst node = this.currentDragSourceNode\n\t\tif (node == null || this.isNodeInDocument(node)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tprivate setCurrentDragSourceNode(node: Element | null) {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.currentDragSourceNode = node\n\n\t\t// A timeout of > 0 is necessary to resolve Firefox issue referenced\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\tconst MOUSE_MOVE_TIMEOUT = 1000\n\n\t\t// Receiving a mouse event in the middle of a dragging operation\n\t\t// means it has ended and the drag source node disappeared from DOM,\n\t\t// so the browser didn't dispatch the dragend event.\n\t\t//\n\t\t// We need to wait before we start listening for mousemove events.\n\t\t// This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n\t\t// immediately in some browsers.\n\t\t//\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\t//\n\t\tthis.mouseMoveTimeoutTimer = setTimeout(() => {\n\t\t\treturn this.rootElement?.addEventListener(\n\t\t\t\t'mousemove',\n\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t}, MOUSE_MOVE_TIMEOUT) as any as number\n\t}\n\n\tprivate clearCurrentDragSourceNode() {\n\t\tif (this.currentDragSourceNode) {\n\t\t\tthis.currentDragSourceNode = null\n\n\t\t\tif (this.rootElement) {\n\t\t\t\tthis.window?.clearTimeout(this.mouseMoveTimeoutTimer || undefined)\n\t\t\t\tthis.rootElement.removeEventListener(\n\t\t\t\t\t'mousemove',\n\t\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\t\ttrue,\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.mouseMoveTimeoutTimer = null\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\tprivate scheduleHover = (dragOverTargetIds: string[] | null) => {\n\t\tif (\n\t\t\tthis.hoverRafId === null &&\n\t\t\ttypeof requestAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tthis.hoverRafId = requestAnimationFrame(() => {\n\t\t\t\tif (this.monitor.isDragging()) {\n\t\t\t\t\tthis.actions.hover(dragOverTargetIds || [], {\n\t\t\t\t\t\tclientOffset: this.lastClientOffset,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.hoverRafId = null\n\t\t\t})\n\t\t}\n\t}\n\n\tprivate cancelHover = () => {\n\t\tif (\n\t\t\tthis.hoverRafId !== null &&\n\t\t\ttypeof cancelAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tcancelAnimationFrame(this.hoverRafId)\n\t\t\tthis.hoverRafId = null\n\t\t}\n\t}\n\n\tpublic handleTopDragStartCapture = (): void => {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.dragStartSourceIds = []\n\t}\n\n\tpublic handleDragStart(e: DragEvent, sourceId: string): void {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tif (!this.dragStartSourceIds) {\n\t\t\tthis.dragStartSourceIds = []\n\t\t}\n\t\tthis.dragStartSourceIds.unshift(sourceId)\n\t}\n\n\tpublic handleTopDragStart = (e: DragEvent): void => {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dragStartSourceIds } = this\n\t\tthis.dragStartSourceIds = null\n\n\t\tconst clientOffset = getEventClientOffset(e)\n\n\t\t// Avoid crashing if we missed a drop event or our previous drag died\n\t\tif (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t\tthis.cancelHover()\n\t\t}\n\n\t\t// Don't publish the source just yet (see why below)\n\t\tthis.actions.beginDrag(dragStartSourceIds || [], {\n\t\t\tpublishSource: false,\n\t\t\tgetSourceClientOffset: this.getSourceClientOffset,\n\t\t\tclientOffset,\n\t\t})\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (this.monitor.isDragging()) {\n\t\t\tif (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n\t\t\t\t// Use custom drag image if user specifies it.\n\t\t\t\t// If child drag source refuses drag but parent agrees,\n\t\t\t\t// use parent's node as drag image. Neither works in IE though.\n\t\t\t\tconst sourceId: string = this.monitor.getSourceId() as string\n\t\t\t\tconst sourceNode = this.sourceNodes.get(sourceId)\n\t\t\t\tconst dragPreview = this.sourcePreviewNodes.get(sourceId) || sourceNode\n\n\t\t\t\tif (dragPreview) {\n\t\t\t\t\tconst { anchorX, anchorY, offsetX, offsetY } =\n\t\t\t\t\t\tthis.getCurrentSourcePreviewNodeOptions()\n\t\t\t\t\tconst anchorPoint = { anchorX, anchorY }\n\t\t\t\t\tconst offsetPoint = { offsetX, offsetY }\n\t\t\t\t\tconst dragPreviewOffset = getDragPreviewOffset(\n\t\t\t\t\t\tsourceNode as HTMLElement,\n\t\t\t\t\t\tdragPreview as HTMLElement,\n\t\t\t\t\t\tclientOffset,\n\t\t\t\t\t\tanchorPoint,\n\t\t\t\t\t\toffsetPoint,\n\t\t\t\t\t)\n\n\t\t\t\t\tdataTransfer.setDragImage(\n\t\t\t\t\t\tdragPreview,\n\t\t\t\t\t\tdragPreviewOffset.x,\n\t\t\t\t\t\tdragPreviewOffset.y,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Firefox won't drag without setting data\n\t\t\t\tdataTransfer?.setData('application/json', {} as any)\n\t\t\t} catch (err) {\n\t\t\t\t// IE doesn't support MIME types in setData\n\t\t\t}\n\n\t\t\t// Store drag source node so we can check whether\n\t\t\t// it is removed from DOM and trigger endDrag manually.\n\t\t\tthis.setCurrentDragSourceNode(e.target as Element)\n\n\t\t\t// Now we are ready to publish the drag source.. or are we not?\n\t\t\tconst { captureDraggingState } = this.getCurrentSourcePreviewNodeOptions()\n\t\t\tif (!captureDraggingState) {\n\t\t\t\t// Usually we want to publish it in the next tick so that browser\n\t\t\t\t// is able to screenshot the current (not yet dragging) state.\n\t\t\t\t//\n\t\t\t\t// It also neatly avoids a situation where render() returns null\n\t\t\t\t// in the same tick for the source element, and browser freaks out.\n\t\t\t\tsetTimeout(() => this.actions.publishDragSource(), 0)\n\t\t\t} else {\n\t\t\t\t// In some cases the user may want to override this behavior, e.g.\n\t\t\t\t// to work around IE not supporting custom drag previews.\n\t\t\t\t//\n\t\t\t\t// When using a custom drag layer, the only way to prevent\n\t\t\t\t// the default drag preview from drawing in IE is to screenshot\n\t\t\t\t// the dragging state in which the node itself has zero opacity\n\t\t\t\t// and height. In this case, though, returning null from render()\n\t\t\t\t// will abruptly end the dragging, which is not obvious.\n\t\t\t\t//\n\t\t\t\t// This is the reason such behavior is strictly opt-in.\n\t\t\t\tthis.actions.publishDragSource()\n\t\t\t}\n\t\t} else if (nativeType) {\n\t\t\t// A native item (such as URL) dragged from inside the document\n\t\t\tthis.beginDragNativeItem(nativeType)\n\t\t} else if (\n\t\t\tdataTransfer &&\n\t\t\t!dataTransfer.types &&\n\t\t\t((e.target && !(e.target as Element).hasAttribute) ||\n\t\t\t\t!(e.target as Element).hasAttribute('draggable'))\n\t\t) {\n\t\t\t// Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n\t\t\t// Just let it drag. It's a native type (URL or text) and will be picked up in\n\t\t\t// dragenter handler.\n\t\t\treturn\n\t\t} else {\n\t\t\t// If by this time no drag source reacted, tell browser not to drag.\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\n\tpublic handleTopDragEndCapture = (): void => {\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\t// Firefox can dispatch this event in an infinite loop\n\t\t\t// if dragend handler does something like showing an alert.\n\t\t\t// Only proceed if we have not handled it already.\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDragEnterCapture = (e: DragEvent): void => {\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\n\t\tconst isFirstEnter = this.enterLeaveCounter.enter(e.target)\n\t\tif (!isFirstEnter || this.monitor.isDragging()) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (nativeType) {\n\t\t\t// A native item (such as file or URL) dragged from outside the document\n\t\t\tthis.beginDragNativeItem(nativeType, dataTransfer as DataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragEnter(_e: DragEvent, targetId: string): void {\n\t\tthis.dragEnterTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragEnter = (e: DragEvent): void => {\n\t\tconst { dragEnterTargetIds } = this\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\n\t\t// If the target changes position as the result of `dragenter`, `dragover` might still\n\t\t// get dispatched despite target being no longer there. The easy solution is to check\n\t\t// whether there actually is a target before firing `hover`.\n\t\tif (dragEnterTargetIds.length > 0) {\n\t\t\tthis.actions.hover(dragEnterTargetIds, {\n\t\t\t\tclientOffset: getEventClientOffset(e),\n\t\t\t})\n\t\t}\n\n\t\tconst canDrop = dragEnterTargetIds.some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// IE requires this to fire dragover events\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragOverCapture = (e: DragEvent): void => {\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragOver(_e: DragEvent, targetId: string): void {\n\t\tif (this.dragOverTargetIds === null) {\n\t\t\tthis.dragOverTargetIds = []\n\t\t}\n\t\tthis.dragOverTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragOver = (e: DragEvent): void => {\n\t\tconst { dragOverTargetIds } = this\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\t// Prevent default \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\t\tthis.lastClientOffset = getEventClientOffset(e)\n\n\t\tthis.scheduleHover(dragOverTargetIds)\n\n\t\tconst canDrop = (dragOverTargetIds || []).some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// Show user-specified drop effect.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t} else if (this.isDraggingNativeItem()) {\n\t\t\t// Don't show a nice cursor but still prevent default\n\t\t\t// \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t} else {\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragLeaveCapture = (e: DragEvent): void => {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tconst isLastLeave = this.enterLeaveCounter.leave(e.target)\n\t\tif (!isLastLeave) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tsetTimeout(() => this.endDragNativeItem(), 0)\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDropCapture = (e: DragEvent): void => {\n\t\tthis.dropTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t} else if (matchNativeItemType(e.dataTransfer)) {\n\t\t\t// Dragging some elements, like <a> and <img> may still behave like a native drag event,\n\t\t\t// even if the current drag event matches a user-defined type.\n\t\t\t// Stop the default behavior when we're not expecting a native item to be dropped.\n\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tthis.enterLeaveCounter.reset()\n\t}\n\n\tpublic handleDrop(_e: DragEvent, targetId: string): void {\n\t\tthis.dropTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDrop = (e: DragEvent): void => {\n\t\tconst { dropTargetIds } = this\n\t\tthis.dropTargetIds = []\n\n\t\tthis.actions.hover(dropTargetIds, {\n\t\t\tclientOffset: getEventClientOffset(e),\n\t\t})\n\t\tthis.actions.drop({ dropEffect: this.getCurrentDropEffect() })\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.endDragNativeItem()\n\t\t} else if (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleSelectStart = (e: DragEvent): void => {\n\t\tconst target = e.target as HTMLElement & { dragDrop: () => void }\n\n\t\t// Only IE requires us to explicitly say\n\t\t// we want drag drop operation to start\n\t\tif (typeof target.dragDrop !== 'function') {\n\t\t\treturn\n\t\t}\n\n\t\t// Inputs and textareas should be selectable\n\t\tif (\n\t\t\ttarget.tagName === 'INPUT' ||\n\t\t\ttarget.tagName === 'SELECT' ||\n\t\t\ttarget.tagName === 'TEXTAREA' ||\n\t\t\ttarget.isContentEditable\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\t// For other targets, ask IE\n\t\t// to enable drag and drop\n\t\te.preventDefault()\n\t\ttarget.dragDrop()\n\t}\n}\n","let emptyImage: HTMLImageElement | undefined\n\nexport function getEmptyImage(): HTMLImageElement {\n\tif (!emptyImage) {\n\t\temptyImage = new Image()\n\t\temptyImage.src =\n\t\t\t'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='\n\t}\n\n\treturn emptyImage\n}\n","import type { BackendFactory, DragDropManager } from 'dnd-core'\n\nimport { HTML5BackendImpl } from './HTML5BackendImpl.js'\nimport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\nexport { getEmptyImage } from './getEmptyImage.js'\nexport * as NativeTypes from './NativeTypes.js'\nexport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\nexport const HTML5Backend: BackendFactory = function createBackend(\n\tmanager: DragDropManager,\n\tcontext?: HTML5BackendContext,\n\toptions?: HTML5BackendOptions,\n): HTML5BackendImpl {\n\treturn new HTML5BackendImpl(manager, context, options)\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { DragDropManager } from 'dnd-core'\nimport { useContext } from 'react'\n\nimport { DndContext } from '../core/index.js'\n\n/**\n * A hook to retrieve the DragDropManager from Context\n */\nexport function useDragDropManager(): DragDropManager {\n\tconst { dragDropManager } = useContext(DndContext)\n\tinvariant(dragDropManager != null, 'Expected drag drop context')\n\treturn dragDropManager as DragDropManager\n}\n","import { useEffect, useLayoutEffect } from 'react'\n\n// suppress the useLayoutEffect warning on server side.\nexport const useIsomorphicLayoutEffect =\n\ttypeof window !== 'undefined' ? useLayoutEffect : useEffect\n","import equal from 'fast-deep-equal'\nimport { useCallback, useState } from 'react'\n\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js'\n\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\nexport function useCollector<T, S>(\n\tmonitor: T,\n\tcollect: (monitor: T) => S,\n\tonUpdate?: () => void,\n): [S, () => void] {\n\tconst [collected, setCollected] = useState(() => collect(monitor))\n\n\tconst updateCollected = useCallback(() => {\n\t\tconst nextValue = collect(monitor)\n\t\t// This needs to be a deep-equality check because some monitor-collected values\n\t\t// include XYCoord objects that may be equivalent, but do not have instance equality.\n\t\tif (!equal(collected, nextValue)) {\n\t\t\tsetCollected(nextValue)\n\t\t\tif (onUpdate) {\n\t\t\t\tonUpdate()\n\t\t\t}\n\t\t}\n\t}, [collected, monitor, onUpdate])\n\n\t// update the collected properties after react renders.\n\t// Note that the \"Dustbin Stress Test\" fails if this is not\n\t// done when the component updates\n\tuseIsomorphicLayoutEffect(updateCollected)\n\n\treturn [collected, updateCollected]\n}\n","import type { Connector } from '../internals/index.js'\nimport type { HandlerManager, MonitorEventEmitter } from '../types/index.js'\nimport { useMonitorOutput } from './useMonitorOutput.js'\n\nexport function useCollectedProps<Collected, Monitor extends HandlerManager>(\n\tcollector: ((monitor: Monitor) => Collected) | undefined,\n\tmonitor: Monitor & MonitorEventEmitter,\n\tconnector: Connector,\n) {\n\treturn useMonitorOutput(monitor, collector || (() => ({} as Collected)), () =>\n\t\tconnector.reconnect(),\n\t)\n}\n","import type { HandlerManager, MonitorEventEmitter } from '../types/index.js'\nimport { useCollector } from './useCollector.js'\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js'\n\nexport function useMonitorOutput<Monitor extends HandlerManager, Collected>(\n\tmonitor: Monitor & MonitorEventEmitter,\n\tcollect: (monitor: Monitor) => Collected,\n\tonCollect?: () => void,\n): Collected {\n\tconst [collected, updateCollected] = useCollector(monitor, collect, onCollect)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction subscribeToMonitorStateChange() {\n\t\t\tconst handlerId = monitor.getHandlerId()\n\t\t\tif (handlerId == null) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn monitor.subscribeToStateChange(updateCollected, {\n\t\t\t\thandlerIds: [handlerId],\n\t\t\t})\n\t\t},\n\t\t[monitor, updateCollected],\n\t)\n\n\treturn collected\n}\n","import { useMemo } from 'react'\n\nimport type { FactoryOrInstance } from './types.js'\n\nexport function useOptionalFactory<T>(\n\targ: FactoryOrInstance<T>,\n\tdeps?: unknown[],\n): T {\n\tconst memoDeps = [...(deps || [])]\n\tif (deps == null && typeof arg !== 'function') {\n\t\tmemoDeps.push(arg)\n\t}\n\treturn useMemo<T>(() => {\n\t\treturn typeof arg === 'function' ? (arg as () => T)() : (arg as T)\n\t}, memoDeps)\n}\n","import { useMemo } from 'react'\n\nimport type { SourceConnector } from '../../internals/index.js'\n\nexport function useConnectDragSource(connector: SourceConnector) {\n\treturn useMemo(() => connector.hooks.dragSource(), [connector])\n}\n\nexport function useConnectDragPreview(connector: SourceConnector) {\n\treturn useMemo(() => connector.hooks.dragPreview(), [connector])\n}\n","export function shallowEqual<T>(\n\tobjA: T,\n\tobjB: T,\n\tcompare?: (a: T, b: T, key?: string) => boolean | void,\n\tcompareContext?: any,\n) {\n\tlet compareResult = compare\n\t\t? compare.call(compareContext, objA, objB)\n\t\t: void 0\n\tif (compareResult !== void 0) {\n\t\treturn !!compareResult\n\t}\n\n\tif (objA === objB) {\n\t\treturn true\n\t}\n\n\tif (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n\t\treturn false\n\t}\n\n\tconst keysA = Object.keys(objA)\n\tconst keysB = Object.keys(objB)\n\n\tif (keysA.length !== keysB.length) {\n\t\treturn false\n\t}\n\n\tconst bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB)\n\n\t// Test for A's keys different from B.\n\tfor (let idx = 0; idx < keysA.length; idx++) {\n\t\tconst key = keysA[idx] as string\n\n\t\tif (!bHasOwnProperty(key)) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst valueA = (objA as any)[key]\n\t\tconst valueB = (objB as any)[key]\n\n\t\tcompareResult = compare\n\t\t\t? compare.call(compareContext, valueA, valueB, key)\n\t\t\t: void 0\n\n\t\tif (\n\t\t\tcompareResult === false ||\n\t\t\t(compareResult === void 0 && valueA !== valueB)\n\t\t) {\n\t\t\treturn false\n\t\t}\n\t}\n\n\treturn true\n}\n","export interface Ref<T> {\n\tcurrent: T\n}\n\nexport function isRef(obj: unknown): boolean {\n\treturn (\n\t\t// eslint-disable-next-line no-prototype-builtins\n\t\tobj !== null &&\n\t\ttypeof obj === 'object' &&\n\t\tObject.prototype.hasOwnProperty.call(obj, 'current')\n\t)\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { ReactElement } from 'react'\nimport { cloneElement, isValidElement } from 'react'\n\nfunction throwIfCompositeComponentElement(element: ReactElement<any>) {\n\t// Custom components can no longer be wrapped directly in React DnD 2.0\n\t// so that we don't need to depend on findDOMNode() from react-dom.\n\tif (typeof element.type === 'string') {\n\t\treturn\n\t}\n\n\tconst displayName =\n\t\t(element.type as any).displayName || element.type.name || 'the component'\n\n\tthrow new Error(\n\t\t'Only native element nodes can now be passed to React DnD connectors.' +\n\t\t\t`You can either wrap ${displayName} into a <div>, or turn it into a ` +\n\t\t\t'drag source or a drop target itself.',\n\t)\n}\n\nfunction wrapHookToRecognizeElement(hook: (node: any, options: any) => void) {\n\treturn (elementOrNode = null, options = null) => {\n\t\t// When passed a node, call the hook straight away.\n\t\tif (!isValidElement(elementOrNode)) {\n\t\t\tconst node = elementOrNode\n\t\t\thook(node, options)\n\t\t\t// return the node so it can be chained (e.g. when within callback refs\n\t\t\t// <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\t\t\treturn node\n\t\t}\n\n\t\t// If passed a ReactElement, clone it and attach this function as a ref.\n\t\t// This helps us achieve a neat API where user doesn't even know that refs\n\t\t// are being used under the hood.\n\t\tconst element: ReactElement | null = elementOrNode\n\t\tthrowIfCompositeComponentElement(element as any)\n\n\t\t// When no options are passed, use the hook directly\n\t\tconst ref = options ? (node: Element) => hook(node, options) : hook\n\t\treturn cloneWithRef(element, ref)\n\t}\n}\n\nexport function wrapConnectorHooks(hooks: any) {\n\tconst wrappedHooks: any = {}\n\n\tObject.keys(hooks).forEach((key) => {\n\t\tconst hook = hooks[key]\n\n\t\t// ref objects should be passed straight through without wrapping\n\t\tif (key.endsWith('Ref')) {\n\t\t\twrappedHooks[key] = hooks[key]\n\t\t} else {\n\t\t\tconst wrappedHook = wrapHookToRecognizeElement(hook)\n\t\t\twrappedHooks[key] = () => wrappedHook\n\t\t}\n\t})\n\n\treturn wrappedHooks\n}\n\nfunction setRef(ref: any, node: any) {\n\tif (typeof ref === 'function') {\n\t\tref(node)\n\t} else {\n\t\tref.current = node\n\t}\n}\n\nfunction cloneWithRef(element: any, newRef: any): ReactElement<any> {\n\tconst previousRef = element.ref\n\tinvariant(\n\t\ttypeof previousRef !== 'string',\n\t\t'Cannot connect React DnD to an element with an existing string ref. ' +\n\t\t\t'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' +\n\t\t\t'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs',\n\t)\n\n\tif (!previousRef) {\n\t\t// When there is no ref on the element, use the new ref directly\n\t\treturn cloneElement(element, {\n\t\t\tref: newRef,\n\t\t})\n\t} else {\n\t\treturn cloneElement(element, {\n\t\t\tref: (node: any) => {\n\t\t\t\tsetRef(previousRef, node)\n\t\t\t\tsetRef(newRef, node)\n\t\t\t},\n\t\t})\n\t}\n}\n","import { shallowEqual } from '@react-dnd/shallowequal'\nimport type { Backend, Identifier, Unsubscribe } from 'dnd-core'\nimport type { ReactElement, Ref, RefObject } from 'react'\n\nimport type { DragPreviewOptions, DragSourceOptions } from '../types/index.js'\nimport { isRef } from './isRef.js'\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js'\n\nexport interface Connector {\n\thooks: any\n\tconnectTarget: any\n\treceiveHandlerId(handlerId: Identifier | null): void\n\treconnect(): void\n}\n\nexport class SourceConnector implements Connector {\n\tpublic hooks = wrapConnectorHooks({\n\t\tdragSource: (\n\t\t\tnode: Element | ReactElement | Ref<any>,\n\t\t\toptions?: DragSourceOptions,\n\t\t) => {\n\t\t\tthis.clearDragSource()\n\t\t\tthis.dragSourceOptions = options || null\n\t\t\tif (isRef(node)) {\n\t\t\t\tthis.dragSourceRef = node as RefObject<any>\n\t\t\t} else {\n\t\t\t\tthis.dragSourceNode = node\n\t\t\t}\n\t\t\tthis.reconnectDragSource()\n\t\t},\n\t\tdragPreview: (node: any, options?: DragPreviewOptions) => {\n\t\t\tthis.clearDragPreview()\n\t\t\tthis.dragPreviewOptions = options || null\n\t\t\tif (isRef(node)) {\n\t\t\t\tthis.dragPreviewRef = node\n\t\t\t} else {\n\t\t\t\tthis.dragPreviewNode = node\n\t\t\t}\n\t\t\tthis.reconnectDragPreview()\n\t\t},\n\t})\n\tprivate handlerId: Identifier | null = null\n\n\t// The drop target may either be attached via ref or connect function\n\tprivate dragSourceRef: RefObject<any> | null = null\n\tprivate dragSourceNode: any\n\tprivate dragSourceOptionsInternal: DragSourceOptions | null = null\n\tprivate dragSourceUnsubscribe: Unsubscribe | undefined\n\n\t// The drag preview may either be attached via ref or connect function\n\tprivate dragPreviewRef: RefObject<any> | null = null\n\tprivate dragPreviewNode: any\n\tprivate dragPreviewOptionsInternal: DragPreviewOptions | null = null\n\tprivate dragPreviewUnsubscribe: Unsubscribe | undefined\n\n\tprivate lastConnectedHandlerId: Identifier | null = null\n\tprivate lastConnectedDragSource: any = null\n\tprivate lastConnectedDragSourceOptions: any = null\n\tprivate lastConnectedDragPreview: any = null\n\tprivate lastConnectedDragPreviewOptions: any = null\n\n\tprivate readonly backend: Backend\n\n\tpublic constructor(backend: Backend) {\n\t\tthis.backend = backend\n\t}\n\n\tpublic receiveHandlerId(newHandlerId: Identifier | null): void {\n\t\tif (this.handlerId === newHandlerId) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.handlerId = newHandlerId\n\t\tthis.reconnect()\n\t}\n\n\tpublic get connectTarget(): any {\n\t\treturn this.dragSource\n\t}\n\n\tpublic get dragSourceOptions(): DragSourceOptions | null {\n\t\treturn this.dragSourceOptionsInternal\n\t}\n\tpublic set dragSourceOptions(options: DragSourceOptions | null) {\n\t\tthis.dragSourceOptionsInternal = options\n\t}\n\n\tpublic get dragPreviewOptions(): DragPreviewOptions | null {\n\t\treturn this.dragPreviewOptionsInternal\n\t}\n\n\tpublic set dragPreviewOptions(options: DragPreviewOptions | null) {\n\t\tthis.dragPreviewOptionsInternal = options\n\t}\n\n\tpublic reconnect(): void {\n\t\tconst didChange = this.reconnectDragSource()\n\t\tthis.reconnectDragPreview(didChange)\n\t}\n\n\tprivate reconnectDragSource(): boolean {\n\t\tconst dragSource = this.dragSource\n\t\t// if nothing has changed then don't resubscribe\n\t\tconst didChange =\n\t\t\tthis.didHandlerIdChange() ||\n\t\t\tthis.didConnectedDragSourceChange() ||\n\t\t\tthis.didDragSourceOptionsChange()\n\n\t\tif (didChange) {\n\t\t\tthis.disconnectDragSource()\n\t\t}\n\n\t\tif (!this.handlerId) {\n\t\t\treturn didChange\n\t\t}\n\t\tif (!dragSource) {\n\t\t\tthis.lastConnectedDragSource = dragSource\n\t\t\treturn didChange\n\t\t}\n\n\t\tif (didChange) {\n\t\t\tthis.lastConnectedHandlerId = this.handlerId\n\t\t\tthis.lastConnectedDragSource = dragSource\n\t\t\tthis.lastConnectedDragSourceOptions = this.dragSourceOptions\n\t\t\tthis.dragSourceUnsubscribe = this.backend.connectDragSource(\n\t\t\t\tthis.handlerId,\n\t\t\t\tdragSource,\n\t\t\t\tthis.dragSourceOptions,\n\t\t\t)\n\t\t}\n\t\treturn didChange\n\t}\n\n\tprivate reconnectDragPreview(forceDidChange = false): void {\n\t\tconst dragPreview = this.dragPreview\n\t\t// if nothing has changed then don't resubscribe\n\t\tconst didChange =\n\t\t\tforceDidChange ||\n\t\t\tthis.didHandlerIdChange() ||\n\t\t\tthis.didConnectedDragPreviewChange() ||\n\t\t\tthis.didDragPreviewOptionsChange()\n\n\t\tif (didChange) {\n\t\t\tthis.disconnectDragPreview()\n\t\t}\n\n\t\tif (!this.handlerId) {\n\t\t\treturn\n\t\t}\n\t\tif (!dragPreview) {\n\t\t\tthis.lastConnectedDragPreview = dragPreview\n\t\t\treturn\n\t\t}\n\n\t\tif (didChange) {\n\t\t\tthis.lastConnectedHandlerId = this.handlerId\n\t\t\tthis.lastConnectedDragPreview = dragPreview\n\t\t\tthis.lastConnectedDragPreviewOptions = this.dragPreviewOptions\n\t\t\tthis.dragPreviewUnsubscribe = this.backend.connectDragPreview(\n\t\t\t\tthis.handlerId,\n\t\t\t\tdragPreview,\n\t\t\t\tthis.dragPreviewOptions,\n\t\t\t)\n\t\t}\n\t}\n\n\tprivate didHandlerIdChange(): boolean {\n\t\treturn this.lastConnectedHandlerId !== this.handlerId\n\t}\n\n\tprivate didConnectedDragSourceChange(): boolean {\n\t\treturn this.lastConnectedDragSource !== this.dragSource\n\t}\n\n\tprivate didConnectedDragPreviewChange(): boolean {\n\t\treturn this.lastConnectedDragPreview !== this.dragPreview\n\t}\n\n\tprivate didDragSourceOptionsChange(): boolean {\n\t\treturn !shallowEqual(\n\t\t\tthis.lastConnectedDragSourceOptions,\n\t\t\tthis.dragSourceOptions,\n\t\t)\n\t}\n\n\tprivate didDragPreviewOptionsChange(): boolean {\n\t\treturn !shallowEqual(\n\t\t\tthis.lastConnectedDragPreviewOptions,\n\t\t\tthis.dragPreviewOptions,\n\t\t)\n\t}\n\n\tpublic disconnectDragSource() {\n\t\tif (this.dragSourceUnsubscribe) {\n\t\t\tthis.dragSourceUnsubscribe()\n\t\t\tthis.dragSourceUnsubscribe = undefined\n\t\t}\n\t}\n\n\tpublic disconnectDragPreview() {\n\t\tif (this.dragPreviewUnsubscribe) {\n\t\t\tthis.dragPreviewUnsubscribe()\n\t\t\tthis.dragPreviewUnsubscribe = undefined\n\t\t\tthis.dragPreviewNode = null\n\t\t\tthis.dragPreviewRef = null\n\t\t}\n\t}\n\n\tprivate get dragSource() {\n\t\treturn (\n\t\t\tthis.dragSourceNode || (this.dragSourceRef && this.dragSourceRef.current)\n\t\t)\n\t}\n\n\tprivate get dragPreview() {\n\t\treturn (\n\t\t\tthis.dragPreviewNode ||\n\t\t\t(this.dragPreviewRef && this.dragPreviewRef.current)\n\t\t)\n\t}\n\n\tprivate clearDragSource() {\n\t\tthis.dragSourceNode = null\n\t\tthis.dragSourceRef = null\n\t}\n\n\tprivate clearDragPreview() {\n\t\tthis.dragPreviewNode = null\n\t\tthis.dragPreviewRef = null\n\t}\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type {\n\tDragDropManager,\n\tDragDropMonitor,\n\tIdentifier,\n\tListener,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport type { DragSourceMonitor } from '../types/index.js'\n\nlet isCallingCanDrag = false\nlet isCallingIsDragging = false\n\nexport class DragSourceMonitorImpl implements DragSourceMonitor {\n\tprivate internalMonitor: DragDropMonitor\n\tprivate sourceId: Identifier | null = null\n\n\tpublic constructor(manager: DragDropManager) {\n\t\tthis.internalMonitor = manager.getMonitor()\n\t}\n\n\tpublic receiveHandlerId(sourceId: Identifier | null): void {\n\t\tthis.sourceId = sourceId\n\t}\n\n\tpublic getHandlerId(): Identifier | null {\n\t\treturn this.sourceId\n\t}\n\n\tpublic canDrag(): boolean {\n\t\tinvariant(\n\t\t\t!isCallingCanDrag,\n\t\t\t'You may not call monitor.canDrag() inside your canDrag() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingCanDrag = true\n\t\t\treturn this.internalMonitor.canDragSource(this.sourceId as Identifier)\n\t\t} finally {\n\t\t\tisCallingCanDrag = false\n\t\t}\n\t}\n\n\tpublic isDragging(): boolean {\n\t\tif (!this.sourceId) {\n\t\t\treturn false\n\t\t}\n\t\tinvariant(\n\t\t\t!isCallingIsDragging,\n\t\t\t'You may not call monitor.isDragging() inside your isDragging() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingIsDragging = true\n\t\t\treturn this.internalMonitor.isDraggingSource(this.sourceId)\n\t\t} finally {\n\t\t\tisCallingIsDragging = false\n\t\t}\n\t}\n\n\tpublic subscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions?: { handlerIds?: Identifier[] },\n\t): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToStateChange(listener, options)\n\t}\n\n\tpublic isDraggingSource(sourceId: Identifier): boolean {\n\t\treturn this.internalMonitor.isDraggingSource(sourceId)\n\t}\n\n\tpublic isOverTarget(\n\t\ttargetId: Identifier,\n\t\toptions?: { shallow: boolean },\n\t): boolean {\n\t\treturn this.internalMonitor.isOverTarget(targetId, options)\n\t}\n\n\tpublic getTargetIds(): Identifier[] {\n\t\treturn this.internalMonitor.getTargetIds()\n\t}\n\n\tpublic isSourcePublic(): boolean | null {\n\t\treturn this.internalMonitor.isSourcePublic()\n\t}\n\n\tpublic getSourceId(): Identifier | null {\n\t\treturn this.internalMonitor.getSourceId()\n\t}\n\n\tpublic subscribeToOffsetChange(listener: Listener): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToOffsetChange(listener)\n\t}\n\n\tpublic canDragSource(sourceId: Identifier): boolean {\n\t\treturn this.internalMonitor.canDragSource(sourceId)\n\t}\n\n\tpublic canDropOnTarget(targetId: Identifier): boolean {\n\t\treturn this.internalMonitor.canDropOnTarget(targetId)\n\t}\n\n\tpublic getItemType(): Identifier | null {\n\t\treturn this.internalMonitor.getItemType()\n\t}\n\n\tpublic getItem(): any {\n\t\treturn this.internalMonitor.getItem()\n\t}\n\n\tpublic getDropResult(): any {\n\t\treturn this.internalMonitor.getDropResult()\n\t}\n\n\tpublic didDrop(): boolean {\n\t\treturn this.internalMonitor.didDrop()\n\t}\n\n\tpublic getInitialClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialClientOffset()\n\t}\n\n\tpublic getInitialSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialSourceClientOffset()\n\t}\n\n\tpublic getSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getSourceClientOffset()\n\t}\n\n\tpublic getClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getClientOffset()\n\t}\n\n\tpublic getDifferenceFromInitialOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getDifferenceFromInitialOffset()\n\t}\n}\n","import type { DragDropMonitor, DragSource, Identifier } from 'dnd-core'\n\nimport type { Connector } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport type { DragObjectFactory, DragSourceHookSpec } from '../types.js'\n\nexport class DragSourceImpl<O, R, P> implements DragSource {\n\tpublic constructor(\n\t\tpublic spec: DragSourceHookSpec<O, R, P>,\n\t\tprivate monitor: DragSourceMonitor<O, R>,\n\t\tprivate connector: Connector,\n\t) {}\n\n\tpublic beginDrag() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\n\t\tlet result: O | null = null\n\t\tif (typeof spec.item === 'object') {\n\t\t\tresult = spec.item as O\n\t\t} else if (typeof spec.item === 'function') {\n\t\t\tresult = (spec.item as DragObjectFactory<O>)(monitor)\n\t\t} else {\n\t\t\tresult = {} as O\n\t\t}\n\t\treturn result ?? null\n\t}\n\n\tpublic canDrag() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tif (typeof spec.canDrag === 'boolean') {\n\t\t\treturn spec.canDrag\n\t\t} else if (typeof spec.canDrag === 'function') {\n\t\t\treturn spec.canDrag(monitor)\n\t\t} else {\n\t\t\treturn true\n\t\t}\n\t}\n\n\tpublic isDragging(globalMonitor: DragDropMonitor, target: Identifier) {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tconst { isDragging } = spec\n\t\treturn isDragging\n\t\t\t? isDragging(monitor)\n\t\t\t: target === globalMonitor.getSourceId()\n\t}\n\n\tpublic endDrag() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tconst connector = this.connector\n\t\tconst { end } = spec\n\t\tif (end) {\n\t\t\tend(monitor.getItem(), monitor)\n\t\t}\n\t\tconnector.reconnect()\n\t}\n}\n","import type { SourceConnector } from '../../internals/index.js'\nimport { registerSource } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport type { DragSourceHookSpec } from '../types.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\nimport { useDragSource } from './useDragSource.js'\nimport { useDragType } from './useDragType.js'\n\nexport function useRegisteredDragSource<O, R, P>(\n\tspec: DragSourceHookSpec<O, R, P>,\n\tmonitor: DragSourceMonitor<O, R>,\n\tconnector: SourceConnector,\n): void {\n\tconst manager = useDragDropManager()\n\tconst handler = useDragSource(spec, monitor, connector)\n\tconst itemType = useDragType(spec)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction registerDragSource() {\n\t\t\tif (itemType != null) {\n\t\t\t\tconst [handlerId, unregister] = registerSource(\n\t\t\t\t\titemType,\n\t\t\t\t\thandler,\n\t\t\t\t\tmanager,\n\t\t\t\t)\n\t\t\t\tmonitor.receiveHandlerId(handlerId)\n\t\t\t\tconnector.receiveHandlerId(handlerId)\n\t\t\t\treturn unregister\n\t\t\t}\n\t\t\treturn\n\t\t},\n\t\t[manager, monitor, connector, handler, itemType],\n\t)\n}\n","import { useEffect, useMemo } from 'react'\n\nimport type { Connector } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport type { DragSourceHookSpec } from '../types.js'\nimport { DragSourceImpl } from './DragSourceImpl.js'\n\nexport function useDragSource<O, R, P>(\n\tspec: DragSourceHookSpec<O, R, P>,\n\tmonitor: DragSourceMonitor<O, R>,\n\tconnector: Connector,\n) {\n\tconst handler = useMemo(\n\t\t() => new DragSourceImpl(spec, monitor, connector),\n\t\t[monitor, connector],\n\t)\n\tuseEffect(() => {\n\t\thandler.spec = spec\n\t}, [spec])\n\treturn handler\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { Identifier } from 'dnd-core'\nimport { useMemo } from 'react'\n\nimport type { DragSourceHookSpec } from '../types.js'\n\nexport function useDragType(\n\tspec: DragSourceHookSpec<any, any, any>,\n): Identifier {\n\treturn useMemo(() => {\n\t\tconst result: Identifier = spec.type\n\t\tinvariant(result != null, 'spec.type must be defined')\n\t\treturn result\n\t}, [spec])\n}\n","import type {\n\tDragDropManager,\n\tDragSource,\n\tDropTarget,\n\tIdentifier,\n\tSourceType,\n\tTargetType,\n\tUnsubscribe,\n} from 'dnd-core'\n\nexport function registerTarget(\n\ttype: TargetType,\n\ttarget: DropTarget,\n\tmanager: DragDropManager,\n): [Identifier, Unsubscribe] {\n\tconst registry = manager.getRegistry()\n\tconst targetId = registry.addTarget(type, target)\n\n\treturn [targetId, () => registry.removeTarget(targetId)]\n}\n\nexport function registerSource(\n\ttype: SourceType,\n\tsource: DragSource,\n\tmanager: DragDropManager,\n): [Identifier, Unsubscribe] {\n\tconst registry = manager.getRegistry()\n\tconst sourceId = registry.addSource(type, source)\n\n\treturn [sourceId, () => registry.removeSource(sourceId)]\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tConnectDragPreview,\n\tConnectDragSource,\n} from '../../types/index.js'\nimport type { DragSourceHookSpec, FactoryOrInstance } from '../types.js'\nimport { useCollectedProps } from '../useCollectedProps.js'\nimport { useOptionalFactory } from '../useOptionalFactory.js'\nimport { useConnectDragPreview, useConnectDragSource } from './connectors.js'\nimport { useDragSourceConnector } from './useDragSourceConnector.js'\nimport { useDragSourceMonitor } from './useDragSourceMonitor.js'\nimport { useRegisteredDragSource } from './useRegisteredDragSource.js'\n\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\nexport function useDrag<\n\tDragObject = unknown,\n\tDropResult = unknown,\n\tCollectedProps = unknown,\n>(\n\tspecArg: FactoryOrInstance<\n\t\tDragSourceHookSpec<DragObject, DropResult, CollectedProps>\n\t>,\n\tdeps?: unknown[],\n): [CollectedProps, ConnectDragSource, ConnectDragPreview] {\n\tconst spec = useOptionalFactory(specArg, deps)\n\tinvariant(\n\t\t!(spec as any).begin,\n\t\t`useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)`,\n\t)\n\n\tconst monitor = useDragSourceMonitor<DragObject, DropResult>()\n\tconst connector = useDragSourceConnector(spec.options, spec.previewOptions)\n\tuseRegisteredDragSource(spec, monitor, connector)\n\n\treturn [\n\t\tuseCollectedProps(spec.collect, monitor, connector),\n\t\tuseConnectDragSource(connector),\n\t\tuseConnectDragPreview(connector),\n\t]\n}\n","import { useMemo } from 'react'\n\nimport { DragSourceMonitorImpl } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\n\nexport function useDragSourceMonitor<O, R>(): DragSourceMonitor<O, R> {\n\tconst manager = useDragDropManager()\n\treturn useMemo<DragSourceMonitor<O, R>>(\n\t\t() => new DragSourceMonitorImpl(manager),\n\t\t[manager],\n\t)\n}\n","import { useMemo } from 'react'\n\nimport { SourceConnector } from '../../internals/index.js'\nimport type {\n\tDragPreviewOptions,\n\tDragSourceOptions,\n} from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\n\nexport function useDragSourceConnector(\n\tdragSourceOptions: DragSourceOptions | undefined,\n\tdragPreviewOptions: DragPreviewOptions | undefined,\n): SourceConnector {\n\tconst manager = useDragDropManager()\n\tconst connector = useMemo(\n\t\t() => new SourceConnector(manager.getBackend()),\n\t\t[manager],\n\t)\n\tuseIsomorphicLayoutEffect(() => {\n\t\tconnector.dragSourceOptions = dragSourceOptions || null\n\t\tconnector.reconnect()\n\t\treturn () => connector.disconnectDragSource()\n\t}, [connector, dragSourceOptions])\n\tuseIsomorphicLayoutEffect(() => {\n\t\tconnector.dragPreviewOptions = dragPreviewOptions || null\n\t\tconnector.reconnect()\n\t\treturn () => connector.disconnectDragPreview()\n\t}, [connector, dragPreviewOptions])\n\treturn connector\n}\n","import { useMemo } from 'react'\n\nimport type { TargetConnector } from '../../internals/index.js'\n\nexport function useConnectDropTarget(connector: TargetConnector) {\n\treturn useMemo(() => connector.hooks.dropTarget(), [connector])\n}\n","import { shallowEqual } from '@react-dnd/shallowequal'\nimport type { Backend, Identifier, Unsubscribe } from 'dnd-core'\nimport type { RefObject } from 'react'\n\nimport type { DropTargetOptions } from '../types/index.js'\nimport { isRef } from './isRef.js'\nimport type { Connector } from './SourceConnector.js'\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js'\n\nexport class TargetConnector implements Connector {\n\tpublic hooks = wrapConnectorHooks({\n\t\tdropTarget: (node: any, options: DropTargetOptions) => {\n\t\t\tthis.clearDropTarget()\n\t\t\tthis.dropTargetOptions = options\n\t\t\tif (isRef(node)) {\n\t\t\t\tthis.dropTargetRef = node\n\t\t\t} else {\n\t\t\t\tthis.dropTargetNode = node\n\t\t\t}\n\t\t\tthis.reconnect()\n\t\t},\n\t})\n\n\tprivate handlerId: Identifier | null = null\n\t// The drop target may either be attached via ref or connect function\n\tprivate dropTargetRef: RefObject<any> | null = null\n\tprivate dropTargetNode: any\n\tprivate dropTargetOptionsInternal: DropTargetOptions | null = null\n\tprivate unsubscribeDropTarget: Unsubscribe | undefined\n\n\tprivate lastConnectedHandlerId: Identifier | null = null\n\tprivate lastConnectedDropTarget: any = null\n\tprivate lastConnectedDropTargetOptions: DropTargetOptions | null = null\n\tprivate readonly backend: Backend\n\n\tpublic constructor(backend: Backend) {\n\t\tthis.backend = backend\n\t}\n\n\tpublic get connectTarget(): any {\n\t\treturn this.dropTarget\n\t}\n\n\tpublic reconnect(): void {\n\t\t// if nothing has changed then don't resubscribe\n\t\tconst didChange =\n\t\t\tthis.didHandlerIdChange() ||\n\t\t\tthis.didDropTargetChange() ||\n\t\t\tthis.didOptionsChange()\n\n\t\tif (didChange) {\n\t\t\tthis.disconnectDropTarget()\n\t\t}\n\n\t\tconst dropTarget = this.dropTarget\n\t\tif (!this.handlerId) {\n\t\t\treturn\n\t\t}\n\t\tif (!dropTarget) {\n\t\t\tthis.lastConnectedDropTarget = dropTarget\n\t\t\treturn\n\t\t}\n\n\t\tif (didChange) {\n\t\t\tthis.lastConnectedHandlerId = this.handlerId\n\t\t\tthis.lastConnectedDropTarget = dropTarget\n\t\t\tthis.lastConnectedDropTargetOptions = this.dropTargetOptions\n\n\t\t\tthis.unsubscribeDropTarget = this.backend.connectDropTarget(\n\t\t\t\tthis.handlerId,\n\t\t\t\tdropTarget,\n\t\t\t\tthis.dropTargetOptions,\n\t\t\t)\n\t\t}\n\t}\n\n\tpublic receiveHandlerId(newHandlerId: Identifier | null): void {\n\t\tif (newHandlerId === this.handlerId) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.handlerId = newHandlerId\n\t\tthis.reconnect()\n\t}\n\n\tpublic get dropTargetOptions(): DropTargetOptions {\n\t\treturn this.dropTargetOptionsInternal\n\t}\n\tpublic set dropTargetOptions(options: DropTargetOptions) {\n\t\tthis.dropTargetOptionsInternal = options\n\t}\n\n\tprivate didHandlerIdChange(): boolean {\n\t\treturn this.lastConnectedHandlerId !== this.handlerId\n\t}\n\n\tprivate didDropTargetChange(): boolean {\n\t\treturn this.lastConnectedDropTarget !== this.dropTarget\n\t}\n\n\tprivate didOptionsChange(): boolean {\n\t\treturn !shallowEqual(\n\t\t\tthis.lastConnectedDropTargetOptions,\n\t\t\tthis.dropTargetOptions,\n\t\t)\n\t}\n\n\tpublic disconnectDropTarget() {\n\t\tif (this.unsubscribeDropTarget) {\n\t\t\tthis.unsubscribeDropTarget()\n\t\t\tthis.unsubscribeDropTarget = undefined\n\t\t}\n\t}\n\n\tprivate get dropTarget() {\n\t\treturn (\n\t\t\tthis.dropTargetNode || (this.dropTargetRef && this.dropTargetRef.current)\n\t\t)\n\t}\n\n\tprivate clearDropTarget() {\n\t\tthis.dropTargetRef = null\n\t\tthis.dropTargetNode = null\n\t}\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type {\n\tDragDropManager,\n\tDragDropMonitor,\n\tIdentifier,\n\tListener,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport type { DropTargetMonitor } from '../types/index.js'\n\nlet isCallingCanDrop = false\n\nexport class DropTargetMonitorImpl implements DropTargetMonitor {\n\tprivate internalMonitor: DragDropMonitor\n\tprivate targetId: Identifier | null = null\n\n\tpublic constructor(manager: DragDropManager) {\n\t\tthis.internalMonitor = manager.getMonitor()\n\t}\n\n\tpublic receiveHandlerId(targetId: Identifier | null): void {\n\t\tthis.targetId = targetId\n\t}\n\n\tpublic getHandlerId(): Identifier | null {\n\t\treturn this.targetId\n\t}\n\n\tpublic subscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions?: { handlerIds?: Identifier[] },\n\t): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToStateChange(listener, options)\n\t}\n\n\tpublic canDrop(): boolean {\n\t\t// Cut out early if the target id has not been set. This should prevent errors\n\t\t// where the user has an older version of dnd-core like in\n\t\t// https://github.com/react-dnd/react-dnd/issues/1310\n\t\tif (!this.targetId) {\n\t\t\treturn false\n\t\t}\n\t\tinvariant(\n\t\t\t!isCallingCanDrop,\n\t\t\t'You may not call monitor.canDrop() inside your canDrop() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingCanDrop = true\n\t\t\treturn this.internalMonitor.canDropOnTarget(this.targetId)\n\t\t} finally {\n\t\t\tisCallingCanDrop = false\n\t\t}\n\t}\n\n\tpublic isOver(options?: { shallow?: boolean }): boolean {\n\t\tif (!this.targetId) {\n\t\t\treturn false\n\t\t}\n\t\treturn this.internalMonitor.isOverTarget(this.targetId, options)\n\t}\n\n\tpublic getItemType(): Identifier | null {\n\t\treturn this.internalMonitor.getItemType()\n\t}\n\n\tpublic getItem(): any {\n\t\treturn this.internalMonitor.getItem()\n\t}\n\n\tpublic getDropResult(): any {\n\t\treturn this.internalMonitor.getDropResult()\n\t}\n\n\tpublic didDrop(): boolean {\n\t\treturn this.internalMonitor.didDrop()\n\t}\n\n\tpublic getInitialClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialClientOffset()\n\t}\n\n\tpublic getInitialSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialSourceClientOffset()\n\t}\n\n\tpublic getSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getSourceClientOffset()\n\t}\n\n\tpublic getClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getClientOffset()\n\t}\n\n\tpublic getDifferenceFromInitialOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getDifferenceFromInitialOffset()\n\t}\n}\n","import type { DropTarget } from 'dnd-core'\n\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport type { DropTargetHookSpec } from '../types.js'\n\nexport class DropTargetImpl<O, R, P> implements DropTarget {\n\tpublic constructor(\n\t\tpublic spec: DropTargetHookSpec<O, R, P>,\n\t\tprivate monitor: DropTargetMonitor<O, R>,\n\t) {}\n\n\tpublic canDrop() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\treturn spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true\n\t}\n\n\tpublic hover() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tif (spec.hover) {\n\t\t\tspec.hover(monitor.getItem(), monitor)\n\t\t}\n\t}\n\n\tpublic drop() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tif (spec.drop) {\n\t\t\treturn spec.drop(monitor.getItem(), monitor)\n\t\t}\n\t\treturn\n\t}\n}\n","import type { TargetConnector } from '../../internals/index.js'\nimport { registerTarget } from '../../internals/index.js'\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport type { DropTargetHookSpec } from '../types.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\nimport { useAccept } from './useAccept.js'\nimport { useDropTarget } from './useDropTarget.js'\n\nexport function useRegisteredDropTarget<O, R, P>(\n\tspec: DropTargetHookSpec<O, R, P>,\n\tmonitor: DropTargetMonitor<O, R>,\n\tconnector: TargetConnector,\n): void {\n\tconst manager = useDragDropManager()\n\tconst dropTarget = useDropTarget(spec, monitor)\n\tconst accept = useAccept(spec)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction registerDropTarget() {\n\t\t\tconst [handlerId, unregister] = registerTarget(\n\t\t\t\taccept,\n\t\t\t\tdropTarget,\n\t\t\t\tmanager,\n\t\t\t)\n\t\t\tmonitor.receiveHandlerId(handlerId)\n\t\t\tconnector.receiveHandlerId(handlerId)\n\t\t\treturn unregister\n\t\t},\n\t\t[\n\t\t\tmanager,\n\t\t\tmonitor,\n\t\t\tdropTarget,\n\t\t\tconnector,\n\t\t\taccept.map((a) => a.toString()).join('|'),\n\t\t],\n\t)\n}\n","import { useEffect, useMemo } from 'react'\n\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport type { DropTargetHookSpec } from '../types.js'\nimport { DropTargetImpl } from './DropTargetImpl.js'\n\nexport function useDropTarget<O, R, P>(\n\tspec: DropTargetHookSpec<O, R, P>,\n\tmonitor: DropTargetMonitor<O, R>,\n) {\n\tconst dropTarget = useMemo(() => new DropTargetImpl(spec, monitor), [monitor])\n\tuseEffect(() => {\n\t\tdropTarget.spec = spec\n\t}, [spec])\n\treturn dropTarget\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { Identifier } from 'dnd-core'\nimport { useMemo } from 'react'\n\nimport type { DropTargetHookSpec } from '../types.js'\n\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */\nexport function useAccept<O, R, P>(\n\tspec: DropTargetHookSpec<O, R, P>,\n): Identifier[] {\n\tconst { accept } = spec\n\treturn useMemo(() => {\n\t\tinvariant(spec.accept != null, 'accept must be defined')\n\t\treturn Array.isArray(accept) ? accept : [accept]\n\t}, [accept])\n}\n","import type { ConnectDropTarget } from '../../types/index.js'\nimport type { DropTargetHookSpec, FactoryOrInstance } from '../types.js'\nimport { useCollectedProps } from '../useCollectedProps.js'\nimport { useOptionalFactory } from '../useOptionalFactory.js'\nimport { useConnectDropTarget } from './connectors.js'\nimport { useDropTargetConnector } from './useDropTargetConnector.js'\nimport { useDropTargetMonitor } from './useDropTargetMonitor.js'\nimport { useRegisteredDropTarget } from './useRegisteredDropTarget.js'\n\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\nexport function useDrop<\n\tDragObject = unknown,\n\tDropResult = unknown,\n\tCollectedProps = unknown,\n>(\n\tspecArg: FactoryOrInstance<\n\t\tDropTargetHookSpec<DragObject, DropResult, CollectedProps>\n\t>,\n\tdeps?: unknown[],\n): [CollectedProps, ConnectDropTarget] {\n\tconst spec = useOptionalFactory(specArg, deps)\n\tconst monitor = useDropTargetMonitor<DragObject, DropResult>()\n\tconst connector = useDropTargetConnector(spec.options)\n\tuseRegisteredDropTarget(spec, monitor, connector)\n\n\treturn [\n\t\tuseCollectedProps(spec.collect, monitor, connector),\n\t\tuseConnectDropTarget(connector),\n\t]\n}\n","import { useMemo } from 'react'\n\nimport { DropTargetMonitorImpl } from '../../internals/index.js'\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\n\nexport function useDropTargetMonitor<O, R>(): DropTargetMonitor<O, R> {\n\tconst manager = useDragDropManager()\n\treturn useMemo(() => new DropTargetMonitorImpl(manager), [manager])\n}\n","import { useMemo } from 'react'\n\nimport { TargetConnector } from '../../internals/index.js'\nimport type { DropTargetOptions } from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\n\nexport function useDropTargetConnector(\n\toptions: DropTargetOptions,\n): TargetConnector {\n\tconst manager = useDragDropManager()\n\tconst connector = useMemo(\n\t\t() => new TargetConnector(manager.getBackend()),\n\t\t[manager],\n\t)\n\tuseIsomorphicLayoutEffect(() => {\n\t\tconnector.dropTargetOptions = options || null\n\t\tconnector.reconnect()\n\t\treturn () => connector.disconnectDropTarget()\n\t}, [options])\n\treturn connector\n}\n","export const createTransition = (event, check) => {\n  return {\n    event,\n    check\n  };\n};","import { createTransition } from './createTransition';\nexport const TouchTransition = createTransition('touchstart', rawEvent => {\n  const event = rawEvent;\n  return event.touches !== null && event.touches !== undefined;\n});\nexport const HTML5DragTransition = createTransition('dragstart', event => {\n  return event.type.indexOf('drag') !== -1 || event.type.indexOf('drop') !== -1;\n});\nexport const MouseTransition = createTransition('mousedown', event => {\n  return event.type.indexOf('touch') === -1 && event.type.indexOf('mouse') !== -1;\n});\nexport const PointerTransition = createTransition('pointerdown', rawEvent => {\n  const event = rawEvent;\n  return event.pointerType == 'mouse';\n});","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\n\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\n\nfunction _classPrivateFieldGet(receiver, privateMap) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"get\"); return _classApplyDescriptorGet(receiver, descriptor); }\n\nfunction _classApplyDescriptorGet(receiver, descriptor) { if (descriptor.get) { return descriptor.get.call(receiver); } return descriptor.value; }\n\nfunction _classPrivateFieldSet(receiver, privateMap, value) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\"); _classApplyDescriptorSet(receiver, descriptor, value); return value; }\n\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) { if (!privateMap.has(receiver)) { throw new TypeError(\"attempted to \" + action + \" private field on non-instance\"); } return privateMap.get(receiver); }\n\nfunction _classApplyDescriptorSet(receiver, descriptor, value) { if (descriptor.set) { descriptor.set.call(receiver, value); } else { if (!descriptor.writable) { throw new TypeError(\"attempted to set read only private field\"); } descriptor.value = value; } }\n\nvar _previews = /*#__PURE__*/new WeakMap();\n\nexport class PreviewListImpl {\n  /*private*/\n  constructor() {\n    _classPrivateFieldInitSpec(this, _previews, {\n      writable: true,\n      value: void 0\n    });\n\n    _defineProperty(this, \"register\", preview => {\n      _classPrivateFieldGet(this, _previews).push(preview);\n    });\n\n    _defineProperty(this, \"unregister\", preview => {\n      let index;\n\n      while ((index = _classPrivateFieldGet(this, _previews).indexOf(preview)) !== -1) {\n        _classPrivateFieldGet(this, _previews).splice(index, 1);\n      }\n    });\n\n    _defineProperty(this, \"backendChanged\", backend => {\n      for (const preview of _classPrivateFieldGet(this, _previews)) {\n        preview.backendChanged(backend);\n      }\n    });\n\n    _classPrivateFieldSet(this, _previews, []);\n  }\n\n}","function _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\n\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classPrivateFieldGet(receiver, privateMap) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"get\"); return _classApplyDescriptorGet(receiver, descriptor); }\n\nfunction _classApplyDescriptorGet(receiver, descriptor) { if (descriptor.get) { return descriptor.get.call(receiver); } return descriptor.value; }\n\nfunction _classPrivateFieldSet(receiver, privateMap, value) { var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\"); _classApplyDescriptorSet(receiver, descriptor, value); return value; }\n\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) { if (!privateMap.has(receiver)) { throw new TypeError(\"attempted to \" + action + \" private field on non-instance\"); } return privateMap.get(receiver); }\n\nfunction _classApplyDescriptorSet(receiver, descriptor, value) { if (descriptor.set) { descriptor.set.call(receiver, value); } else { if (!descriptor.writable) { throw new TypeError(\"attempted to set read only private field\"); } descriptor.value = value; } }\n\nimport { PreviewListImpl } from './PreviewListImpl';\n\nvar _current = /*#__PURE__*/new WeakMap();\n\nvar _previews = /*#__PURE__*/new WeakMap();\n\nvar _backends = /*#__PURE__*/new WeakMap();\n\nvar _backendsList = /*#__PURE__*/new WeakMap();\n\nvar _nodes = /*#__PURE__*/new WeakMap();\n\nvar _createBackend = /*#__PURE__*/new WeakMap();\n\nvar _addEventListeners = /*#__PURE__*/new WeakMap();\n\nvar _removeEventListeners = /*#__PURE__*/new WeakMap();\n\nvar _backendSwitcher = /*#__PURE__*/new WeakMap();\n\nvar _callBackend = /*#__PURE__*/new WeakMap();\n\nvar _connectBackend = /*#__PURE__*/new WeakMap();\n\nexport class MultiBackendImpl {\n  /*private*/\n\n  /*private*/\n\n  /*private*/\n\n  /*private*/\n\n  /*private*/\n  constructor(_manager, _context, _options) {\n    _classPrivateFieldInitSpec(this, _current, {\n      writable: true,\n      value: void 0\n    });\n\n    _classPrivateFieldInitSpec(this, _previews, {\n      writable: true,\n      value: void 0\n    });\n\n    _classPrivateFieldInitSpec(this, _backends, {\n      writable: true,\n      value: void 0\n    });\n\n    _classPrivateFieldInitSpec(this, _backendsList, {\n      writable: true,\n      value: void 0\n    });\n\n    _classPrivateFieldInitSpec(this, _nodes, {\n      writable: true,\n      value: void 0\n    });\n\n    _classPrivateFieldInitSpec(this, _createBackend, {\n      writable: true,\n      value: (manager, context, backend) => {\n        var _backend$preview, _backend$skipDispatch;\n\n        if (!backend.backend) {\n          throw new Error(\"You must specify a 'backend' property in your Backend entry: \".concat(JSON.stringify(backend)));\n        }\n\n        const instance = backend.backend(manager, context, backend.options);\n        let id = backend.id; // Try to infer an `id` if one doesn't exist\n\n        const inferName = !backend.id && instance && instance.constructor;\n\n        if (inferName) {\n          id = instance.constructor.name;\n        }\n\n        if (!id) {\n          throw new Error(\"You must specify an 'id' property in your Backend entry: \".concat(JSON.stringify(backend), \"\\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx\"));\n        } else if (inferName) {\n          console.warn( // eslint-disable-line no-console\n          \"Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.\\n        This might be unsupported in the future, please specify 'id' explicitely for every backend.\");\n        }\n\n        if (_classPrivateFieldGet(this, _backends)[id]) {\n          throw new Error(\"You must specify a unique 'id' property in your Backend entry:\\n        \".concat(JSON.stringify(backend), \" (conflicts with: \").concat(JSON.stringify(_classPrivateFieldGet(this, _backends)[id]), \")\"));\n        }\n\n        return {\n          id,\n          instance,\n          preview: (_backend$preview = backend.preview) !== null && _backend$preview !== void 0 ? _backend$preview : false,\n          transition: backend.transition,\n          skipDispatchOnTransition: (_backend$skipDispatch = backend.skipDispatchOnTransition) !== null && _backend$skipDispatch !== void 0 ? _backend$skipDispatch : false\n        };\n      }\n    });\n\n    _defineProperty(this, \"setup\", () => {\n      if (typeof window === 'undefined') {\n        return;\n      }\n\n      if (MultiBackendImpl.isSetUp) {\n        throw new Error('Cannot have two MultiBackends at the same time.');\n      }\n\n      MultiBackendImpl.isSetUp = true;\n\n      _classPrivateFieldGet(this, _addEventListeners).call(this, window);\n\n      _classPrivateFieldGet(this, _backends)[_classPrivateFieldGet(this, _current)].instance.setup();\n    });\n\n    _defineProperty(this, \"teardown\", () => {\n      if (typeof window === 'undefined') {\n        return;\n      }\n\n      MultiBackendImpl.isSetUp = false;\n\n      _classPrivateFieldGet(this, _removeEventListeners).call(this, window);\n\n      _classPrivateFieldGet(this, _backends)[_classPrivateFieldGet(this, _current)].instance.teardown();\n    });\n\n    _defineProperty(this, \"connectDragSource\", (sourceId, node, options) => {\n      return _classPrivateFieldGet(this, _connectBackend).call(this, 'connectDragSource', sourceId, node, options);\n    });\n\n    _defineProperty(this, \"connectDragPreview\", (sourceId, node, options) => {\n      return _classPrivateFieldGet(this, _connectBackend).call(this, 'connectDragPreview', sourceId, node, options);\n    });\n\n    _defineProperty(this, \"connectDropTarget\", (sourceId, node, options) => {\n      return _classPrivateFieldGet(this, _connectBackend).call(this, 'connectDropTarget', sourceId, node, options);\n    });\n\n    _defineProperty(this, \"profile\", () => {\n      return _classPrivateFieldGet(this, _backends)[_classPrivateFieldGet(this, _current)].instance.profile();\n    });\n\n    _defineProperty(this, \"previewEnabled\", () => {\n      return _classPrivateFieldGet(this, _backends)[_classPrivateFieldGet(this, _current)].preview;\n    });\n\n    _defineProperty(this, \"previewsList\", () => {\n      return _classPrivateFieldGet(this, _previews);\n    });\n\n    _defineProperty(this, \"backendsList\", () => {\n      return _classPrivateFieldGet(this, _backendsList);\n    });\n\n    _classPrivateFieldInitSpec(this, _addEventListeners, {\n      writable: true,\n      value: target => {\n        _classPrivateFieldGet(this, _backendsList).forEach(backend => {\n          if (backend.transition) {\n            target.addEventListener(backend.transition.event, _classPrivateFieldGet(this, _backendSwitcher));\n          }\n        });\n      }\n    });\n\n    _classPrivateFieldInitSpec(this, _removeEventListeners, {\n      writable: true,\n      value: target => {\n        _classPrivateFieldGet(this, _backendsList).forEach(backend => {\n          if (backend.transition) {\n            target.removeEventListener(backend.transition.event, _classPrivateFieldGet(this, _backendSwitcher));\n          }\n        });\n      }\n    });\n\n    _classPrivateFieldInitSpec(this, _backendSwitcher, {\n      writable: true,\n      value: event => {\n        const oldBackend = _classPrivateFieldGet(this, _current);\n\n        _classPrivateFieldGet(this, _backendsList).some(backend => {\n          if (backend.id !== _classPrivateFieldGet(this, _current) && backend.transition && backend.transition.check(event)) {\n            _classPrivateFieldSet(this, _current, backend.id);\n\n            return true;\n          }\n\n          return false;\n        });\n\n        if (_classPrivateFieldGet(this, _current) !== oldBackend) {\n          var _event$target;\n\n          _classPrivateFieldGet(this, _backends)[oldBackend].instance.teardown();\n\n          Object.keys(_classPrivateFieldGet(this, _nodes)).forEach(id => {\n            const node = _classPrivateFieldGet(this, _nodes)[id];\n\n            node.unsubscribe();\n            node.unsubscribe = _classPrivateFieldGet(this, _callBackend).call(this, node.func, ...node.args);\n          });\n\n          _classPrivateFieldGet(this, _previews).backendChanged(this);\n\n          const newBackend = _classPrivateFieldGet(this, _backends)[_classPrivateFieldGet(this, _current)];\n\n          newBackend.instance.setup();\n\n          if (newBackend.skipDispatchOnTransition) {\n            return;\n          }\n\n          let newEvent = null;\n\n          try {\n            newEvent = event.constructor(event.type, event);\n          } catch (_e) {\n            newEvent = document.createEvent('Event');\n            newEvent.initEvent(event.type, event.bubbles, event.cancelable);\n          }\n\n          (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.dispatchEvent(newEvent);\n        }\n      }\n    });\n\n    _classPrivateFieldInitSpec(this, _callBackend, {\n      writable: true,\n      value: (func, sourceId, node, options) => {\n        return _classPrivateFieldGet(this, _backends)[_classPrivateFieldGet(this, _current)].instance[func](sourceId, node, options);\n      }\n    });\n\n    _classPrivateFieldInitSpec(this, _connectBackend, {\n      writable: true,\n      value: (func, sourceId, node, options) => {\n        const nodeId = \"\".concat(func, \"_\").concat(sourceId);\n\n        const unsubscribe = _classPrivateFieldGet(this, _callBackend).call(this, func, sourceId, node, options);\n\n        _classPrivateFieldGet(this, _nodes)[nodeId] = {\n          func,\n          args: [sourceId, node, options],\n          unsubscribe\n        };\n        return () => {\n          _classPrivateFieldGet(this, _nodes)[nodeId].unsubscribe();\n\n          delete _classPrivateFieldGet(this, _nodes)[nodeId];\n        };\n      }\n    });\n\n    if (!_options || !_options.backends || _options.backends.length < 1) {\n      throw new Error(\"You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx\");\n    }\n\n    _classPrivateFieldSet(this, _previews, new PreviewListImpl());\n\n    _classPrivateFieldSet(this, _backends, {});\n\n    _classPrivateFieldSet(this, _backendsList, []);\n\n    _options.backends.forEach(backend => {\n      const backendRecord = _classPrivateFieldGet(this, _createBackend).call(this, _manager, _context, backend);\n\n      _classPrivateFieldGet(this, _backends)[backendRecord.id] = backendRecord;\n\n      _classPrivateFieldGet(this, _backendsList).push(backendRecord);\n    });\n\n    _classPrivateFieldSet(this, _current, _classPrivateFieldGet(this, _backendsList)[0].id);\n\n    _classPrivateFieldSet(this, _nodes, {});\n  }\n\n}\n\n_defineProperty(MultiBackendImpl, \"isSetUp\", false);","import { MultiBackendImpl } from './MultiBackendImpl';\nexport const MultiFactory = (manager, context, options) => {\n  return new MultiBackendImpl(manager, context, options);\n};","export interface EventName {\n\tstart?: 'mousedown' | 'touchstart'\n\tmove?: 'mousemove' | 'touchmove'\n\tend?: 'mouseup' | 'touchend'\n\tcontextmenu?: 'contextmenu'\n\tkeydown?: 'keydown'\n}\n\nexport interface TouchBackendOptions {\n\tdelay: number\n\tdelayTouchStart: number\n\tenableTouchEvents: boolean\n\tenableKeyboardEvents: boolean\n\tenableMouseEvents: boolean\n\tignoreContextMenu: boolean\n\tenableHoverOutsideTarget: boolean\n\tdelayMouseStart: number\n\ttouchSlop: number\n\tscrollAngleRanges?: AngleRange[] | undefined\n\trootElement: Node | undefined\n\n\tgetDropTargetElementsAtPoint?:\n\t\t| undefined\n\t\t| ((x: number, y: number, dropTargets: HTMLElement[]) => HTMLElement[])\n}\n\nexport interface AngleRange {\n\tstart: number\n\tend: number\n}\n\nexport enum ListenerType {\n\tmouse = 'mouse',\n\ttouch = 'touch',\n\tkeyboard = 'keyboard',\n}\n\nexport interface TouchBackendContext {\n\twindow?: Window\n\tdocument?: Document\n}\n","import type {\n\tAngleRange,\n\tTouchBackendContext,\n\tTouchBackendOptions,\n} from './interfaces.js'\n\nexport class OptionsReader implements TouchBackendOptions {\n\tpublic constructor(\n\t\tprivate args: Partial<TouchBackendOptions>,\n\t\tprivate context: TouchBackendContext,\n\t) {}\n\n\tpublic get delay(): number {\n\t\treturn this.args.delay ?? 0\n\t}\n\n\tpublic get scrollAngleRanges(): AngleRange[] | undefined {\n\t\treturn this.args.scrollAngleRanges\n\t}\n\n\tpublic get getDropTargetElementsAtPoint():\n\t\t| ((x: number, y: number, elements: HTMLElement[]) => HTMLElement[])\n\t\t| undefined {\n\t\treturn this.args.getDropTargetElementsAtPoint\n\t}\n\n\tpublic get ignoreContextMenu(): boolean {\n\t\treturn this.args.ignoreContextMenu ?? false\n\t}\n\n\tpublic get enableHoverOutsideTarget(): boolean {\n\t\treturn this.args.enableHoverOutsideTarget ?? false\n\t}\n\n\tpublic get enableKeyboardEvents(): boolean {\n\t\treturn this.args.enableKeyboardEvents ?? false\n\t}\n\n\tpublic get enableMouseEvents(): boolean {\n\t\treturn this.args.enableMouseEvents ?? false\n\t}\n\n\tpublic get enableTouchEvents(): boolean {\n\t\treturn this.args.enableTouchEvents ?? true\n\t}\n\n\tpublic get touchSlop(): number {\n\t\treturn this.args.touchSlop || 0\n\t}\n\n\tpublic get delayTouchStart(): number {\n\t\treturn this.args?.delayTouchStart ?? this.args?.delay ?? 0\n\t}\n\n\tpublic get delayMouseStart(): number {\n\t\treturn this.args?.delayMouseStart ?? this.args?.delay ?? 0\n\t}\n\n\tpublic get window(): Window | undefined {\n\t\tif (this.context && this.context.window) {\n\t\t\treturn this.context.window\n\t\t} else if (typeof window !== 'undefined') {\n\t\t\treturn window\n\t\t}\n\t\treturn undefined\n\t}\n\n\tpublic get document(): Document | undefined {\n\t\tif (this.context?.document) {\n\t\t\treturn this.context.document\n\t\t}\n\n\t\tif (this.window) {\n\t\t\treturn this.window.document\n\t\t}\n\n\t\treturn undefined\n\t}\n\n\tpublic get rootElement(): Node | undefined {\n\t\treturn this.args?.rootElement || (this.document as any as Node)\n\t}\n}\n","// Used for MouseEvent.buttons (note the s on the end).\nconst MouseButtons = {\n\tLeft: 1,\n\tRight: 2,\n\tCenter: 4,\n}\n\n// Used for e.button (note the lack of an s on the end).\nconst MouseButton = {\n\tLeft: 0,\n\tCenter: 1,\n\tRight: 2,\n}\n\n/**\n * Only touch events and mouse events where the left button is pressed should initiate a drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\nexport function eventShouldStartDrag(e: MouseEvent): boolean {\n\t// For touch events, button will be undefined. If e.button is defined,\n\t// then it should be MouseButton.Left.\n\treturn e.button === undefined || e.button === MouseButton.Left\n}\n\n/**\n * Only touch events and mouse events where the left mouse button is no longer held should end a drag.\n * It's possible the user mouse downs with the left mouse button, then mouse down and ups with the right mouse button.\n * We don't want releasing the right mouse button to end the drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\nexport function eventShouldEndDrag(e: MouseEvent): boolean {\n\t// Touch events will have buttons be undefined, while mouse events will have e.buttons's left button\n\t// bit field unset if the left mouse button has been released\n\treturn e.buttons === undefined || (e.buttons & MouseButtons.Left) === 0\n}\n\nexport function isTouchEvent(\n\te: Touch | TouchEvent | MouseEvent,\n): e is TouchEvent {\n\treturn !!(e as TouchEvent).targetTouches\n}\n","import type { XYCoord } from 'dnd-core'\n\nimport { isTouchEvent } from './predicates.js'\n\nconst ELEMENT_NODE = 1\n\nexport function getNodeClientOffset(node: Element): XYCoord | undefined {\n\tconst el = node.nodeType === ELEMENT_NODE ? node : node.parentElement\n\tif (!el) {\n\t\treturn undefined\n\t}\n\tconst { top, left } = el.getBoundingClientRect()\n\treturn { x: left, y: top }\n}\n\nexport function getEventClientTouchOffset(\n\te: TouchEvent,\n\tlastTargetTouchFallback?: Touch,\n): XYCoord | undefined {\n\tif (e.targetTouches.length === 1) {\n\t\treturn getEventClientOffset(e.targetTouches[0] as Touch)\n\t} else if (lastTargetTouchFallback && e.touches.length === 1) {\n\t\tif ((e.touches[0] as Touch).target === lastTargetTouchFallback.target) {\n\t\t\treturn getEventClientOffset(e.touches[0] as Touch)\n\t\t}\n\t}\n\treturn\n}\n\nexport function getEventClientOffset(\n\te: TouchEvent | Touch | MouseEvent,\n\tlastTargetTouchFallback?: Touch,\n): XYCoord | undefined {\n\tif (isTouchEvent(e)) {\n\t\treturn getEventClientTouchOffset(e, lastTargetTouchFallback)\n\t} else {\n\t\treturn {\n\t\t\tx: e.clientX,\n\t\t\ty: e.clientY,\n\t\t}\n\t}\n}\n","export const supportsPassive = ((): boolean => {\n\t// simular to jQuery's test\n\tlet supported = false\n\ttry {\n\t\taddEventListener(\n\t\t\t'test',\n\t\t\t() => {\n\t\t\t\t// do nothing\n\t\t\t},\n\t\t\tObject.defineProperty({}, 'passive', {\n\t\t\t\tget() {\n\t\t\t\t\tsupported = true\n\t\t\t\t\treturn true\n\t\t\t\t},\n\t\t\t}),\n\t\t)\n\t} catch (e) {\n\t\t// do nothing\n\t}\n\treturn supported\n})()\n","import { invariant } from '@react-dnd/invariant'\nimport type {\n\tBackend,\n\tDragDropActions,\n\tDragDropManager,\n\tDragDropMonitor,\n\tIdentifier,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport type {\n\tEventName,\n\tTouchBackendContext,\n\tTouchBackendOptions,\n} from './interfaces.js'\nimport { ListenerType } from './interfaces.js'\nimport { OptionsReader } from './OptionsReader.js'\nimport { distance, inAngleRanges } from './utils/math.js'\nimport { getEventClientOffset, getNodeClientOffset } from './utils/offsets.js'\nimport {\n\teventShouldEndDrag,\n\teventShouldStartDrag,\n\tisTouchEvent,\n} from './utils/predicates.js'\nimport { supportsPassive } from './utils/supportsPassive.js'\n\nconst eventNames: Record<ListenerType, EventName> = {\n\t[ListenerType.mouse]: {\n\t\tstart: 'mousedown',\n\t\tmove: 'mousemove',\n\t\tend: 'mouseup',\n\t\tcontextmenu: 'contextmenu',\n\t},\n\t[ListenerType.touch]: {\n\t\tstart: 'touchstart',\n\t\tmove: 'touchmove',\n\t\tend: 'touchend',\n\t},\n\t[ListenerType.keyboard]: {\n\t\tkeydown: 'keydown',\n\t},\n}\n\nexport class TouchBackendImpl implements Backend {\n\tprivate options: OptionsReader\n\n\t// React-DnD Dependencies\n\tprivate actions: DragDropActions\n\tprivate monitor: DragDropMonitor\n\n\t// Internal State\n\tprivate static isSetUp: boolean\n\tpublic sourceNodes: Map<Identifier, HTMLElement>\n\tpublic sourcePreviewNodes: Map<string, HTMLElement>\n\tpublic sourcePreviewNodeOptions: Map<string, any>\n\tpublic targetNodes: Map<string, HTMLElement>\n\tprivate _mouseClientOffset: Partial<XYCoord>\n\tprivate _isScrolling: boolean\n\tprivate listenerTypes: ListenerType[]\n\tprivate moveStartSourceIds: string[] | undefined\n\tprivate waitingForDelay: boolean | undefined\n\tprivate timeout: ReturnType<typeof setTimeout> | undefined\n\tprivate dragOverTargetIds: string[] | undefined\n\tprivate draggedSourceNode: HTMLElement | undefined\n\tprivate draggedSourceNodeRemovalObserver: MutationObserver | undefined\n\n\t// Patch for iOS 13, discussion over #1585\n\tprivate lastTargetTouchFallback: Touch | undefined\n\n\tpublic constructor(\n\t\tmanager: DragDropManager,\n\t\tcontext: TouchBackendContext,\n\t\toptions: Partial<TouchBackendOptions>,\n\t) {\n\t\tthis.options = new OptionsReader(options, context)\n\t\tthis.actions = manager.getActions()\n\t\tthis.monitor = manager.getMonitor()\n\n\t\tthis.sourceNodes = new Map()\n\t\tthis.sourcePreviewNodes = new Map()\n\t\tthis.sourcePreviewNodeOptions = new Map()\n\t\tthis.targetNodes = new Map()\n\t\tthis.listenerTypes = []\n\t\tthis._mouseClientOffset = {}\n\t\tthis._isScrolling = false\n\n\t\tif (this.options.enableMouseEvents) {\n\t\t\tthis.listenerTypes.push(ListenerType.mouse)\n\t\t}\n\n\t\tif (this.options.enableTouchEvents) {\n\t\t\tthis.listenerTypes.push(ListenerType.touch)\n\t\t}\n\n\t\tif (this.options.enableKeyboardEvents) {\n\t\t\tthis.listenerTypes.push(ListenerType.keyboard)\n\t\t}\n\t}\n\n\t/**\n\t * Generate profiling statistics for the HTML5Backend.\n\t */\n\tpublic profile(): Record<string, number> {\n\t\treturn {\n\t\t\tsourceNodes: this.sourceNodes.size,\n\t\t\tsourcePreviewNodes: this.sourcePreviewNodes.size,\n\t\t\tsourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n\t\t\ttargetNodes: this.targetNodes.size,\n\t\t\tdragOverTargetIds: this.dragOverTargetIds?.length || 0,\n\t\t}\n\t}\n\n\t// public for test\n\tpublic get document(): Document | undefined {\n\t\treturn this.options.document\n\t}\n\n\tpublic setup(): void {\n\t\tconst root = this.options.rootElement\n\t\tif (!root) {\n\t\t\treturn\n\t\t}\n\n\t\tinvariant(\n\t\t\t!TouchBackendImpl.isSetUp,\n\t\t\t'Cannot have two Touch backends at the same time.',\n\t\t)\n\t\tTouchBackendImpl.isSetUp = true\n\n\t\tthis.addEventListener(root, 'start', this.getTopMoveStartHandler() as any)\n\t\tthis.addEventListener(\n\t\t\troot,\n\t\t\t'start',\n\t\t\tthis.handleTopMoveStartCapture as any,\n\t\t\ttrue,\n\t\t)\n\t\tthis.addEventListener(root, 'move', this.handleTopMove as any)\n\t\tthis.addEventListener(root, 'move', this.handleTopMoveCapture, true)\n\t\tthis.addEventListener(\n\t\t\troot,\n\t\t\t'end',\n\t\t\tthis.handleTopMoveEndCapture as any,\n\t\t\ttrue,\n\t\t)\n\n\t\tif (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n\t\t\tthis.addEventListener(\n\t\t\t\troot,\n\t\t\t\t'contextmenu',\n\t\t\t\tthis.handleTopMoveEndCapture as any,\n\t\t\t)\n\t\t}\n\n\t\tif (this.options.enableKeyboardEvents) {\n\t\t\tthis.addEventListener(\n\t\t\t\troot,\n\t\t\t\t'keydown',\n\t\t\t\tthis.handleCancelOnEscape as any,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t}\n\t}\n\n\tpublic teardown(): void {\n\t\tconst root = this.options.rootElement\n\t\tif (!root) {\n\t\t\treturn\n\t\t}\n\n\t\tTouchBackendImpl.isSetUp = false\n\t\tthis._mouseClientOffset = {}\n\n\t\tthis.removeEventListener(\n\t\t\troot,\n\t\t\t'start',\n\t\t\tthis.handleTopMoveStartCapture as any,\n\t\t\ttrue,\n\t\t)\n\t\tthis.removeEventListener(root, 'start', this.handleTopMoveStart as any)\n\t\tthis.removeEventListener(root, 'move', this.handleTopMoveCapture, true)\n\t\tthis.removeEventListener(root, 'move', this.handleTopMove as any)\n\t\tthis.removeEventListener(\n\t\t\troot,\n\t\t\t'end',\n\t\t\tthis.handleTopMoveEndCapture as any,\n\t\t\ttrue,\n\t\t)\n\n\t\tif (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n\t\t\tthis.removeEventListener(\n\t\t\t\troot,\n\t\t\t\t'contextmenu',\n\t\t\t\tthis.handleTopMoveEndCapture as any,\n\t\t\t)\n\t\t}\n\n\t\tif (this.options.enableKeyboardEvents) {\n\t\t\tthis.removeEventListener(\n\t\t\t\troot,\n\t\t\t\t'keydown',\n\t\t\t\tthis.handleCancelOnEscape as any,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t}\n\n\t\tthis.uninstallSourceNodeRemovalObserver()\n\t}\n\n\tprivate addEventListener<K extends keyof EventName>(\n\t\tsubject: Node,\n\t\tevent: K,\n\t\thandler: (e: any) => void,\n\t\tcapture = false,\n\t) {\n\t\tconst options = supportsPassive ? { capture, passive: false } : capture\n\n\t\tthis.listenerTypes.forEach(function (listenerType) {\n\t\t\tconst evt = eventNames[listenerType][event]\n\n\t\t\tif (evt) {\n\t\t\t\tsubject.addEventListener(evt as any, handler as any, options)\n\t\t\t}\n\t\t})\n\t}\n\n\tprivate removeEventListener<K extends keyof EventName>(\n\t\tsubject: Node,\n\t\tevent: K,\n\t\thandler: (e: any) => void,\n\t\tcapture = false,\n\t) {\n\t\tconst options = supportsPassive ? { capture, passive: false } : capture\n\n\t\tthis.listenerTypes.forEach(function (listenerType) {\n\t\t\tconst evt = eventNames[listenerType][event]\n\n\t\t\tif (evt) {\n\t\t\t\tsubject.removeEventListener(evt as any, handler as any, options)\n\t\t\t}\n\t\t})\n\t}\n\n\tpublic connectDragSource(sourceId: string, node: HTMLElement): Unsubscribe {\n\t\tconst handleMoveStart = this.handleMoveStart.bind(this, sourceId)\n\t\tthis.sourceNodes.set(sourceId, node)\n\n\t\tthis.addEventListener(node, 'start', handleMoveStart)\n\n\t\treturn (): void => {\n\t\t\tthis.sourceNodes.delete(sourceId)\n\t\t\tthis.removeEventListener(node, 'start', handleMoveStart)\n\t\t}\n\t}\n\n\tpublic connectDragPreview(\n\t\tsourceId: string,\n\t\tnode: HTMLElement,\n\t\toptions: unknown,\n\t): Unsubscribe {\n\t\tthis.sourcePreviewNodeOptions.set(sourceId, options)\n\t\tthis.sourcePreviewNodes.set(sourceId, node)\n\n\t\treturn (): void => {\n\t\t\tthis.sourcePreviewNodes.delete(sourceId)\n\t\t\tthis.sourcePreviewNodeOptions.delete(sourceId)\n\t\t}\n\t}\n\n\tpublic connectDropTarget(targetId: string, node: HTMLElement): Unsubscribe {\n\t\tconst root = this.options.rootElement\n\t\tif (!this.document || !root) {\n\t\t\treturn (): void => {\n\t\t\t\t/* noop */\n\t\t\t}\n\t\t}\n\n\t\tconst handleMove = (e: MouseEvent | TouchEvent) => {\n\t\t\tif (!this.document || !root || !this.monitor.isDragging()) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlet coords\n\n\t\t\t/**\n\t\t\t * Grab the coordinates for the current mouse/touch position\n\t\t\t */\n\t\t\tswitch (e.type) {\n\t\t\t\tcase eventNames.mouse.move:\n\t\t\t\t\tcoords = {\n\t\t\t\t\t\tx: (e as MouseEvent).clientX,\n\t\t\t\t\t\ty: (e as MouseEvent).clientY,\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\n\t\t\t\tcase eventNames.touch.move:\n\t\t\t\t\tcoords = {\n\t\t\t\t\t\tx: (e as TouchEvent).touches[0]?.clientX || 0,\n\t\t\t\t\t\ty: (e as TouchEvent).touches[0]?.clientY || 0,\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Use the coordinates to grab the element the drag ended on.\n\t\t\t * If the element is the same as the target node (or any of it's children) then we have hit a drop target and can handle the move.\n\t\t\t */\n\t\t\tconst droppedOn =\n\t\t\t\tcoords != null\n\t\t\t\t\t? this.document.elementFromPoint(coords.x, coords.y)\n\t\t\t\t\t: undefined\n\t\t\tconst childMatch = droppedOn && node.contains(droppedOn)\n\n\t\t\tif (droppedOn === node || childMatch) {\n\t\t\t\treturn this.handleMove(e, targetId)\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Attaching the event listener to the body so that touchmove will work while dragging over multiple target elements.\n\t\t */\n\t\tthis.addEventListener(this.document.body, 'move', handleMove as any)\n\t\tthis.targetNodes.set(targetId, node)\n\n\t\treturn (): void => {\n\t\t\tif (this.document) {\n\t\t\t\tthis.targetNodes.delete(targetId)\n\t\t\t\tthis.removeEventListener(this.document.body, 'move', handleMove as any)\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getSourceClientOffset = (sourceId: string): XYCoord | undefined => {\n\t\tconst element = this.sourceNodes.get(sourceId)\n\t\treturn element && getNodeClientOffset(element)\n\t}\n\n\tpublic handleTopMoveStartCapture = (e: Event): void => {\n\t\tif (!eventShouldStartDrag(e as MouseEvent)) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.moveStartSourceIds = []\n\t}\n\n\tpublic handleMoveStart = (sourceId: string): void => {\n\t\t// Just because we received an event doesn't necessarily mean we need to collect drag sources.\n\t\t// We only collect start collecting drag sources on touch and left mouse events.\n\t\tif (Array.isArray(this.moveStartSourceIds)) {\n\t\t\tthis.moveStartSourceIds.unshift(sourceId)\n\t\t}\n\t}\n\n\tprivate getTopMoveStartHandler() {\n\t\tif (!this.options.delayTouchStart && !this.options.delayMouseStart) {\n\t\t\treturn this.handleTopMoveStart\n\t\t}\n\n\t\treturn this.handleTopMoveStartDelay\n\t}\n\n\tpublic handleTopMoveStart = (e: MouseEvent | TouchEvent): void => {\n\t\tif (!eventShouldStartDrag(e as MouseEvent)) {\n\t\t\treturn\n\t\t}\n\n\t\t// Don't prematurely preventDefault() here since it might:\n\t\t// 1. Mess up scrolling\n\t\t// 2. Mess up long tap (which brings up context menu)\n\t\t// 3. If there's an anchor link as a child, tap won't be triggered on link\n\n\t\tconst clientOffset = getEventClientOffset(e)\n\t\tif (clientOffset) {\n\t\t\tif (isTouchEvent(e)) {\n\t\t\t\tthis.lastTargetTouchFallback = e.targetTouches[0]\n\t\t\t}\n\t\t\tthis._mouseClientOffset = clientOffset\n\t\t}\n\t\tthis.waitingForDelay = false\n\t}\n\n\tpublic handleTopMoveStartDelay = (e: Event): void => {\n\t\tif (!eventShouldStartDrag(e as MouseEvent)) {\n\t\t\treturn\n\t\t}\n\n\t\tconst delay =\n\t\t\te.type === eventNames.touch.start\n\t\t\t\t? this.options.delayTouchStart\n\t\t\t\t: this.options.delayMouseStart\n\t\tthis.timeout = setTimeout(\n\t\t\tthis.handleTopMoveStart.bind(this, e as any),\n\t\t\tdelay,\n\t\t) as any as ReturnType<typeof setTimeout>\n\t\tthis.waitingForDelay = true\n\t}\n\n\tpublic handleTopMoveCapture = (): void => {\n\t\tthis.dragOverTargetIds = []\n\t}\n\n\tpublic handleMove = (\n\t\t_evt: MouseEvent | TouchEvent,\n\t\ttargetId: string,\n\t): void => {\n\t\tif (this.dragOverTargetIds) {\n\t\t\tthis.dragOverTargetIds.unshift(targetId)\n\t\t}\n\t}\n\n\tpublic handleTopMove = (e: TouchEvent | MouseEvent): void => {\n\t\tif (this.timeout) {\n\t\t\tclearTimeout(this.timeout)\n\t\t}\n\t\tif (!this.document || this.waitingForDelay) {\n\t\t\treturn\n\t\t}\n\t\tconst { moveStartSourceIds, dragOverTargetIds } = this\n\t\tconst enableHoverOutsideTarget = this.options.enableHoverOutsideTarget\n\n\t\tconst clientOffset = getEventClientOffset(e, this.lastTargetTouchFallback)\n\n\t\tif (!clientOffset) {\n\t\t\treturn\n\t\t}\n\n\t\t// If the touch move started as a scroll, or is is between the scroll angles\n\t\tif (\n\t\t\tthis._isScrolling ||\n\t\t\t(!this.monitor.isDragging() &&\n\t\t\t\tinAngleRanges(\n\t\t\t\t\tthis._mouseClientOffset.x || 0,\n\t\t\t\t\tthis._mouseClientOffset.y || 0,\n\t\t\t\t\tclientOffset.x,\n\t\t\t\t\tclientOffset.y,\n\t\t\t\t\tthis.options.scrollAngleRanges,\n\t\t\t\t))\n\t\t) {\n\t\t\tthis._isScrolling = true\n\t\t\treturn\n\t\t}\n\n\t\t// If we're not dragging and we've moved a little, that counts as a drag start\n\t\tif (\n\t\t\t!this.monitor.isDragging() &&\n\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\tthis._mouseClientOffset.hasOwnProperty('x') &&\n\t\t\tmoveStartSourceIds &&\n\t\t\tdistance(\n\t\t\t\tthis._mouseClientOffset.x || 0,\n\t\t\t\tthis._mouseClientOffset.y || 0,\n\t\t\t\tclientOffset.x,\n\t\t\t\tclientOffset.y,\n\t\t\t) > (this.options.touchSlop ? this.options.touchSlop : 0)\n\t\t) {\n\t\t\tthis.moveStartSourceIds = undefined\n\n\t\t\tthis.actions.beginDrag(moveStartSourceIds, {\n\t\t\t\tclientOffset: this._mouseClientOffset,\n\t\t\t\tgetSourceClientOffset: this.getSourceClientOffset,\n\t\t\t\tpublishSource: false,\n\t\t\t})\n\t\t}\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\treturn\n\t\t}\n\n\t\tconst sourceNode = this.sourceNodes.get(\n\t\t\tthis.monitor.getSourceId() as string,\n\t\t)\n\t\tthis.installSourceNodeRemovalObserver(sourceNode)\n\t\tthis.actions.publishDragSource()\n\n\t\tif (e.cancelable) e.preventDefault()\n\n\t\t// Get the node elements of the hovered DropTargets\n\t\tconst dragOverTargetNodes: HTMLElement[] = (dragOverTargetIds || [])\n\t\t\t.map((key) => this.targetNodes.get(key))\n\t\t\t.filter((e) => !!e) as HTMLElement[]\n\n\t\t// Get the a ordered list of nodes that are touched by\n\t\tconst elementsAtPoint = this.options.getDropTargetElementsAtPoint\n\t\t\t? this.options.getDropTargetElementsAtPoint(\n\t\t\t\t\tclientOffset.x,\n\t\t\t\t\tclientOffset.y,\n\t\t\t\t\tdragOverTargetNodes,\n\t\t\t  )\n\t\t\t: this.document.elementsFromPoint(clientOffset.x, clientOffset.y)\n\t\t// Extend list with parents that are not receiving elementsFromPoint events (size 0 elements and svg groups)\n\t\tconst elementsAtPointExtended: Element[] = []\n\t\tfor (const nodeId in elementsAtPoint) {\n\t\t\t// eslint-disable-next-line no-prototype-builtins\n\t\t\tif (!elementsAtPoint.hasOwnProperty(nodeId)) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tlet currentNode: Element | undefined | null = elementsAtPoint[nodeId]\n\t\t\tif (currentNode != null) {\n\t\t\t\telementsAtPointExtended.push(currentNode)\n\t\t\t}\n\t\t\twhile (currentNode) {\n\t\t\t\tcurrentNode = currentNode.parentElement\n\t\t\t\tif (\n\t\t\t\t\tcurrentNode &&\n\t\t\t\t\telementsAtPointExtended.indexOf(currentNode) === -1\n\t\t\t\t) {\n\t\t\t\t\telementsAtPointExtended.push(currentNode)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst orderedDragOverTargetIds: string[] = elementsAtPointExtended\n\t\t\t// Filter off nodes that arent a hovered DropTargets nodes\n\t\t\t.filter((node) => dragOverTargetNodes.indexOf(node as HTMLElement) > -1)\n\t\t\t// Map back the nodes elements to targetIds\n\t\t\t.map((node) => this._getDropTargetId(node))\n\t\t\t// Filter off possible null rows\n\t\t\t.filter((node) => !!node)\n\t\t\t.filter((id, index, ids) => ids.indexOf(id) === index) as string[]\n\n\t\t// Invoke hover for drop targets when source node is still over and pointer is outside\n\t\tif (enableHoverOutsideTarget) {\n\t\t\tfor (const targetId in this.targetNodes) {\n\t\t\t\tconst targetNode = this.targetNodes.get(targetId)\n\t\t\t\tif (\n\t\t\t\t\tsourceNode &&\n\t\t\t\t\ttargetNode &&\n\t\t\t\t\ttargetNode.contains(sourceNode) &&\n\t\t\t\t\torderedDragOverTargetIds.indexOf(targetId) === -1\n\t\t\t\t) {\n\t\t\t\t\torderedDragOverTargetIds.unshift(targetId)\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Reverse order because dnd-core reverse it before calling the DropTarget drop methods\n\t\torderedDragOverTargetIds.reverse()\n\n\t\tthis.actions.hover(orderedDragOverTargetIds, {\n\t\t\tclientOffset: clientOffset,\n\t\t})\n\t}\n\n\t/**\n\t *\n\t * visible for testing\n\t */\n\tpublic _getDropTargetId = (node: Element): Identifier | undefined => {\n\t\tconst keys = this.targetNodes.keys()\n\t\tlet next = keys.next()\n\t\twhile (next.done === false) {\n\t\t\tconst targetId = next.value\n\t\t\tif (node === this.targetNodes.get(targetId)) {\n\t\t\t\treturn targetId\n\t\t\t} else {\n\t\t\t\tnext = keys.next()\n\t\t\t}\n\t\t}\n\t\treturn undefined\n\t}\n\n\tpublic handleTopMoveEndCapture = (e: Event): void => {\n\t\tthis._isScrolling = false\n\t\tthis.lastTargetTouchFallback = undefined\n\n\t\tif (!eventShouldEndDrag(e as MouseEvent)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (!this.monitor.isDragging() || this.monitor.didDrop()) {\n\t\t\tthis.moveStartSourceIds = undefined\n\t\t\treturn\n\t\t}\n\n\t\tif (e.cancelable) e.preventDefault()\n\n\t\tthis._mouseClientOffset = {}\n\n\t\tthis.uninstallSourceNodeRemovalObserver()\n\t\tthis.actions.drop()\n\t\tthis.actions.endDrag()\n\t}\n\n\tpublic handleCancelOnEscape = (e: KeyboardEvent): void => {\n\t\tif (e.key === 'Escape' && this.monitor.isDragging()) {\n\t\t\tthis._mouseClientOffset = {}\n\n\t\t\tthis.uninstallSourceNodeRemovalObserver()\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t}\n\n\tprivate installSourceNodeRemovalObserver(node: HTMLElement | undefined) {\n\t\tthis.uninstallSourceNodeRemovalObserver()\n\n\t\tthis.draggedSourceNode = node\n\t\tthis.draggedSourceNodeRemovalObserver = new MutationObserver(() => {\n\t\t\tif (node && !node.parentElement) {\n\t\t\t\tthis.resurrectSourceNode()\n\t\t\t\tthis.uninstallSourceNodeRemovalObserver()\n\t\t\t}\n\t\t})\n\n\t\tif (!node || !node.parentElement) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.draggedSourceNodeRemovalObserver.observe(node.parentElement, {\n\t\t\tchildList: true,\n\t\t})\n\t}\n\n\tprivate resurrectSourceNode() {\n\t\tif (this.document && this.draggedSourceNode) {\n\t\t\tthis.draggedSourceNode.style.display = 'none'\n\t\t\tthis.draggedSourceNode.removeAttribute('data-reactid')\n\t\t\tthis.document.body.appendChild(this.draggedSourceNode)\n\t\t}\n\t}\n\n\tprivate uninstallSourceNodeRemovalObserver() {\n\t\tif (this.draggedSourceNodeRemovalObserver) {\n\t\t\tthis.draggedSourceNodeRemovalObserver.disconnect()\n\t\t}\n\n\t\tthis.draggedSourceNodeRemovalObserver = undefined\n\t\tthis.draggedSourceNode = undefined\n\t}\n}\n","import type { AngleRange } from '../interfaces.js'\n\nexport function distance(\n\tx1: number,\n\ty1: number,\n\tx2: number,\n\ty2: number,\n): number {\n\treturn Math.sqrt(\n\t\tMath.pow(Math.abs(x2 - x1), 2) + Math.pow(Math.abs(y2 - y1), 2),\n\t)\n}\n\nexport function inAngleRanges(\n\tx1: number,\n\ty1: number,\n\tx2: number,\n\ty2: number,\n\tangleRanges: AngleRange[] | undefined,\n): boolean {\n\tif (!angleRanges) {\n\t\treturn false\n\t}\n\n\tconst angle = (Math.atan2(y2 - y1, x2 - x1) * 180) / Math.PI + 180\n\n\tfor (let i = 0; i < angleRanges.length; ++i) {\n\t\tconst ar = angleRanges[i]\n\t\tif (\n\t\t\tar &&\n\t\t\t(ar.start == null || angle >= ar.start) &&\n\t\t\t(ar.end == null || angle <= ar.end)\n\t\t) {\n\t\t\treturn true\n\t\t}\n\t}\n\n\treturn false\n}\n","import type { BackendFactory, DragDropManager } from 'dnd-core'\n\nimport type { TouchBackendContext, TouchBackendOptions } from './interfaces.js'\nimport { TouchBackendImpl } from './TouchBackendImpl.js'\n\nexport * from './interfaces.js'\nexport * from './TouchBackendImpl.js'\n\nexport const TouchBackend: BackendFactory = function createBackend(\n\tmanager: DragDropManager,\n\tcontext: TouchBackendContext = {},\n\toptions: Partial<TouchBackendOptions> = {},\n): TouchBackendImpl {\n\treturn new TouchBackendImpl(manager, context, options)\n}\n","import { useEffect } from 'react'\n\nimport type { DragLayerMonitor } from '../types/index.js'\nimport { useCollector } from './useCollector.js'\nimport { useDragDropManager } from './useDragDropManager.js'\n\n/**\n * useDragLayer Hook\n * @param collector The property collector\n */\nexport function useDragLayer<CollectedProps, DragObject = any>(\n\tcollect: (monitor: DragLayerMonitor<DragObject>) => CollectedProps,\n): CollectedProps {\n\tconst dragDropManager = useDragDropManager()\n\tconst monitor = dragDropManager.getMonitor()\n\tconst [collected, updateCollected] = useCollector(monitor, collect)\n\n\tuseEffect(() => monitor.subscribeToOffsetChange(updateCollected))\n\tuseEffect(() => monitor.subscribeToStateChange(updateCollected))\n\treturn collected\n}\n","/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nexport function invariant(condition: any, format: string, ...args: any[]) {\n\tif (isProduction()) {\n\t\tif (format === undefined) {\n\t\t\tthrow new Error('invariant requires an error message argument')\n\t\t}\n\t}\n\n\tif (!condition) {\n\t\tlet error\n\t\tif (format === undefined) {\n\t\t\terror = new Error(\n\t\t\t\t'Minified exception occurred; use the non-minified dev environment ' +\n\t\t\t\t\t'for the full error message and additional helpful warnings.',\n\t\t\t)\n\t\t} else {\n\t\t\tlet argIndex = 0\n\t\t\terror = new Error(\n\t\t\t\tformat.replace(/%s/g, function () {\n\t\t\t\t\treturn args[argIndex++]\n\t\t\t\t}),\n\t\t\t)\n\t\t\terror.name = 'Invariant Violation'\n\t\t}\n\n\t\t;(error as any).framesToPop = 1 // we don't care about invariant's own frame\n\t\tthrow error\n\t}\n}\n\nfunction isProduction() {\n\treturn (\n\t\ttypeof process !== 'undefined' && process.env['NODE_ENV'] === 'production'\n\t)\n}\n","import type { DragDropManager } from 'dnd-core'\nimport { createContext } from 'react'\n\n/**\n * The React context type\n */\nexport interface DndContextType {\n\tdragDropManager: DragDropManager | undefined\n}\n\n/**\n * Create the React Context\n */\nexport const DndContext = createContext<DndContextType>({\n\tdragDropManager: undefined,\n})\n","// cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\nexport function get<T>(obj: any, path: string, defaultValue: T): T {\n\treturn path\n\t\t.split('.')\n\t\t.reduce((a, c) => (a && a[c] ? a[c] : defaultValue || null), obj) as T\n}\n\n/**\n * drop-in replacement for _.without\n */\nexport function without<T>(items: T[], item: T): T[] {\n\treturn items.filter((i) => i !== item)\n}\n\n/**\n * drop-in replacement for _.isString\n * @param input\n */\nexport function isString(input: any): boolean {\n\treturn typeof input === 'string'\n}\n\n/**\n * drop-in replacement for _.isString\n * @param input\n */\nexport function isObject(input: any): boolean {\n\treturn typeof input === 'object'\n}\n\n/**\n * replacement for _.xor\n * @param itemsA\n * @param itemsB\n */\nexport function xor<T extends string | number>(itemsA: T[], itemsB: T[]): T[] {\n\tconst map = new Map<T, number>()\n\tconst insertItem = (item: T) => {\n\t\tmap.set(item, map.has(item) ? (map.get(item) as number) + 1 : 1)\n\t}\n\titemsA.forEach(insertItem)\n\titemsB.forEach(insertItem)\n\n\tconst result: T[] = []\n\tmap.forEach((count, key) => {\n\t\tif (count === 1) {\n\t\t\tresult.push(key)\n\t\t}\n\t})\n\treturn result\n}\n\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\nexport function intersection<T>(itemsA: T[], itemsB: T[]): T[] {\n\treturn itemsA.filter((t) => itemsB.indexOf(t) > -1)\n}\n","export const INIT_COORDS = 'dnd-core/INIT_COORDS'\nexport const BEGIN_DRAG = 'dnd-core/BEGIN_DRAG'\nexport const PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE'\nexport const HOVER = 'dnd-core/HOVER'\nexport const DROP = 'dnd-core/DROP'\nexport const END_DRAG = 'dnd-core/END_DRAG'\n","import type { AnyAction } from 'redux'\n\nimport type { XYCoord } from '../../../interfaces.js'\nimport { INIT_COORDS } from '../types.js'\n\nexport function setClientOffset(\n\tclientOffset: XYCoord | null | undefined,\n\tsourceClientOffset?: XYCoord | null | undefined,\n): AnyAction {\n\treturn {\n\t\ttype: INIT_COORDS,\n\t\tpayload: {\n\t\t\tsourceClientOffset: sourceClientOffset || null,\n\t\t\tclientOffset: clientOffset || null,\n\t\t},\n\t}\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tAction,\n\tBeginDragOptions,\n\tBeginDragPayload,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tXYCoord,\n} from '../../interfaces.js'\nimport { isObject } from '../../utils/js_utils.js'\nimport { setClientOffset } from './local/setClientOffset.js'\nimport { BEGIN_DRAG, INIT_COORDS } from './types.js'\n\nconst ResetCoordinatesAction = {\n\ttype: INIT_COORDS,\n\tpayload: {\n\t\tclientOffset: null,\n\t\tsourceClientOffset: null,\n\t},\n}\n\nexport function createBeginDrag(manager: DragDropManager) {\n\treturn function beginDrag(\n\t\tsourceIds: Identifier[] = [],\n\t\toptions: BeginDragOptions = {\n\t\t\tpublishSource: true,\n\t\t},\n\t): Action<BeginDragPayload> | undefined {\n\t\tconst {\n\t\t\tpublishSource = true,\n\t\t\tclientOffset,\n\t\t\tgetSourceClientOffset,\n\t\t}: BeginDragOptions = options\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\n\t\t// Initialize the coordinates using the client offset\n\t\tmanager.dispatch(setClientOffset(clientOffset))\n\n\t\tverifyInvariants(sourceIds, monitor, registry)\n\n\t\t// Get the draggable source\n\t\tconst sourceId = getDraggableSource(sourceIds, monitor)\n\t\tif (sourceId == null) {\n\t\t\tmanager.dispatch(ResetCoordinatesAction)\n\t\t\treturn\n\t\t}\n\n\t\t// Get the source client offset\n\t\tlet sourceClientOffset: XYCoord | null = null\n\t\tif (clientOffset) {\n\t\t\tif (!getSourceClientOffset) {\n\t\t\t\tthrow new Error('getSourceClientOffset must be defined')\n\t\t\t}\n\t\t\tverifyGetSourceClientOffsetIsFunction(getSourceClientOffset)\n\t\t\tsourceClientOffset = getSourceClientOffset(sourceId)\n\t\t}\n\n\t\t// Initialize the full coordinates\n\t\tmanager.dispatch(setClientOffset(clientOffset, sourceClientOffset))\n\n\t\tconst source = registry.getSource(sourceId)\n\t\tconst item = source.beginDrag(monitor, sourceId)\n\t\t// If source.beginDrag returns null, this is an indicator to cancel the drag\n\t\tif (item == null) {\n\t\t\treturn undefined\n\t\t}\n\t\tverifyItemIsObject(item)\n\t\tregistry.pinSource(sourceId)\n\n\t\tconst itemType = registry.getSourceType(sourceId)\n\t\treturn {\n\t\t\ttype: BEGIN_DRAG,\n\t\t\tpayload: {\n\t\t\t\titemType,\n\t\t\t\titem,\n\t\t\t\tsourceId,\n\t\t\t\tclientOffset: clientOffset || null,\n\t\t\t\tsourceClientOffset: sourceClientOffset || null,\n\t\t\t\tisSourcePublic: !!publishSource,\n\t\t\t},\n\t\t}\n\t}\n}\n\nfunction verifyInvariants(\n\tsourceIds: Identifier[],\n\tmonitor: DragDropMonitor,\n\tregistry: HandlerRegistry,\n) {\n\tinvariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.')\n\tsourceIds.forEach(function (sourceId) {\n\t\tinvariant(\n\t\t\tregistry.getSource(sourceId),\n\t\t\t'Expected sourceIds to be registered.',\n\t\t)\n\t})\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset: any) {\n\tinvariant(\n\t\ttypeof getSourceClientOffset === 'function',\n\t\t'When clientOffset is provided, getSourceClientOffset must be a function.',\n\t)\n}\n\nfunction verifyItemIsObject(item: any) {\n\tinvariant(isObject(item), 'Item must be an object.')\n}\n\nfunction getDraggableSource(sourceIds: Identifier[], monitor: DragDropMonitor) {\n\tlet sourceId = null\n\tfor (let i = sourceIds.length - 1; i >= 0; i--) {\n\t\tif (monitor.canDragSource(sourceIds[i])) {\n\t\t\tsourceId = sourceIds[i]\n\t\t\tbreak\n\t\t}\n\t}\n\treturn sourceId\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tAction,\n\tDragDropManager,\n\tDragDropMonitor,\n\tDropPayload,\n\tHandlerRegistry,\n\tIdentifier,\n} from '../../interfaces.js'\nimport { isObject } from '../../utils/js_utils.js'\nimport { DROP } from './types.js'\n\nexport function createDrop(manager: DragDropManager) {\n\treturn function drop(options = {}): void {\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\t\tverifyInvariants(monitor)\n\t\tconst targetIds = getDroppableTargets(monitor)\n\n\t\t// Multiple actions are dispatched here, which is why this doesn't return an action\n\t\ttargetIds.forEach((targetId, index) => {\n\t\t\tconst dropResult = determineDropResult(targetId, index, registry, monitor)\n\t\t\tconst action: Action<DropPayload> = {\n\t\t\t\ttype: DROP,\n\t\t\t\tpayload: {\n\t\t\t\t\tdropResult: {\n\t\t\t\t\t\t...options,\n\t\t\t\t\t\t...dropResult,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t\tmanager.dispatch(action)\n\t\t})\n\t}\n}\n\nfunction verifyInvariants(monitor: DragDropMonitor) {\n\tinvariant(monitor.isDragging(), 'Cannot call drop while not dragging.')\n\tinvariant(\n\t\t!monitor.didDrop(),\n\t\t'Cannot call drop twice during one drag operation.',\n\t)\n}\n\nfunction determineDropResult(\n\ttargetId: Identifier,\n\tindex: number,\n\tregistry: HandlerRegistry,\n\tmonitor: DragDropMonitor,\n) {\n\tconst target = registry.getTarget(targetId)\n\tlet dropResult = target ? target.drop(monitor, targetId) : undefined\n\tverifyDropResultType(dropResult)\n\tif (typeof dropResult === 'undefined') {\n\t\tdropResult = index === 0 ? {} : monitor.getDropResult()\n\t}\n\treturn dropResult\n}\n\nfunction verifyDropResultType(dropResult: any) {\n\tinvariant(\n\t\ttypeof dropResult === 'undefined' || isObject(dropResult),\n\t\t'Drop result must either be an object or undefined.',\n\t)\n}\n\nfunction getDroppableTargets(monitor: DragDropMonitor) {\n\tconst targetIds = monitor\n\t\t.getTargetIds()\n\t\t.filter(monitor.canDropOnTarget, monitor)\n\ttargetIds.reverse()\n\treturn targetIds\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tDragDropManager,\n\tDragDropMonitor,\n\tSentinelAction,\n} from '../../interfaces.js'\nimport { END_DRAG } from './types.js'\n\nexport function createEndDrag(manager: DragDropManager) {\n\treturn function endDrag(): SentinelAction {\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\t\tverifyIsDragging(monitor)\n\n\t\tconst sourceId = monitor.getSourceId()\n\t\tif (sourceId != null) {\n\t\t\tconst source = registry.getSource(sourceId, true)\n\t\t\tsource.endDrag(monitor, sourceId)\n\t\t\tregistry.unpinSource()\n\t\t}\n\t\treturn { type: END_DRAG }\n\t}\n}\n\nfunction verifyIsDragging(monitor: DragDropMonitor) {\n\tinvariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.')\n}\n","import type { Identifier } from '../interfaces.js'\n\nexport function matchesType(\n\ttargetType: Identifier | Identifier[] | null,\n\tdraggedItemType: Identifier | null,\n): boolean {\n\tif (draggedItemType === null) {\n\t\treturn targetType === null\n\t}\n\treturn Array.isArray(targetType)\n\t\t? (targetType as Identifier[]).some((t) => t === draggedItemType)\n\t\t: targetType === draggedItemType\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tAction,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tHoverOptions,\n\tHoverPayload,\n\tIdentifier,\n} from '../../interfaces.js'\nimport { matchesType } from '../../utils/matchesType.js'\nimport { HOVER } from './types.js'\n\nexport function createHover(manager: DragDropManager) {\n\treturn function hover(\n\t\ttargetIdsArg: string[],\n\t\t{ clientOffset }: HoverOptions = {},\n\t): Action<HoverPayload> {\n\t\tverifyTargetIdsIsArray(targetIdsArg)\n\t\tconst targetIds = targetIdsArg.slice(0)\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\t\tconst draggedItemType = monitor.getItemType()\n\t\tremoveNonMatchingTargetIds(targetIds, registry, draggedItemType)\n\t\tcheckInvariants(targetIds, monitor, registry)\n\t\thoverAllTargets(targetIds, monitor, registry)\n\n\t\treturn {\n\t\t\ttype: HOVER,\n\t\t\tpayload: {\n\t\t\t\ttargetIds,\n\t\t\t\tclientOffset: clientOffset || null,\n\t\t\t},\n\t\t}\n\t}\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg: string[]) {\n\tinvariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.')\n}\n\nfunction checkInvariants(\n\ttargetIds: string[],\n\tmonitor: DragDropMonitor,\n\tregistry: HandlerRegistry,\n) {\n\tinvariant(monitor.isDragging(), 'Cannot call hover while not dragging.')\n\tinvariant(!monitor.didDrop(), 'Cannot call hover after drop.')\n\tfor (let i = 0; i < targetIds.length; i++) {\n\t\tconst targetId = targetIds[i] as string\n\t\tinvariant(\n\t\t\ttargetIds.lastIndexOf(targetId) === i,\n\t\t\t'Expected targetIds to be unique in the passed array.',\n\t\t)\n\n\t\tconst target = registry.getTarget(targetId)\n\t\tinvariant(target, 'Expected targetIds to be registered.')\n\t}\n}\n\nfunction removeNonMatchingTargetIds(\n\ttargetIds: string[],\n\tregistry: HandlerRegistry,\n\tdraggedItemType: Identifier | null,\n) {\n\t// Remove those targetIds that don't match the targetType.  This\n\t// fixes shallow isOver which would only be non-shallow because of\n\t// non-matching targets.\n\tfor (let i = targetIds.length - 1; i >= 0; i--) {\n\t\tconst targetId = targetIds[i] as string\n\t\tconst targetType = registry.getTargetType(targetId)\n\t\tif (!matchesType(targetType, draggedItemType)) {\n\t\t\ttargetIds.splice(i, 1)\n\t\t}\n\t}\n}\n\nfunction hoverAllTargets(\n\ttargetIds: string[],\n\tmonitor: DragDropMonitor,\n\tregistry: HandlerRegistry,\n) {\n\t// Finally call hover on all matching targets.\n\ttargetIds.forEach(function (targetId) {\n\t\tconst target = registry.getTarget(targetId)\n\t\ttarget.hover(monitor, targetId)\n\t})\n}\n","import type { DragDropManager, SentinelAction } from '../../interfaces.js'\nimport { PUBLISH_DRAG_SOURCE } from './types.js'\n\nexport function createPublishDragSource(manager: DragDropManager) {\n\treturn function publishDragSource(): SentinelAction | undefined {\n\t\tconst monitor = manager.getMonitor()\n\t\tif (monitor.isDragging()) {\n\t\t\treturn { type: PUBLISH_DRAG_SOURCE }\n\t\t}\n\t\treturn\n\t}\n}\n","import type { Action, Store } from 'redux'\n\nimport { createDragDropActions } from '../actions/dragDrop/index.js'\nimport type {\n\tActionCreator,\n\tBackend,\n\tDragDropActions,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n} from '../interfaces.js'\nimport type { State } from '../reducers/index.js'\nimport type { DragDropMonitorImpl } from './DragDropMonitorImpl.js'\n\nexport class DragDropManagerImpl implements DragDropManager {\n\tprivate store: Store<State>\n\tprivate monitor: DragDropMonitor\n\tprivate backend: Backend | undefined\n\tprivate isSetUp = false\n\n\tpublic constructor(store: Store<State>, monitor: DragDropMonitor) {\n\t\tthis.store = store\n\t\tthis.monitor = monitor\n\t\tstore.subscribe(this.handleRefCountChange)\n\t}\n\n\tpublic receiveBackend(backend: Backend): void {\n\t\tthis.backend = backend\n\t}\n\n\tpublic getMonitor(): DragDropMonitor {\n\t\treturn this.monitor\n\t}\n\n\tpublic getBackend(): Backend {\n\t\treturn this.backend as Backend\n\t}\n\n\tpublic getRegistry(): HandlerRegistry {\n\t\treturn (this.monitor as DragDropMonitorImpl).registry\n\t}\n\n\tpublic getActions(): DragDropActions {\n\t\t/* eslint-disable-next-line @typescript-eslint/no-this-alias */\n\t\tconst manager = this\n\t\tconst { dispatch } = this.store\n\n\t\tfunction bindActionCreator(actionCreator: ActionCreator<any>) {\n\t\t\treturn (...args: any[]) => {\n\t\t\t\tconst action = actionCreator.apply(manager, args as any)\n\t\t\t\tif (typeof action !== 'undefined') {\n\t\t\t\t\tdispatch(action)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst actions = createDragDropActions(this)\n\n\t\treturn Object.keys(actions).reduce(\n\t\t\t(boundActions: DragDropActions, key: string) => {\n\t\t\t\tconst action: ActionCreator<any> = (actions as any)[\n\t\t\t\t\tkey\n\t\t\t\t] as ActionCreator<any>\n\t\t\t\t;(boundActions as any)[key] = bindActionCreator(action)\n\t\t\t\treturn boundActions\n\t\t\t},\n\t\t\t{} as DragDropActions,\n\t\t)\n\t}\n\n\tpublic dispatch(action: Action<any>): void {\n\t\tthis.store.dispatch(action)\n\t}\n\n\tprivate handleRefCountChange = (): void => {\n\t\tconst shouldSetUp = this.store.getState().refCount > 0\n\t\tif (this.backend) {\n\t\t\tif (shouldSetUp && !this.isSetUp) {\n\t\t\t\tthis.backend.setup()\n\t\t\t\tthis.isSetUp = true\n\t\t\t} else if (!shouldSetUp && this.isSetUp) {\n\t\t\t\tthis.backend.teardown()\n\t\t\t\tthis.isSetUp = false\n\t\t\t}\n\t\t}\n\t}\n}\n","import type { DragDropActions, DragDropManager } from '../../interfaces.js'\nimport { createBeginDrag } from './beginDrag.js'\nimport { createDrop } from './drop.js'\nimport { createEndDrag } from './endDrag.js'\nimport { createHover } from './hover.js'\nimport { createPublishDragSource } from './publishDragSource.js'\n\nexport * from './types.js'\n\nexport function createDragDropActions(\n\tmanager: DragDropManager,\n): DragDropActions {\n\treturn {\n\t\tbeginDrag: createBeginDrag(manager),\n\t\tpublishDragSource: createPublishDragSource(manager),\n\t\thover: createHover(manager),\n\t\tdrop: createDrop(manager),\n\t\tendDrag: createEndDrag(manager),\n\t}\n}\n","import type { XYCoord } from '../interfaces.js'\nimport type { State } from '../reducers/dragOffset.js'\n\n/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\nexport function add(a: XYCoord, b: XYCoord): XYCoord {\n\treturn {\n\t\tx: a.x + b.x,\n\t\ty: a.y + b.y,\n\t}\n}\n\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\nexport function subtract(a: XYCoord, b: XYCoord): XYCoord {\n\treturn {\n\t\tx: a.x - b.x,\n\t\ty: a.y - b.y,\n\t}\n}\n\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\nexport function getSourceClientOffset(state: State): XYCoord | null {\n\tconst { clientOffset, initialClientOffset, initialSourceClientOffset } = state\n\tif (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n\t\treturn null\n\t}\n\treturn subtract(\n\t\tadd(clientOffset, initialSourceClientOffset),\n\t\tinitialClientOffset,\n\t)\n}\n\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\nexport function getDifferenceFromInitialOffset(state: State): XYCoord | null {\n\tconst { clientOffset, initialClientOffset } = state\n\tif (!clientOffset || !initialClientOffset) {\n\t\treturn null\n\t}\n\treturn subtract(clientOffset, initialClientOffset)\n}\n","import { intersection } from './js_utils.js'\n\nexport const NONE: string[] = []\nexport const ALL: string[] = []\n// Add these flags for debug\n;(NONE as any).__IS_NONE__ = true\n;(ALL as any).__IS_ALL__ = true\n\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\nexport function areDirty(\n\tdirtyIds: string[],\n\thandlerIds: string[] | undefined,\n): boolean {\n\tif (dirtyIds === NONE) {\n\t\treturn false\n\t}\n\n\tif (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n\t\treturn true\n\t}\n\n\tconst commonIds = intersection(handlerIds, dirtyIds)\n\treturn commonIds.length > 0\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { Store } from 'redux'\n\nimport type {\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tListener,\n\tUnsubscribe,\n\tXYCoord,\n} from '../interfaces.js'\nimport type { State } from '../reducers/index.js'\nimport {\n\tgetDifferenceFromInitialOffset,\n\tgetSourceClientOffset,\n} from '../utils/coords.js'\nimport { areDirty } from '../utils/dirtiness.js'\nimport { matchesType } from '../utils/matchesType.js'\n\nexport class DragDropMonitorImpl implements DragDropMonitor {\n\tprivate store: Store<State>\n\tpublic readonly registry: HandlerRegistry\n\n\tpublic constructor(store: Store<State>, registry: HandlerRegistry) {\n\t\tthis.store = store\n\t\tthis.registry = registry\n\t}\n\n\tpublic subscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions: { handlerIds?: string[] } = {},\n\t): Unsubscribe {\n\t\tconst { handlerIds } = options\n\t\tinvariant(typeof listener === 'function', 'listener must be a function.')\n\t\tinvariant(\n\t\t\ttypeof handlerIds === 'undefined' || Array.isArray(handlerIds),\n\t\t\t'handlerIds, when specified, must be an array of strings.',\n\t\t)\n\n\t\tlet prevStateId = this.store.getState().stateId\n\t\tconst handleChange = () => {\n\t\t\tconst state = this.store.getState()\n\t\t\tconst currentStateId = state.stateId\n\t\t\ttry {\n\t\t\t\tconst canSkipListener =\n\t\t\t\t\tcurrentStateId === prevStateId ||\n\t\t\t\t\t(currentStateId === prevStateId + 1 &&\n\t\t\t\t\t\t!areDirty(state.dirtyHandlerIds, handlerIds))\n\n\t\t\t\tif (!canSkipListener) {\n\t\t\t\t\tlistener()\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tprevStateId = currentStateId\n\t\t\t}\n\t\t}\n\n\t\treturn this.store.subscribe(handleChange)\n\t}\n\n\tpublic subscribeToOffsetChange(listener: Listener): Unsubscribe {\n\t\tinvariant(typeof listener === 'function', 'listener must be a function.')\n\n\t\tlet previousState = this.store.getState().dragOffset\n\t\tconst handleChange = () => {\n\t\t\tconst nextState = this.store.getState().dragOffset\n\t\t\tif (nextState === previousState) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tpreviousState = nextState\n\t\t\tlistener()\n\t\t}\n\n\t\treturn this.store.subscribe(handleChange)\n\t}\n\n\tpublic canDragSource(sourceId: string | undefined): boolean {\n\t\tif (!sourceId) {\n\t\t\treturn false\n\t\t}\n\t\tconst source = this.registry.getSource(sourceId)\n\t\tinvariant(source, `Expected to find a valid source. sourceId=${sourceId}`)\n\n\t\tif (this.isDragging()) {\n\t\t\treturn false\n\t\t}\n\n\t\treturn source.canDrag(this, sourceId)\n\t}\n\n\tpublic canDropOnTarget(targetId: string | undefined): boolean {\n\t\t// undefined on initial render\n\t\tif (!targetId) {\n\t\t\treturn false\n\t\t}\n\t\tconst target = this.registry.getTarget(targetId)\n\t\tinvariant(target, `Expected to find a valid target. targetId=${targetId}`)\n\n\t\tif (!this.isDragging() || this.didDrop()) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst targetType = this.registry.getTargetType(targetId)\n\t\tconst draggedItemType = this.getItemType()\n\t\treturn (\n\t\t\tmatchesType(targetType, draggedItemType) && target.canDrop(this, targetId)\n\t\t)\n\t}\n\n\tpublic isDragging(): boolean {\n\t\treturn Boolean(this.getItemType())\n\t}\n\n\tpublic isDraggingSource(sourceId: string | undefined): boolean {\n\t\t// undefined on initial render\n\t\tif (!sourceId) {\n\t\t\treturn false\n\t\t}\n\t\tconst source = this.registry.getSource(sourceId, true)\n\t\tinvariant(source, `Expected to find a valid source. sourceId=${sourceId}`)\n\n\t\tif (!this.isDragging() || !this.isSourcePublic()) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst sourceType = this.registry.getSourceType(sourceId)\n\t\tconst draggedItemType = this.getItemType()\n\t\tif (sourceType !== draggedItemType) {\n\t\t\treturn false\n\t\t}\n\n\t\treturn source.isDragging(this, sourceId)\n\t}\n\n\tpublic isOverTarget(\n\t\ttargetId: string | undefined,\n\t\toptions = { shallow: false },\n\t): boolean {\n\t\t// undefined on initial render\n\t\tif (!targetId) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst { shallow } = options\n\t\tif (!this.isDragging()) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst targetType = this.registry.getTargetType(targetId)\n\t\tconst draggedItemType = this.getItemType()\n\t\tif (draggedItemType && !matchesType(targetType, draggedItemType)) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst targetIds = this.getTargetIds()\n\t\tif (!targetIds.length) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst index = targetIds.indexOf(targetId)\n\t\tif (shallow) {\n\t\t\treturn index === targetIds.length - 1\n\t\t} else {\n\t\t\treturn index > -1\n\t\t}\n\t}\n\n\tpublic getItemType(): Identifier {\n\t\treturn this.store.getState().dragOperation.itemType as Identifier\n\t}\n\n\tpublic getItem(): any {\n\t\treturn this.store.getState().dragOperation.item\n\t}\n\n\tpublic getSourceId(): string | null {\n\t\treturn this.store.getState().dragOperation.sourceId\n\t}\n\n\tpublic getTargetIds(): string[] {\n\t\treturn this.store.getState().dragOperation.targetIds\n\t}\n\n\tpublic getDropResult(): any {\n\t\treturn this.store.getState().dragOperation.dropResult\n\t}\n\n\tpublic didDrop(): boolean {\n\t\treturn this.store.getState().dragOperation.didDrop\n\t}\n\n\tpublic isSourcePublic(): boolean {\n\t\treturn Boolean(this.store.getState().dragOperation.isSourcePublic)\n\t}\n\n\tpublic getInitialClientOffset(): XYCoord | null {\n\t\treturn this.store.getState().dragOffset.initialClientOffset\n\t}\n\n\tpublic getInitialSourceClientOffset(): XYCoord | null {\n\t\treturn this.store.getState().dragOffset.initialSourceClientOffset\n\t}\n\n\tpublic getClientOffset(): XYCoord | null {\n\t\treturn this.store.getState().dragOffset.clientOffset\n\t}\n\n\tpublic getSourceClientOffset(): XYCoord | null {\n\t\treturn getSourceClientOffset(this.store.getState().dragOffset)\n\t}\n\n\tpublic getDifferenceFromInitialOffset(): XYCoord | null {\n\t\treturn getDifferenceFromInitialOffset(this.store.getState().dragOffset)\n\t}\n}\n","// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nconst scope = typeof global !== 'undefined' ? global : self\nconst BrowserMutationObserver =\n\t(scope as any).MutationObserver || (scope as any).WebKitMutationObserver\n\nexport function makeRequestCallFromTimer(callback: () => void) {\n\treturn function requestCall() {\n\t\t// We dispatch a timeout with a specified delay of 0 for engines that\n\t\t// can reliably accommodate that request. This will usually be snapped\n\t\t// to a 4 milisecond delay, but once we're flushing, there's no delay\n\t\t// between events.\n\t\tconst timeoutHandle = setTimeout(handleTimer, 0)\n\t\t// However, since this timer gets frequently dropped in Firefox\n\t\t// workers, we enlist an interval handle that will try to fire\n\t\t// an event 20 times per second until it succeeds.\n\t\tconst intervalHandle = setInterval(handleTimer, 50)\n\n\t\tfunction handleTimer() {\n\t\t\t// Whichever timer succeeds will cancel both timers and\n\t\t\t// execute the callback.\n\t\t\tclearTimeout(timeoutHandle)\n\t\t\tclearInterval(intervalHandle)\n\t\t\tcallback()\n\t\t}\n\t}\n}\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nexport function makeRequestCallFromMutationObserver(callback: () => void) {\n\tlet toggle = 1\n\tconst observer = new BrowserMutationObserver(callback)\n\tconst node = document.createTextNode('')\n\tobserver.observe(node, { characterData: true })\n\treturn function requestCall() {\n\t\ttoggle = -toggle\n\t\t;(node as any).data = toggle\n\t}\n}\n\nexport const makeRequestCall =\n\ttypeof BrowserMutationObserver === 'function'\n\t\t? // MutationObservers are desirable because they have high priority and work\n\t\t  // reliably everywhere they are implemented.\n\t\t  // They are implemented in all modern browsers.\n\t\t  //\n\t\t  // - Android 4-4.3\n\t\t  // - Chrome 26-34\n\t\t  // - Firefox 14-29\n\t\t  // - Internet Explorer 11\n\t\t  // - iPad Safari 6-7.1\n\t\t  // - iPhone Safari 7-7.1\n\t\t  // - Safari 6-7\n\t\t  makeRequestCallFromMutationObserver\n\t\t: // MessageChannels are desirable because they give direct access to the HTML\n\t\t  // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n\t\t  // 11-12, and in web workers in many engines.\n\t\t  // Although message channels yield to any queued rendering and IO tasks, they\n\t\t  // would be better than imposing the 4ms delay of timers.\n\t\t  // However, they do not work reliably in Internet Explorer or Safari.\n\n\t\t  // Internet Explorer 10 is the only browser that has setImmediate but does\n\t\t  // not have MutationObservers.\n\t\t  // Although setImmediate yields to the browser's renderer, it would be\n\t\t  // preferrable to falling back to setTimeout since it does not have\n\t\t  // the minimum 4ms penalty.\n\t\t  // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n\t\t  // Desktop to a lesser extent) that renders both setImmediate and\n\t\t  // MessageChannel useless for the purposes of ASAP.\n\t\t  // https://github.com/kriskowal/q/issues/396\n\n\t\t  // Timers are implemented universally.\n\t\t  // We fall back to timers in workers in most engines, and in foreground\n\t\t  // contexts in the following browsers.\n\t\t  // However, note that even this simple case requires nuances to operate in a\n\t\t  // broad spectrum of browsers.\n\t\t  //\n\t\t  // - Firefox 3-13\n\t\t  // - Internet Explorer 6-9\n\t\t  // - iPad Safari 4.3\n\t\t  // - Lynx 2.8.7\n\t\t  makeRequestCallFromTimer\n","/* eslint-disable no-restricted-globals, @typescript-eslint/ban-ts-comment, @typescript-eslint/no-unused-vars, @typescript-eslint/no-non-null-assertion */\nimport { makeRequestCall, makeRequestCallFromTimer } from './makeRequestCall.js'\nimport type { Task } from './types.js'\n\nexport class AsapQueue {\n\tprivate queue: Task[] = []\n\t// We queue errors to ensure they are thrown in right order (FIFO).\n\t// Array-as-queue is good enough here, since we are just dealing with exceptions.\n\tprivate pendingErrors: any[] = []\n\t// Once a flush has been requested, no further calls to `requestFlush` are\n\t// necessary until the next `flush` completes.\n\t// @ts-ignore\n\tprivate flushing = false\n\t// `requestFlush` is an implementation-specific method that attempts to kick\n\t// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n\t// the event queue before yielding to the browser's own event loop.\n\tprivate requestFlush: () => void\n\n\tprivate requestErrorThrow: () => void\n\t// The position of the next task to execute in the task queue. This is\n\t// preserved between calls to `flush` so that it can be resumed if\n\t// a task throws an exception.\n\tprivate index = 0\n\t// If a task schedules additional tasks recursively, the task queue can grow\n\t// unbounded. To prevent memory exhaustion, the task queue will periodically\n\t// truncate already-completed tasks.\n\tprivate capacity = 1024\n\n\tpublic constructor() {\n\t\t// `requestFlush` requests that the high priority event queue be flushed as\n\t\t// soon as possible.\n\t\t// This is useful to prevent an error thrown in a task from stalling the event\n\t\t// queue if the exception handled by Node.js’s\n\t\t// `process.on(\"uncaughtException\")` or by a domain.\n\n\t\t// `requestFlush` is implemented using a strategy based on data collected from\n\t\t// every available SauceLabs Selenium web driver worker at time of writing.\n\t\t// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\t\tthis.requestFlush = makeRequestCall(this.flush)\n\t\tthis.requestErrorThrow = makeRequestCallFromTimer(() => {\n\t\t\t// Throw first error\n\t\t\tif (this.pendingErrors.length) {\n\t\t\t\tthrow this.pendingErrors.shift()\n\t\t\t}\n\t\t})\n\t}\n\n\t// Use the fastest means possible to execute a task in its own turn, with\n\t// priority over other events including IO, animation, reflow, and redraw\n\t// events in browsers.\n\t//\n\t// An exception thrown by a task will permanently interrupt the processing of\n\t// subsequent tasks. The higher level `asap` function ensures that if an\n\t// exception is thrown by a task, that the task queue will continue flushing as\n\t// soon as possible, but if you use `rawAsap` directly, you are responsible to\n\t// either ensure that no exceptions are thrown from your task, or to manually\n\t// call `rawAsap.requestFlush` if an exception is thrown.\n\tpublic enqueueTask(task: Task): void {\n\t\tconst { queue: q, requestFlush } = this\n\t\tif (!q.length) {\n\t\t\trequestFlush()\n\t\t\tthis.flushing = true\n\t\t}\n\t\t// Equivalent to push, but avoids a function call.\n\t\tq[q.length] = task\n\t}\n\n\t// The flush function processes all tasks that have been scheduled with\n\t// `rawAsap` unless and until one of those tasks throws an exception.\n\t// If a task throws an exception, `flush` ensures that its state will remain\n\t// consistent and will resume where it left off when called again.\n\t// However, `flush` does not make any arrangements to be called again if an\n\t// exception is thrown.\n\tprivate flush = () => {\n\t\tconst { queue: q } = this\n\t\twhile (this.index < q.length) {\n\t\t\tconst currentIndex = this.index\n\t\t\t// Advance the index before calling the task. This ensures that we will\n\t\t\t// begin flushing on the next task the task throws an error.\n\t\t\tthis.index++\n\t\t\tq[currentIndex]!.call()\n\t\t\t// Prevent leaking memory for long chains of recursive calls to `asap`.\n\t\t\t// If we call `asap` within tasks scheduled by `asap`, the queue will\n\t\t\t// grow, but to avoid an O(n) walk for every task we execute, we don't\n\t\t\t// shift tasks off the queue after they have been executed.\n\t\t\t// Instead, we periodically shift 1024 tasks off the queue.\n\t\t\tif (this.index > this.capacity) {\n\t\t\t\t// Manually shift all values starting at the index back to the\n\t\t\t\t// beginning of the queue.\n\t\t\t\tfor (\n\t\t\t\t\tlet scan = 0, newLength = q.length - this.index;\n\t\t\t\t\tscan < newLength;\n\t\t\t\t\tscan++\n\t\t\t\t) {\n\t\t\t\t\tq[scan] = q[scan + this.index]!\n\t\t\t\t}\n\t\t\t\tq.length -= this.index\n\t\t\t\tthis.index = 0\n\t\t\t}\n\t\t}\n\t\tq.length = 0\n\t\tthis.index = 0\n\t\tthis.flushing = false\n\t}\n\n\t// In a web browser, exceptions are not fatal. However, to avoid\n\t// slowing down the queue of pending tasks, we rethrow the error in a\n\t// lower priority turn.\n\tpublic registerPendingError = (err: any) => {\n\t\tthis.pendingErrors.push(err)\n\t\tthis.requestErrorThrow()\n\t}\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// // its existence.\n// rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n","// We wrap tasks with recyclable task objects.  A task object implements\n\nimport type { Task, TaskFn } from 'types'\n\n// `call`, just like a function.\nexport class RawTask implements Task {\n\tpublic task: TaskFn | null = null\n\n\tpublic constructor(\n\t\tprivate onError: (err: any) => void,\n\t\tprivate release: (t: RawTask) => void,\n\t) {}\n\n\tpublic call() {\n\t\ttry {\n\t\t\tthis.task && this.task()\n\t\t} catch (error) {\n\t\t\tthis.onError(error)\n\t\t} finally {\n\t\t\tthis.task = null\n\t\t\tthis.release(this)\n\t\t}\n\t}\n}\n","import { RawTask } from './RawTask.js'\nimport type { Task } from './types.js'\n\nexport class TaskFactory {\n\tprivate freeTasks: RawTask[] = []\n\n\tpublic constructor(private onError: (err: any) => void) {}\n\n\tpublic create(task: () => void): Task {\n\t\tconst tasks = this.freeTasks\n\t\tconst t = tasks.length\n\t\t\t? (tasks.pop() as RawTask)\n\t\t\t: new RawTask(this.onError, (t) => (tasks[tasks.length] = t))\n\t\tt.task = task\n\t\treturn t\n\t}\n}\n","import { AsapQueue } from './AsapQueue.js'\nimport { TaskFactory } from './TaskFactory.js'\nimport type { TaskFn } from './types.js'\n\nconst asapQueue = new AsapQueue()\nconst taskFactory = new TaskFactory(asapQueue.registerPendingError)\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nexport function asap(task: TaskFn) {\n\tasapQueue.enqueueTask(taskFactory.create(task))\n}\n","import type { Action, SourceIdPayload, TargetIdPayload } from '../interfaces.js'\n\nexport const ADD_SOURCE = 'dnd-core/ADD_SOURCE'\nexport const ADD_TARGET = 'dnd-core/ADD_TARGET'\nexport const REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE'\nexport const REMOVE_TARGET = 'dnd-core/REMOVE_TARGET'\n\nexport function addSource(sourceId: string): Action<SourceIdPayload> {\n\treturn {\n\t\ttype: ADD_SOURCE,\n\t\tpayload: {\n\t\t\tsourceId,\n\t\t},\n\t}\n}\n\nexport function addTarget(targetId: string): Action<TargetIdPayload> {\n\treturn {\n\t\ttype: ADD_TARGET,\n\t\tpayload: {\n\t\t\ttargetId,\n\t\t},\n\t}\n}\n\nexport function removeSource(sourceId: string): Action<SourceIdPayload> {\n\treturn {\n\t\ttype: REMOVE_SOURCE,\n\t\tpayload: {\n\t\t\tsourceId,\n\t\t},\n\t}\n}\n\nexport function removeTarget(targetId: string): Action<TargetIdPayload> {\n\treturn {\n\t\ttype: REMOVE_TARGET,\n\t\tpayload: {\n\t\t\ttargetId,\n\t\t},\n\t}\n}\n","export type Identifier = string | symbol\nexport type SourceType = Identifier\nexport type TargetType = Identifier | Identifier[]\nexport type Unsubscribe = () => void\nexport type Listener = () => void\n\nexport interface XYCoord {\n\tx: number\n\ty: number\n}\n\nexport enum HandlerRole {\n\tSOURCE = 'SOURCE',\n\tTARGET = 'TARGET',\n}\n\nexport interface Backend {\n\tsetup(): void\n\tteardown(): void\n\tconnectDragSource(sourceId: any, node?: any, options?: any): Unsubscribe\n\tconnectDragPreview(sourceId: any, node?: any, options?: any): Unsubscribe\n\tconnectDropTarget(targetId: any, node?: any, options?: any): Unsubscribe\n\tprofile(): Record<string, number>\n}\n\nexport interface DragDropMonitor {\n\tsubscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions?: {\n\t\t\thandlerIds?: Identifier[]\n\t\t},\n\t): Unsubscribe\n\tsubscribeToOffsetChange(listener: Listener): Unsubscribe\n\tcanDragSource(sourceId: Identifier | undefined): boolean\n\tcanDropOnTarget(targetId: Identifier | undefined): boolean\n\n\t/**\n\t * Returns true if a drag operation is in progress, and either the owner initiated the drag, or its isDragging()\n\t * is defined and returns true.\n\t */\n\tisDragging(): boolean\n\tisDraggingSource(sourceId: Identifier | undefined): boolean\n\tisOverTarget(\n\t\ttargetId: Identifier | undefined,\n\t\toptions?: {\n\t\t\tshallow?: boolean\n\t\t},\n\t): boolean\n\n\t/**\n\t * Returns a string or a symbol identifying the type of the current dragged item. Returns null if no item is being dragged.\n\t */\n\tgetItemType(): Identifier | null\n\n\t/**\n\t * Returns a plain object representing the currently dragged item. Every drag source must specify it by returning an object\n\t * from its beginDrag() method. Returns null if no item is being dragged.\n\t */\n\tgetItem(): any\n\tgetSourceId(): Identifier | null\n\tgetTargetIds(): Identifier[]\n\t/**\n\t * Returns a plain object representing the last recorded drop result. The drop targets may optionally specify it by returning an\n\t * object from their drop() methods. When a chain of drop() is dispatched for the nested targets, bottom up, any parent that\n\t * explicitly returns its own result from drop() overrides the child drop result previously set by the child. Returns null if\n\t * called outside endDrag().\n\t */\n\tgetDropResult(): any\n\t/**\n\t * Returns true if some drop target has handled the drop event, false otherwise. Even if a target did not return a drop result,\n\t * didDrop() returns true. Use it inside endDrag() to test whether any drop target has handled the drop. Returns false if called\n\t * outside endDrag().\n\t */\n\tdidDrop(): boolean\n\tisSourcePublic(): boolean | null\n\t/**\n\t * Returns the { x, y } client offset of the pointer at the time when the current drag operation has started.\n\t * Returns null if no item is being dragged.\n\t */\n\tgetInitialClientOffset(): XYCoord | null\n\t/**\n\t * Returns the { x, y } client offset of the drag source component's root DOM node at the time when the current drag\n\t * operation has started. Returns null if no item is being dragged.\n\t */\n\tgetInitialSourceClientOffset(): XYCoord | null\n\n\t/**\n\t * Returns the last recorded { x, y } client offset of the pointer while a drag operation is in progress.\n\t * Returns null if no item is being dragged.\n\t */\n\tgetClientOffset(): XYCoord | null\n\n\t/**\n\t * Returns the projected { x, y } client offset of the drag source component's root DOM node, based on its position at the time\n\t * when the current drag operation has started, and the movement difference. Returns null if no item is being dragged.\n\t */\n\tgetSourceClientOffset(): XYCoord | null\n\n\t/**\n\t * Returns the { x, y } difference between the last recorded client offset of the pointer and the client offset when the current\n\t * drag operation has started. Returns null if no item is being dragged.\n\t */\n\tgetDifferenceFromInitialOffset(): XYCoord | null\n}\n\nexport interface HandlerRegistry {\n\taddSource(type: SourceType, source: DragSource): Identifier\n\taddTarget(type: TargetType, target: DropTarget): Identifier\n\tcontainsHandler(handler: DragSource | DropTarget): boolean\n\tgetSource(sourceId: Identifier, includePinned?: boolean): DragSource\n\tgetSourceType(sourceId: Identifier): SourceType\n\tgetTargetType(targetId: Identifier): TargetType\n\tgetTarget(targetId: Identifier): DropTarget\n\tisSourceId(handlerId: Identifier): boolean\n\tisTargetId(handlerId: Identifier): boolean\n\tremoveSource(sourceId: Identifier): void\n\tremoveTarget(targetId: Identifier): void\n\tpinSource(sourceId: Identifier): void\n\tunpinSource(): void\n}\n\nexport interface Action<Payload> {\n\ttype: Identifier\n\tpayload: Payload\n}\nexport interface SentinelAction {\n\ttype: Identifier\n}\n\nexport type ActionCreator<Payload> = (args: any[]) => Action<Payload>\n\nexport interface BeginDragOptions {\n\tpublishSource?: boolean\n\tclientOffset?: XYCoord\n\tgetSourceClientOffset?: (sourceId: Identifier | undefined) => XYCoord\n}\n\nexport interface InitCoordsPayload {\n\tclientOffset: XYCoord | null\n\tsourceClientOffset: XYCoord | null\n}\n\nexport interface BeginDragPayload {\n\titemType: Identifier\n\titem: any\n\tsourceId: Identifier\n\tclientOffset: XYCoord | null\n\tsourceClientOffset: XYCoord | null\n\tisSourcePublic: boolean\n}\n\nexport interface HoverPayload {\n\ttargetIds: Identifier[]\n\tclientOffset: XYCoord | null\n}\n\nexport interface HoverOptions {\n\tclientOffset?: XYCoord\n}\n\nexport interface DropPayload {\n\tdropResult: any\n}\n\nexport interface TargetIdPayload {\n\ttargetId: Identifier\n}\n\nexport interface SourceIdPayload {\n\tsourceId: Identifier\n}\n\nexport interface DragDropActions {\n\tbeginDrag(\n\t\tsourceIds?: Identifier[],\n\t\toptions?: any,\n\t): Action<BeginDragPayload> | undefined\n\tpublishDragSource(): SentinelAction | undefined\n\thover(targetIds: Identifier[], options?: any): Action<HoverPayload>\n\tdrop(options?: any): void\n\tendDrag(): SentinelAction\n}\n\nexport interface DragDropManager {\n\tgetMonitor(): DragDropMonitor\n\tgetBackend(): Backend\n\tgetRegistry(): HandlerRegistry\n\tgetActions(): DragDropActions\n\tdispatch(action: any): void\n}\n\nexport type BackendFactory = (\n\tmanager: DragDropManager,\n\tglobalContext?: any,\n\tconfiguration?: any,\n) => Backend\n\nexport interface DragSource {\n\tbeginDrag(monitor: DragDropMonitor, targetId: Identifier): void\n\tendDrag(monitor: DragDropMonitor, targetId: Identifier): void\n\tcanDrag(monitor: DragDropMonitor, targetId: Identifier): boolean\n\tisDragging(monitor: DragDropMonitor, targetId: Identifier): boolean\n}\n\nexport interface DropTarget {\n\tcanDrop(monitor: DragDropMonitor, targetId: Identifier): boolean\n\thover(monitor: DragDropMonitor, targetId: Identifier): void\n\tdrop(monitor: DragDropMonitor, targetId: Identifier): any\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type { DragSource, DropTarget, Identifier } from './interfaces.js'\n\nexport function validateSourceContract(source: DragSource): void {\n\tinvariant(\n\t\ttypeof source.canDrag === 'function',\n\t\t'Expected canDrag to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof source.beginDrag === 'function',\n\t\t'Expected beginDrag to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof source.endDrag === 'function',\n\t\t'Expected endDrag to be a function.',\n\t)\n}\n\nexport function validateTargetContract(target: DropTarget): void {\n\tinvariant(\n\t\ttypeof target.canDrop === 'function',\n\t\t'Expected canDrop to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof target.hover === 'function',\n\t\t'Expected hover to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof target.drop === 'function',\n\t\t'Expected beginDrag to be a function.',\n\t)\n}\n\nexport function validateType(\n\ttype: Identifier | Identifier[],\n\tallowArray?: boolean,\n): void {\n\tif (allowArray && Array.isArray(type)) {\n\t\ttype.forEach((t) => validateType(t, false))\n\t\treturn\n\t}\n\n\tinvariant(\n\t\ttypeof type === 'string' || typeof type === 'symbol',\n\t\tallowArray\n\t\t\t? 'Type can only be a string, a symbol, or an array of either.'\n\t\t\t: 'Type can only be a string or a symbol.',\n\t)\n}\n","let nextUniqueId = 0\n\nexport function getNextUniqueId(): number {\n\treturn nextUniqueId++\n}\n","import { asap } from '@react-dnd/asap'\nimport { invariant } from '@react-dnd/invariant'\nimport type { Store } from 'redux'\n\nimport {\n\taddSource,\n\taddTarget,\n\tremoveSource,\n\tremoveTarget,\n} from '../actions/registry.js'\nimport {\n\tvalidateSourceContract,\n\tvalidateTargetContract,\n\tvalidateType,\n} from '../contracts.js'\nimport type {\n\tDragSource,\n\tDropTarget,\n\tHandlerRegistry,\n\tIdentifier,\n\tSourceType,\n\tTargetType,\n} from '../interfaces.js'\nimport { HandlerRole } from '../interfaces.js'\nimport type { State } from '../reducers/index.js'\nimport { getNextUniqueId } from '../utils/getNextUniqueId.js'\n\nfunction getNextHandlerId(role: HandlerRole): string {\n\tconst id = getNextUniqueId().toString()\n\tswitch (role) {\n\t\tcase HandlerRole.SOURCE:\n\t\t\treturn `S${id}`\n\t\tcase HandlerRole.TARGET:\n\t\t\treturn `T${id}`\n\t\tdefault:\n\t\t\tthrow new Error(`Unknown Handler Role: ${role}`)\n\t}\n}\n\nfunction parseRoleFromHandlerId(handlerId: string) {\n\tswitch (handlerId[0]) {\n\t\tcase 'S':\n\t\t\treturn HandlerRole.SOURCE\n\t\tcase 'T':\n\t\t\treturn HandlerRole.TARGET\n\t\tdefault:\n\t\t\tthrow new Error(`Cannot parse handler ID: ${handlerId}`)\n\t}\n}\n\nfunction mapContainsValue<T>(map: Map<string, T>, searchValue: T) {\n\tconst entries = map.entries()\n\tlet isDone = false\n\tdo {\n\t\tconst {\n\t\t\tdone,\n\t\t\tvalue: [, value],\n\t\t} = entries.next()\n\t\tif (value === searchValue) {\n\t\t\treturn true\n\t\t}\n\t\tisDone = !!done\n\t} while (!isDone)\n\treturn false\n}\n\nexport class HandlerRegistryImpl implements HandlerRegistry {\n\tprivate types: Map<string, SourceType | TargetType> = new Map()\n\tprivate dragSources: Map<string, DragSource> = new Map()\n\tprivate dropTargets: Map<string, DropTarget> = new Map()\n\tprivate pinnedSourceId: string | null = null\n\tprivate pinnedSource: any = null\n\tprivate store: Store<State>\n\n\tpublic constructor(store: Store<State>) {\n\t\tthis.store = store\n\t}\n\n\tpublic addSource(type: SourceType, source: DragSource): string {\n\t\tvalidateType(type)\n\t\tvalidateSourceContract(source)\n\n\t\tconst sourceId = this.addHandler(HandlerRole.SOURCE, type, source)\n\t\tthis.store.dispatch(addSource(sourceId))\n\t\treturn sourceId\n\t}\n\n\tpublic addTarget(type: TargetType, target: DropTarget): string {\n\t\tvalidateType(type, true)\n\t\tvalidateTargetContract(target)\n\n\t\tconst targetId = this.addHandler(HandlerRole.TARGET, type, target)\n\t\tthis.store.dispatch(addTarget(targetId))\n\t\treturn targetId\n\t}\n\n\tpublic containsHandler(handler: DragSource | DropTarget): boolean {\n\t\treturn (\n\t\t\tmapContainsValue(this.dragSources, handler) ||\n\t\t\tmapContainsValue(this.dropTargets, handler)\n\t\t)\n\t}\n\n\tpublic getSource(sourceId: string, includePinned = false): DragSource {\n\t\tinvariant(this.isSourceId(sourceId), 'Expected a valid source ID.')\n\t\tconst isPinned = includePinned && sourceId === this.pinnedSourceId\n\t\tconst source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId)\n\t\treturn source\n\t}\n\n\tpublic getTarget(targetId: string): DropTarget {\n\t\tinvariant(this.isTargetId(targetId), 'Expected a valid target ID.')\n\t\treturn this.dropTargets.get(targetId) as DropTarget\n\t}\n\n\tpublic getSourceType(sourceId: string): Identifier {\n\t\tinvariant(this.isSourceId(sourceId), 'Expected a valid source ID.')\n\t\treturn this.types.get(sourceId) as Identifier\n\t}\n\n\tpublic getTargetType(targetId: string): Identifier | Identifier[] {\n\t\tinvariant(this.isTargetId(targetId), 'Expected a valid target ID.')\n\t\treturn this.types.get(targetId) as Identifier | Identifier[]\n\t}\n\n\tpublic isSourceId(handlerId: string): boolean {\n\t\tconst role = parseRoleFromHandlerId(handlerId)\n\t\treturn role === HandlerRole.SOURCE\n\t}\n\n\tpublic isTargetId(handlerId: string): boolean {\n\t\tconst role = parseRoleFromHandlerId(handlerId)\n\t\treturn role === HandlerRole.TARGET\n\t}\n\n\tpublic removeSource(sourceId: string): void {\n\t\tinvariant(this.getSource(sourceId), 'Expected an existing source.')\n\t\tthis.store.dispatch(removeSource(sourceId))\n\t\tasap(() => {\n\t\t\tthis.dragSources.delete(sourceId)\n\t\t\tthis.types.delete(sourceId)\n\t\t})\n\t}\n\n\tpublic removeTarget(targetId: string): void {\n\t\tinvariant(this.getTarget(targetId), 'Expected an existing target.')\n\t\tthis.store.dispatch(removeTarget(targetId))\n\t\tthis.dropTargets.delete(targetId)\n\t\tthis.types.delete(targetId)\n\t}\n\n\tpublic pinSource(sourceId: string): void {\n\t\tconst source = this.getSource(sourceId)\n\t\tinvariant(source, 'Expected an existing source.')\n\n\t\tthis.pinnedSourceId = sourceId\n\t\tthis.pinnedSource = source\n\t}\n\n\tpublic unpinSource(): void {\n\t\tinvariant(this.pinnedSource, 'No source is pinned at the time.')\n\n\t\tthis.pinnedSourceId = null\n\t\tthis.pinnedSource = null\n\t}\n\n\tprivate addHandler(\n\t\trole: HandlerRole,\n\t\ttype: SourceType | TargetType,\n\t\thandler: DragSource | DropTarget,\n\t): string {\n\t\tconst id = getNextHandlerId(role)\n\t\tthis.types.set(id, type)\n\t\tif (role === HandlerRole.SOURCE) {\n\t\t\tthis.dragSources.set(id, handler as DragSource)\n\t\t} else if (role === HandlerRole.TARGET) {\n\t\t\tthis.dropTargets.set(id, handler as DropTarget)\n\t\t}\n\t\treturn id\n\t}\n}\n","import type { XYCoord } from '../interfaces.js'\n\nexport type EqualityCheck<T> = (a: T, b: T) => boolean\nexport const strictEquality = <T>(a: T, b: T): boolean => a === b\n\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\nexport function areCoordsEqual(\n\toffsetA: XYCoord | null | undefined,\n\toffsetB: XYCoord | null | undefined,\n): boolean {\n\tif (!offsetA && !offsetB) {\n\t\treturn true\n\t} else if (!offsetA || !offsetB) {\n\t\treturn false\n\t} else {\n\t\treturn offsetA.x === offsetB.x && offsetA.y === offsetB.y\n\t}\n}\n\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\nexport function areArraysEqual<T>(\n\ta: T[],\n\tb: T[],\n\tisEqual: EqualityCheck<T> = strictEquality,\n): boolean {\n\tif (a.length !== b.length) {\n\t\treturn false\n\t}\n\tfor (let i = 0; i < a.length; ++i) {\n\t\tif (!isEqual(a[i] as T, b[i] as T)) {\n\t\t\treturn false\n\t\t}\n\t}\n\treturn true\n}\n","import {\n\tBEGIN_DRAG,\n\tDROP,\n\tEND_DRAG,\n\tHOVER,\n\tPUBLISH_DRAG_SOURCE,\n} from '../actions/dragDrop/index.js'\nimport {\n\tADD_SOURCE,\n\tADD_TARGET,\n\tREMOVE_SOURCE,\n\tREMOVE_TARGET,\n} from '../actions/registry.js'\nimport type { Action } from '../interfaces.js'\nimport { ALL, NONE } from '../utils/dirtiness.js'\nimport { areArraysEqual } from '../utils/equality.js'\nimport { xor } from '../utils/js_utils.js'\n\nexport type State = string[]\n\nexport interface DirtyHandlerIdPayload {\n\ttargetIds: string[]\n\tprevTargetIds: string[]\n}\n\nexport function reduce(\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t_state: State = NONE,\n\taction: Action<DirtyHandlerIdPayload>,\n): State {\n\tswitch (action.type) {\n\t\tcase HOVER:\n\t\t\tbreak\n\t\tcase ADD_SOURCE:\n\t\tcase ADD_TARGET:\n\t\tcase REMOVE_TARGET:\n\t\tcase REMOVE_SOURCE:\n\t\t\treturn NONE\n\t\tcase BEGIN_DRAG:\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\tcase END_DRAG:\n\t\tcase DROP:\n\t\tdefault:\n\t\t\treturn ALL\n\t}\n\n\tconst { targetIds = [], prevTargetIds = [] } = action.payload\n\tconst result = xor(targetIds, prevTargetIds)\n\tconst didChange =\n\t\tresult.length > 0 || !areArraysEqual(targetIds, prevTargetIds)\n\n\tif (!didChange) {\n\t\treturn NONE\n\t}\n\n\t// Check the target ids at the innermost position. If they are valid, add them\n\t// to the result\n\tconst prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1]\n\tconst innermostTargetId = targetIds[targetIds.length - 1]\n\tif (prevInnermostTargetId !== innermostTargetId) {\n\t\tif (prevInnermostTargetId) {\n\t\t\tresult.push(prevInnermostTargetId)\n\t\t}\n\t\tif (innermostTargetId) {\n\t\t\tresult.push(innermostTargetId)\n\t\t}\n\t}\n\n\treturn result\n}\n","import {\n\tBEGIN_DRAG,\n\tDROP,\n\tEND_DRAG,\n\tHOVER,\n\tINIT_COORDS,\n} from '../actions/dragDrop/index.js'\nimport type { Action, XYCoord } from '../interfaces.js'\nimport { areCoordsEqual } from '../utils/equality.js'\n\nexport interface State {\n\tinitialSourceClientOffset: XYCoord | null\n\tinitialClientOffset: XYCoord | null\n\tclientOffset: XYCoord | null\n}\n\nconst initialState: State = {\n\tinitialSourceClientOffset: null,\n\tinitialClientOffset: null,\n\tclientOffset: null,\n}\n\nexport function reduce(\n\tstate: State = initialState,\n\taction: Action<{\n\t\tsourceClientOffset: XYCoord\n\t\tclientOffset: XYCoord\n\t}>,\n): State {\n\tconst { payload } = action\n\tswitch (action.type) {\n\t\tcase INIT_COORDS:\n\t\tcase BEGIN_DRAG:\n\t\t\treturn {\n\t\t\t\tinitialSourceClientOffset: payload.sourceClientOffset,\n\t\t\t\tinitialClientOffset: payload.clientOffset,\n\t\t\t\tclientOffset: payload.clientOffset,\n\t\t\t}\n\t\tcase HOVER:\n\t\t\tif (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n\t\t\t\treturn state\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tclientOffset: payload.clientOffset,\n\t\t\t}\n\t\tcase END_DRAG:\n\t\tcase DROP:\n\t\t\treturn initialState\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","import {\n\tBEGIN_DRAG,\n\tDROP,\n\tEND_DRAG,\n\tHOVER,\n\tPUBLISH_DRAG_SOURCE,\n} from '../actions/dragDrop/index.js'\nimport { REMOVE_TARGET } from '../actions/registry.js'\nimport type { Action, Identifier } from '../interfaces.js'\nimport { without } from '../utils/js_utils.js'\n\nexport interface State {\n\titemType: Identifier | Identifier[] | null\n\titem: any\n\tsourceId: string | null\n\ttargetIds: string[]\n\tdropResult: any\n\tdidDrop: boolean\n\tisSourcePublic: boolean | null\n}\n\nconst initialState: State = {\n\titemType: null,\n\titem: null,\n\tsourceId: null,\n\ttargetIds: [],\n\tdropResult: null,\n\tdidDrop: false,\n\tisSourcePublic: null,\n}\n\nexport function reduce(\n\tstate: State = initialState,\n\taction: Action<{\n\t\titemType: Identifier | Identifier[]\n\t\titem: any\n\t\tsourceId: string\n\t\ttargetId: string\n\t\ttargetIds: string[]\n\t\tisSourcePublic: boolean\n\t\tdropResult: any\n\t}>,\n): State {\n\tconst { payload } = action\n\tswitch (action.type) {\n\t\tcase BEGIN_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: payload.itemType,\n\t\t\t\titem: payload.item,\n\t\t\t\tsourceId: payload.sourceId,\n\t\t\t\tisSourcePublic: payload.isSourcePublic,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t}\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisSourcePublic: true,\n\t\t\t}\n\t\tcase HOVER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: payload.targetIds,\n\t\t\t}\n\t\tcase REMOVE_TARGET:\n\t\t\tif (state.targetIds.indexOf(payload.targetId) === -1) {\n\t\t\t\treturn state\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: without(state.targetIds, payload.targetId),\n\t\t\t}\n\t\tcase DROP:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdropResult: payload.dropResult,\n\t\t\t\tdidDrop: true,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tcase END_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: null,\n\t\t\t\titem: null,\n\t\t\t\tsourceId: null,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t\tisSourcePublic: null,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","import {\n\tADD_SOURCE,\n\tADD_TARGET,\n\tREMOVE_SOURCE,\n\tREMOVE_TARGET,\n} from '../actions/registry.js'\nimport type { Action } from '../interfaces.js'\n\nexport type State = number\n\nexport function reduce(state: State = 0, action: Action<any>): State {\n\tswitch (action.type) {\n\t\tcase ADD_SOURCE:\n\t\tcase ADD_TARGET:\n\t\t\treturn state + 1\n\t\tcase REMOVE_SOURCE:\n\t\tcase REMOVE_TARGET:\n\t\t\treturn state - 1\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","export type State = number\n\nexport function reduce(state: State = 0): State {\n\treturn state + 1\n}\n","import type { Action } from '../interfaces.js'\nimport { get } from '../utils/js_utils.js'\nimport type { State as DirtyHandlerIdsState } from './dirtyHandlerIds.js'\nimport { reduce as dirtyHandlerIds } from './dirtyHandlerIds.js'\nimport type { State as DragOffsetState } from './dragOffset.js'\nimport { reduce as dragOffset } from './dragOffset.js'\nimport type { State as DragOperationState } from './dragOperation.js'\nimport { reduce as dragOperation } from './dragOperation.js'\nimport type { State as RefCountState } from './refCount.js'\nimport { reduce as refCount } from './refCount.js'\nimport type { State as StateIdState } from './stateId.js'\nimport { reduce as stateId } from './stateId.js'\n\nexport interface State {\n\tdirtyHandlerIds: DirtyHandlerIdsState\n\tdragOffset: DragOffsetState\n\trefCount: RefCountState\n\tdragOperation: DragOperationState\n\tstateId: StateIdState\n}\n\nexport function reduce(state: State = {} as State, action: Action<any>): State {\n\treturn {\n\t\tdirtyHandlerIds: dirtyHandlerIds(state.dirtyHandlerIds, {\n\t\t\ttype: action.type,\n\t\t\tpayload: {\n\t\t\t\t...action.payload,\n\t\t\t\tprevTargetIds: get<string[]>(state, 'dragOperation.targetIds', []),\n\t\t\t},\n\t\t}),\n\t\tdragOffset: dragOffset(state.dragOffset, action),\n\t\trefCount: refCount(state.refCount, action),\n\t\tdragOperation: dragOperation(state.dragOperation, action),\n\t\tstateId: stateId(state.stateId),\n\t}\n}\n","import type { Store } from 'redux'\nimport { createStore } from 'redux'\n\nimport { DragDropManagerImpl } from './classes/DragDropManagerImpl.js'\nimport { DragDropMonitorImpl } from './classes/DragDropMonitorImpl.js'\nimport { HandlerRegistryImpl } from './classes/HandlerRegistryImpl.js'\nimport type { BackendFactory, DragDropManager } from './interfaces.js'\nimport type { State } from './reducers/index.js'\nimport { reduce } from './reducers/index.js'\n\nexport function createDragDropManager(\n\tbackendFactory: BackendFactory,\n\tglobalContext: unknown = undefined,\n\tbackendOptions: unknown = {},\n\tdebugMode = false,\n): DragDropManager {\n\tconst store = makeStoreInstance(debugMode)\n\tconst monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store))\n\tconst manager = new DragDropManagerImpl(store, monitor)\n\tconst backend = backendFactory(manager, globalContext, backendOptions)\n\tmanager.receiveBackend(backend)\n\treturn manager\n}\n\nfunction makeStoreInstance(debugMode: boolean): Store<State> {\n\t// TODO: if we ever make a react-native version of this,\n\t// we'll need to consider how to pull off dev-tooling\n\tconst reduxDevTools =\n\t\ttypeof window !== 'undefined' &&\n\t\t(window as any).__REDUX_DEVTOOLS_EXTENSION__\n\treturn createStore(\n\t\treduce,\n\t\tdebugMode &&\n\t\t\treduxDevTools &&\n\t\t\treduxDevTools({\n\t\t\t\tname: 'dnd-core',\n\t\t\t\tinstanceId: 'dnd-core',\n\t\t\t}),\n\t)\n}\n","import type { BackendFactory, DragDropManager } from 'dnd-core'\nimport { createDragDropManager } from 'dnd-core'\nimport type { FC, ReactNode } from 'react'\nimport { memo, useEffect } from 'react'\n\nimport { DndContext } from './DndContext.js'\n\nexport type DndProviderProps<BackendContext, BackendOptions> =\n\t| {\n\t\t\tchildren?: ReactNode\n\t\t\tmanager: DragDropManager\n\t  }\n\t| {\n\t\t\tbackend: BackendFactory\n\t\t\tchildren?: ReactNode\n\t\t\tcontext?: BackendContext\n\t\t\toptions?: BackendOptions\n\t\t\tdebugMode?: boolean\n\t  }\n\nlet refCount = 0\nconst INSTANCE_SYM = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__')\n\n/**\n * A React component that provides the React-DnD context\n */\nexport const DndProvider: FC<DndProviderProps<unknown, unknown>> = memo(\n\tfunction DndProvider({ children, ...props }) {\n\t\tconst [manager, isGlobalInstance] = getDndContextValue(props) // memoized from props\n\t\t/**\n\t\t * If the global context was used to store the DND context\n\t\t * then where theres no more references to it we should\n\t\t * clean it up to avoid memory leaks\n\t\t */\n\t\tuseEffect(() => {\n\t\t\tif (isGlobalInstance) {\n\t\t\t\tconst context = getGlobalContext()\n\t\t\t\t++refCount\n\n\t\t\t\treturn () => {\n\t\t\t\t\tif (--refCount === 0) {\n\t\t\t\t\t\tcontext[INSTANCE_SYM] = null\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn\n\t\t}, [])\n\n\t\treturn <DndContext.Provider value={manager}>{children}</DndContext.Provider>\n\t},\n)\n\nfunction getDndContextValue(props: DndProviderProps<unknown, unknown>) {\n\tif ('manager' in props) {\n\t\tconst manager = { dragDropManager: props.manager }\n\t\treturn [manager, false]\n\t}\n\n\tconst manager = createSingletonDndContext(\n\t\tprops.backend,\n\t\tprops.context,\n\t\tprops.options,\n\t\tprops.debugMode,\n\t)\n\tconst isGlobalInstance = !props.context\n\n\treturn [manager, isGlobalInstance]\n}\n\nfunction createSingletonDndContext<BackendContext, BackendOptions>(\n\tbackend: BackendFactory,\n\tcontext: BackendContext = getGlobalContext(),\n\toptions: BackendOptions,\n\tdebugMode?: boolean,\n) {\n\tconst ctx = context as any\n\tif (!ctx[INSTANCE_SYM]) {\n\t\tctx[INSTANCE_SYM] = {\n\t\t\tdragDropManager: createDragDropManager(\n\t\t\t\tbackend,\n\t\t\t\tcontext,\n\t\t\t\toptions,\n\t\t\t\tdebugMode,\n\t\t\t),\n\t\t}\n\t}\n\treturn ctx[INSTANCE_SYM]\n}\n\ndeclare const global: any\nfunction getGlobalContext() {\n\treturn typeof global !== 'undefined' ? global : (window as any)\n}\n"],"names":["_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","module","equal","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","memoize","fn","result","EnterLeaveCounter","isNodeInDocument","entered","this","enteringNode","previousLength","itemsA","itemsB","set","Set","insertItem","item","add","forEach","push","union","filter","node","contains","leavingNode","items","NativeDragSource","config","initializeExposedProperties","exposeProperties","property","defineProperty","configurable","enumerable","get","console","warn","dataTransfer","newProperties","propertyFn","value","matchesTypes","defineProperties","monitor","handle","getSourceId","FILE","URL","TEXT","HTML","getDataFromDataTransfer","typesToTry","defaultValue","reduce","resultSoFar","typeToTry","getData","nativeTypesConfig","NativeTypes","files","slice","html","urls","split","text","matchNativeItemType","dataTransferTypes","types","nativeItemType","typeConfig","some","t","indexOf","isFirefox","test","navigator","userAgent","isSafari","Boolean","window","safari","MonotonicInterpolant","xs","ys","indexes","sort","dx","dy","dys","dxs","ms","c1s","m2","mNext","dxNext","common","m","c2s","c3s","c1","invDx","x","mid","low","high","xHere","Math","floor","diff","max","diffSq","getNodeClientOffset","el","nodeType","parentElement","getBoundingClientRect","top","left","y","getEventClientOffset","e","clientX","clientY","getDragPreviewOffset","sourceNode","dragPreview","clientOffset","anchorPoint","offsetPoint","isImage","document","nodeName","documentElement","isImageNode","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","sourceWidth","offsetWidth","sourceHeight","offsetHeight","anchorX","anchorY","dragPreviewWidth","width","dragPreviewHeight","height","devicePixelRatio","getDragPreviewSize","offsetX","offsetY","isManualOffsetY","interpolate","calculateYOffset","OptionsReader","globalContext","options","ownerDocument","optionsArgs","ref","rootElement","emptyImage","HTML5BackendImpl","manager","sourcePreviewNodes","Map","sourcePreviewNodeOptions","sourceNodes","sourceNodeOptions","dragStartSourceIds","dropTargetIds","dragEnterTargetIds","currentNativeSource","currentNativeHandle","currentDragSourceNode","altKeyPressed","mouseMoveTimeoutTimer","asyncEndDragFrameId","dragOverTargetIds","lastClientOffset","hoverRafId","getSourceClientOffset","sourceId","endDragNativeItem","isDraggingNativeItem","actions","endDrag","registry","removeSource","body","endDragIfSourceWasRemovedFromDOM","clearCurrentDragSourceNode","isDragging","cancelHover","scheduleHover","requestAnimationFrame","hover","cancelAnimationFrame","handleTopDragStartCapture","handleTopDragStart","defaultPrevented","beginDrag","publishSource","nativeType","setDragImage","getCurrentSourcePreviewNodeOptions","dragPreviewOffset","setData","err","setCurrentDragSourceNode","target","captureDraggingState","publishDragSource","setTimeout","beginDragNativeItem","hasAttribute","preventDefault","handleTopDragEndCapture","handleTopDragEnterCapture","loadDataTransfer","enterLeaveCounter","enter","handleTopDragEnter","altKey","targetId","canDropOnTarget","dropEffect","getCurrentDropEffect","handleTopDragOverCapture","handleTopDragOver","handleTopDragLeaveCapture","leave","handleTopDropCapture","reset","handleTopDrop","drop","handleSelectStart","dragDrop","tagName","isContentEditable","getActions","getMonitor","getRegistry","ref1","size","root","undefined","__isReactDndBackendSetUp","Error","addEventListeners","removeEventListeners","delete","handleDragStart","setAttribute","addEventListener","removeEventListener","handleDragEnter","handleDragOver","handleDrop","_objectSpread","getCurrentSourceNodeOptions","itemType","getItemType","type","createNativeDragSource","addSource","clearTimeout","unshift","_e","HTML5Backend","context","useDragDropManager","dragDropManager","useContext","DndContext","invariant","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","useCollector","collect","onUpdate","useState","collected","setCollected","updateCollected","useCallback","nextValue","useCollectedProps","collector","connector","onCollect","handlerId","getHandlerId","subscribeToStateChange","handlerIds","useMonitorOutput","reconnect","useOptionalFactory","arg","deps","memoDeps","useMemo","useConnectDragSource","hooks","dragSource","useConnectDragPreview","shallowEqual","objA","objB","compare","compareContext","compareResult","keysA","keysB","bHasOwnProperty","bind","idx","valueA","valueB","isRef","obj","throwIfCompositeComponentElement","element","displayName","name","wrapConnectorHooks","wrappedHooks","hook","endsWith","wrappedHook","elementOrNode","isValidElement","cloneWithRef","wrapHookToRecognizeElement","setRef","current","newRef","previousRef","cloneElement","SourceConnector","backend","clearDragSource","dragSourceOptions","dragSourceRef","dragSourceNode","reconnectDragSource","clearDragPreview","dragPreviewOptions","dragPreviewRef","dragPreviewNode","reconnectDragPreview","dragSourceOptionsInternal","dragPreviewOptionsInternal","lastConnectedHandlerId","lastConnectedDragSource","lastConnectedDragSourceOptions","lastConnectedDragPreview","lastConnectedDragPreviewOptions","newHandlerId","didChange","didHandlerIdChange","didConnectedDragSourceChange","didDragSourceOptionsChange","disconnectDragSource","dragSourceUnsubscribe","connectDragSource","forceDidChange","didConnectedDragPreviewChange","didDragPreviewOptionsChange","disconnectDragPreview","dragPreviewUnsubscribe","connectDragPreview","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorImpl","internalMonitor","canDragSource","isDraggingSource","listener","isOverTarget","getTargetIds","isSourcePublic","subscribeToOffsetChange","getItem","getDropResult","didDrop","getInitialClientOffset","getInitialSourceClientOffset","getClientOffset","getDifferenceFromInitialOffset","DragSourceImpl","spec","canDrag","globalMonitor","end","useRegisteredDragSource","handler","useDragSource","useDragType","registerSource","unregister","receiveHandlerId","useDrag","specArg","begin","useDragSourceMonitor","getBackend","useDragSourceConnector","previewOptions","useConnectDropTarget","dropTarget","TargetConnector","clearDropTarget","dropTargetOptions","dropTargetRef","dropTargetNode","dropTargetOptionsInternal","lastConnectedDropTarget","lastConnectedDropTargetOptions","didDropTargetChange","didOptionsChange","disconnectDropTarget","unsubscribeDropTarget","connectDropTarget","isCallingCanDrop","DropTargetMonitorImpl","DropTargetImpl","canDrop","useRegisteredDropTarget","useDropTarget","accept","useAccept","addTarget","removeTarget","registerTarget","map","join","useDrop","useDropTargetMonitor","useDropTargetConnector","createTransition","event","check","TouchTransition","rawEvent","touches","PointerTransition","pointerType","_defineProperty","writable","_classPrivateFieldInitSpec","privateMap","privateCollection","has","TypeError","_checkPrivateRedeclaration","_classPrivateFieldGet","receiver","descriptor","_classApplyDescriptorGet","_classExtractFieldDescriptor","_classPrivateFieldSet","_classApplyDescriptorSet","action","_previews","WeakMap","PreviewListImpl","preview","index","splice","backendChanged","_current","_backends","_backendsList","_nodes","_createBackend","_addEventListeners","_removeEventListeners","_backendSwitcher","_callBackend","_connectBackend","MultiBackendImpl","_manager","_context","_options","_backend$preview","_backend$skipDispatch","concat","JSON","stringify","instance","id","inferName","transition","skipDispatchOnTransition","isSetUp","setup","teardown","profile","oldBackend","_event$target","unsubscribe","func","args","newBackend","newEvent","createEvent","initEvent","bubbles","cancelable","dispatchEvent","nodeId","backends","backendRecord","ListenerType","MultiFactory","mouse","touch","keyboard","_delay","delay","scrollAngleRanges","getDropTargetElementsAtPoint","_ignoreContextMenu","ignoreContextMenu","_enableHoverOutsideTarget","enableHoverOutsideTarget","_enableKeyboardEvents","enableKeyboardEvents","_enableMouseEvents","enableMouseEvents","_enableTouchEvents","enableTouchEvents","touchSlop","ref2","delayTouchStart","ref4","ref5","delayMouseStart","MouseButtons","MouseButton","eventShouldStartDrag","button","isTouchEvent","targetTouches","lastTargetTouchFallback","getEventClientTouchOffset","supportsPassive","supported","eventNames","start","move","contextmenu","keydown","TouchBackendImpl","handleTopMoveStartCapture","moveStartSourceIds","handleMoveStart","handleTopMoveStart","_mouseClientOffset","waitingForDelay","handleTopMoveStartDelay","timeout","handleTopMoveCapture","handleMove","_evt","handleTopMove","x1","y1","x2","y2","_isScrolling","angleRanges","angle","atan2","PI","ar","inAngleRanges","sqrt","pow","abs","installSourceNodeRemovalObserver","dragOverTargetNodes","targetNodes","elementsAtPoint","elementsFromPoint","elementsAtPointExtended","currentNode","orderedDragOverTargetIds","_getDropTargetId","ids","targetNode","reverse","next","done","handleTopMoveEndCapture","buttons","eventShouldEndDrag","uninstallSourceNodeRemovalObserver","handleCancelOnEscape","listenerTypes","getTopMoveStartHandler","subject","capture","passive","listenerType","evt","coords","droppedOn","elementFromPoint","childMatch","draggedSourceNode","draggedSourceNodeRemovalObserver","MutationObserver","resurrectSourceNode","observe","childList","style","display","removeAttribute","appendChild","disconnect","TouchBackend","Image","src","condition","format","isProduction","error","argIndex","replace","framesToPop","process","createContext","path","c","without","isObject","input","xor","count","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","setClientOffset","sourceClientOffset","payload","ResetCoordinatesAction","createBeginDrag","sourceIds","dispatch","verifyInvariants","getDraggableSource","verifyGetSourceClientOffsetIsFunction","getSource","verifyItemIsObject","pinSource","getSourceType","createDrop","targetIds","getDroppableTargets","dropResult","determineDropResult","getTarget","verifyDropResultType","createEndDrag","verifyIsDragging","unpinSource","matchesType","targetType","draggedItemType","createHover","targetIdsArg","verifyTargetIdsIsArray","removeNonMatchingTargetIds","checkInvariants","hoverAllTargets","lastIndexOf","getTargetType","createPublishDragSource","DragDropManagerImpl","store","handleRefCountChange","shouldSetUp","getState","refCount","subscribe","createDragDropActions","boundActions","actionCreator","apply","subtract","NONE","ALL","areDirty","dirtyIds","__IS_NONE__","__IS_ALL__","DragDropMonitorImpl","prevStateId","stateId","handleChange","state","currentStateId","dirtyHandlerIds","previousState","dragOffset","nextState","shallow","dragOperation","initialClientOffset","initialSourceClientOffset","scope","global","self","BrowserMutationObserver","WebKitMutationObserver","makeRequestCallFromTimer","callback","timeoutHandle","handleTimer","intervalHandle","setInterval","clearInterval","makeRequestCall","toggle","observer","createTextNode","characterData","data","AsapQueue","queue","pendingErrors","flushing","capacity","flush","q","currentIndex","scan","newLength","registerPendingError","requestErrorThrow","requestFlush","shift","task","RawTask","onError","release","TaskFactory","freeTasks","tasks","pop","asapQueue","taskFactory","HandlerRole","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","validateType","allowArray","SOURCE","TARGET","nextUniqueId","getNextHandlerId","role","parseRoleFromHandlerId","mapContainsValue","searchValue","entries","isDone","HandlerRegistryImpl","dragSources","dropTargets","pinnedSourceId","pinnedSource","validateSourceContract","addHandler","validateTargetContract","includePinned","isSourceId","isPinned","isTargetId","enqueueTask","create","strictEquality","areCoordsEqual","offsetA","offsetB","areArraysEqual","isEqual","prevTargetIds","prevInnermostTargetId","innermostTargetId","initialState","createDragDropManager","backendFactory","backendOptions","debugMode","makeStoreInstance","receiveBackend","reduxDevTools","__REDUX_DEVTOOLS_EXTENSION__","createStore","instanceId","INSTANCE_SYM","Symbol","for","DndProvider","memo","_param","children","props","getGlobalContext","ctx","createSingletonDndContext","isGlobalInstance","getDndContextValue","_objectWithoutProperties","_jsx"],"sourceRoot":""}