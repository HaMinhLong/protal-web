"use strict";(self.webpackChunkprotal_web=self.webpackChunkprotal_web||[]).push([[454],{50065:function(e,i,l){l.r(i),l.d(i,{default:function(){return $}});var t=l(1413),n=l(70885),d=l(72791),s=l(94667),o=l(93051),a=l(68931),r=l(32004),u=l(61889),c=l(64554),v=l(36151),m=l(96051),x=l(55705),h=l(53329),g=l(38926),Z=l(36370),f=l(62461),j=l(15405),p=l(99198),b=l(20958),y=l(45912),I=l(12069),w=l(68418),S=l(77630),k=l(20782),V=l(80184),C=function(e){var i,l,s,a=e.open,C=e.dataEdit,N=e.handleClose,F=e.getList,E=(0,o.I0)(),O=(0,d.useState)({}),P=(0,n.Z)(O,2),D=P[0],T=P[1],z=(0,d.useState)(!1),A=(0,n.Z)(z,2),L=A[0],_=A[1],J=(0,d.useState)({}),q=(0,n.Z)(J,2),Y=q[0],H=q[1];(0,d.useEffect)((function(){a&&(null!==C&&void 0!==C&&C.id?(_(!0),E({type:"article/getOne",payload:{id:null===C||void 0===C?void 0:C.id},callback:function(e){if(_(!1),!0===(null===e||void 0===e?void 0:e.success)){var i=e.results.list;T(i)}else!1===(null===e||void 0===e?void 0:e.success)&&(0,r.Z)("error",null===e||void 0===e?void 0:e.message)}})):T({}))}),[a]);var W=m.Ry().shape({title:m.Z_().trim().max(254).required("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 tin t\u1ee9c"),url:m.Z_().trim().max(254).required("Vui l\xf2ng nh\u1eadp url"),description:m.Z_().trim().max(1e3),author:m.Z_().trim().max(254),source:m.Z_().trim().max(254),label:m.Z_().trim().max(254),websiteId:m.Z_().required("Vui l\xf2ng ch\u1ecdn website"),categoryId:m.Z_().required("Vui l\xf2ng ch\u1ecdn chuy\xean m\u1ee5c")}),B=(0,x.TA)({enableReinitialize:!0,initialValues:{title:(null===D||void 0===D?void 0:D.title)||"",description:(null===D||void 0===D?void 0:D.description)||"",content:(null===D||void 0===D?void 0:D.content)||"",url:(null===D||void 0===D?void 0:D.url)||"",author:(null===D||void 0===D?void 0:D.author)||"",source:(null===D||void 0===D?void 0:D.source)||"",label:(null===D||void 0===D?void 0:D.label)||"",images:(null===D||void 0===D?void 0:D.images)||"",websiteId:(null===D||void 0===D?void 0:D.websiteId)||"",categoryId:(null===D||void 0===D?void 0:D.categoryId)||"",categoryName:(null===D||void 0===D||null===(i=D.category)||void 0===i?void 0:i.text)||"",status:0===(null===D||void 0===D?void 0:D.status)?0:1},validationSchema:W,onSubmit:function(e){M(e)}}),M=function(e){var i,l;_(!0);var n=(0,t.Z)((0,t.Z)({},e),{},{title:null===e||void 0===e||null===(i=e.title)||void 0===i?void 0:i.trim(),titleOld:null===D||void 0===D||null===(l=D.title)||void 0===l?void 0:l.trim()});null!==D&&void 0!==D&&D.id?E({type:"article/update",payload:{id:null===D||void 0===D?void 0:D.id,params:n},callback:function(e){null!==e&&void 0!==e&&e.success?((0,r.Z)("success",null===e||void 0===e?void 0:e.message),F(),R()):(H(e.error),(0,r.Z)("error",e.message)),_(!1)}}):E({type:"article/add",payload:n,callback:function(e){_(!1),null!==e&&void 0!==e&&e.success?((0,r.Z)("success",null===e||void 0===e?void 0:e.message),F(),R()):(H(e.error),(0,r.Z)("error",e.message))}})},R=function(){N(),B.resetForm(),B.setTouched({},!1),H({})},X=[{value:0,label:"Th\xf4ng tin c\u01a1 b\u1ea3n",tab:(0,V.jsxs)(u.ZP,{container:!0,spacing:3,children:[(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:8,children:(0,V.jsx)(j.Z,{name:"title",formik:B,errors:Y,required:!0,label:"T\xean tin t\u1ee9c",handleChange:function(e){!function(e){var i,l,t=(0,w.CQ)(e),n=null===t||void 0===t||null===(i=t.split(" "))||void 0===i||null===(l=i.join("-"))||void 0===l?void 0:l.toLowerCase();B.setFieldValue("url",n)}(e)}})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,V.jsx)(j.Z,{name:"url",formik:B,errors:Y,required:!0,label:"\u0110\u01b0\u1eddng d\u1eabn"})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,V.jsx)(j.Z,{name:"author",formik:B,errors:Y,label:"T\xe1c gi\u1ea3"})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,V.jsx)(j.Z,{name:"source",formik:B,errors:Y,label:"Ngu\xf4n"})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,V.jsx)(j.Z,{name:"label",formik:B,errors:Y,label:"Nh\xe3n"})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,V.jsx)(b.Z,{formik:B,setFieldValue:B.setFieldValue,addOrEdit:!0,handleChange:function(){B.setFieldValue("categoryId",""),B.setFieldValue("categoryName","")}})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,V.jsx)(y.Z,{formik:B,setFieldValue:B.setFieldValue,addOrEdit:!0,websiteId:null===B||void 0===B||null===(l=B.values)||void 0===l?void 0:l.websiteId})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,V.jsx)(f.Z,{addOrEdit:!1,formik:B,setFieldValue:B.setFieldValue})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:8,children:(0,V.jsx)(j.Z,{name:"description",formik:B,errors:Y,label:"N\u1ed9i dung ng\u1eafn",multiline:!0,rows:6})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,V.jsx)(k.Z,{image:B.values.images,setFieldValue:B.setFieldValue,field:"images",multiple:!0})})]})},{value:1,label:"N\u1ed9i dung",tab:(0,V.jsx)(I.Z,{handleChange:function(e){null===B||void 0===B||B.setFieldValue("content",e)},data:null===B||void 0===B||null===(s=B.values)||void 0===s?void 0:s.content})}];return(0,V.jsx)(Z.Z,{open:a,title:null!==D&&void 0!==D&&D.id?"C\u1eadp nh\u1eadt th\xf4ng tin ".concat(null===D||void 0===D?void 0:D.title):"Th\xeam m\u1edbi tin t\u1ee9c",handleClose:function(){R()},styleBox:{minWidth:"1300px",minHeight:"700px"},styleChildBox:{p:"0px 30px 20px"},styleTitle:{p:"10px 30px"},showButtonCloseDialog:!0,children:(0,V.jsxs)(c.Z,{children:[(0,V.jsxs)("form",{onSubmit:B.handleSubmit,children:[(0,V.jsx)(S.Z,{tabWrapper:X}),(0,V.jsxs)(c.Z,{sx:{mt:3,display:"flex",justifyContent:"center"},children:[(0,V.jsx)(v.Z,{onClick:function(){return R()},size:"small",variant:"outlined",sx:{mr:"10px"},endIcon:(0,V.jsx)(g.Z,{}),children:"H\u1ee7y"}),(0,V.jsx)(v.Z,{size:"small",variant:"contained",type:"submit",endIcon:(0,V.jsx)(h.Z,{}),children:"L\u01b0u l\u1ea1i"})]})]}),L&&(0,V.jsx)(p.Z,{})]})})},N=l(5403),F=l(42419),E=Number("20"),O=function(e){var i,l,t,n,d,s,c=e.setDataEdit,m=e.setVisibleDrawer,h=e.setLoading,g=(0,o.I0)(),Z=(0,o.v9)(a.Y2),p=(0,x.TA)({enableReinitialize:!0,initialValues:{title:(null===Z||void 0===Z||null===(i=Z.filter)||void 0===i?void 0:i.title)||"",websiteId:(null===Z||void 0===Z||null===(l=Z.filter)||void 0===l?void 0:l.websiteId)||"",categoryId:(null===Z||void 0===Z||null===(t=Z.filter)||void 0===t?void 0:t.categoryId)||"",categoryName:(null===Z||void 0===Z||null===(n=Z.filter)||void 0===n?void 0:n.categoryName)||"",status:(null===Z||void 0===Z||null===(d=Z.filter)||void 0===d?void 0:d.status)||""},onSubmit:function(e){I(e)}}),I=function(e){var i,l;h(!0);var t={title:null===e||void 0===e||null===(i=e.title)||void 0===i?void 0:i.trim(),websiteId:null===e||void 0===e?void 0:e.websiteId,categoryId:null===e||void 0===e?void 0:e.categoryId,status:"".concat(null===e||void 0===e?void 0:e.status)};null!==e&&void 0!==e&&null!==(l=e.title)&&void 0!==l&&l.trim()||delete t.title,null!==e&&void 0!==e&&e.websiteId||delete t.websiteId,null!==e&&void 0!==e&&e.categoryId||(delete t.categoryId,delete t.categoryName),null!==e&&void 0!==e&&e.status||delete t.status;var n={filter:JSON.stringify(t),range:JSON.stringify([0,E]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,title,websiteId,categoryId,author,source,status,createdAt"};g((0,a.hX)(e)),g({type:"article/fetch",payload:n,callback:function(e){h(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,r.Z)("error",null===e||void 0===e?void 0:e.message)}})};return(0,V.jsx)("form",{onSubmit:p.handleSubmit,children:(0,V.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,V.jsx)(j.Z,{name:"title",formik:p,label:"T\xean tin t\u1ee9c"})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,V.jsx)(b.Z,{formik:p,setFieldValue:p.setFieldValue,addOrEdit:!1,handleChange:function(){p.setFieldValue("categoryId",""),p.setFieldValue("categoryName","")}})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,V.jsx)(y.Z,{formik:p,setFieldValue:p.setFieldValue,addOrEdit:!1,websiteId:null===p||void 0===p||null===(s=p.values)||void 0===s?void 0:s.websiteId})}),(0,V.jsx)(u.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,V.jsx)(f.Z,{addOrEdit:!1,formik:p,setFieldValue:p.setFieldValue})}),(0,V.jsxs)(u.ZP,{item:!0,xs:12,md:12,lg:12,sx:{display:"flex",justifyContent:"flex-end"},children:[(0,V.jsx)(v.Z,{variant:"contained",endIcon:(0,V.jsx)(N.Z,{}),type:"submit",children:"T\xecm ki\u1ebfm"}),(0,V.jsx)(v.Z,{variant:"outlined",color:"success",endIcon:(0,V.jsx)(F.Z,{}),sx:{ml:2},onClick:function(){c({}),m(!0)},children:"Th\xeam m\u1edbi"})]})]})})},P=l(95193),D=l(35855),T=l(53994),z=l(20890),A=l(39281),L=l(79836),_=l(56890),J=l(53382),q=l(57246),Y=l(13967),H=l(41286),W=l(27247),B=l(79472),M=l(39987),R=l(58357),X=l(72426),Q=l.n(X),G=Number("20"),K=function(e){var i=e.dataEdit,l=e.setDataEdit,s=e.setVisibleDrawer,u=e.loading,m=e.setLoading,x=e.getList,h=(0,o.I0)(),g=(0,Y.Z)(),Z=(0,P.Z)(g.breakpoints.down("md")),f=(0,o.v9)(a.Y2),j=f.data.list,b=f.data.pagination,y=(0,d.useState)(!1),I=(0,n.Z)(y,2),w=I[0],S=I[1],k=function(e,i){h({type:"article/updateStatus",payload:{id:i,params:{status:e}},callback:function(e){!0===(null===e||void 0===e?void 0:e.success)?(0,r.Z)("success",null===e||void 0===e?void 0:e.message):(0,r.Z)("error",null===e||void 0===e?void 0:e.message)}})},C=function(e){return(0,V.jsx)(M.Z,{status:null===e||void 0===e?void 0:e.status,id:null===e||void 0===e?void 0:e.id,handleStatus:k})},N=function(e){return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(v.Z,{size:"small",variant:"outlined",endIcon:(0,V.jsx)(H.Z,{}),onClick:function(){l(e),s(!0)},children:"S\u1eeda"}),(0,V.jsx)(v.Z,{size:"small",variant:"outlined",color:"error",sx:{ml:1},endIcon:(0,V.jsx)(W.Z,{}),onClick:function(){S(!0),l(e)},children:"X\xf3a"})]})};return(0,V.jsxs)(c.Z,{sx:{position:"relative",pb:2},children:[(0,V.jsxs)(A.Z,{sx:{overflow:"auto"},children:[(0,V.jsxs)(L.Z,{children:[(0,V.jsx)(_.Z,{children:function(){var e={whiteSpace:"nowrap",fontWeight:"bold"};return(0,V.jsxs)(D.Z,{children:[(0,V.jsx)(T.Z,{sx:(0,t.Z)((0,t.Z)({},e),{},{width:"5%"}),align:"center",children:"#"}),(0,V.jsx)(T.Z,{sx:e,children:"T\xean tin t\u1ee9c"}),(0,V.jsx)(T.Z,{sx:e,children:"Website"}),(0,V.jsx)(T.Z,{sx:e,children:"Chuy\xean m\u1ee5c"}),(0,V.jsx)(T.Z,{sx:e,children:"T\xe1c gi\u1ea3"}),(0,V.jsx)(T.Z,{sx:e,children:"Ng\xe0y t\u1ea1o"}),(0,V.jsx)(T.Z,{sx:e,children:"Tr\u1ea1ng th\xe1i"}),(0,V.jsx)(T.Z,{align:"right",sx:e,children:"H\xe0nh \u0111\u1ed9ng"})]})}()}),(0,V.jsx)(J.Z,{children:null===j||void 0===j?void 0:j.map((function(e,i){return function(e,i){var l,t;return(0,V.jsxs)(D.Z,{hover:!0,children:[(0,V.jsx)(T.Z,{sx:{width:"5%"},align:"center",children:(0,V.jsx)(z.Z,{variant:"body2",children:i+G*((null===b||void 0===b?void 0:b.current)-1)+1})}),(0,V.jsx)(T.Z,{sx:{width:"20%",overflow:"hidden",maxWidth:300},component:"th",scope:"row",children:null===e||void 0===e?void 0:e.title}),(0,V.jsx)(T.Z,{children:null===e||void 0===e||null===(l=e.website)||void 0===l?void 0:l.name}),(0,V.jsx)(T.Z,{children:null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.text}),(0,V.jsx)(T.Z,{children:null===e||void 0===e?void 0:e.author}),(0,V.jsx)(T.Z,{children:Q()(null===e||void 0===e?void 0:e.createdAt).format("DD/MM/YYYY HH:mm")}),(0,V.jsx)(T.Z,{children:C(e)}),(0,V.jsx)(T.Z,{align:"right",children:N(e)})]},e.id)}(e,i)}))})]}),(null===j||void 0===j?void 0:j.length)>0&&(0,V.jsx)(q.Z,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},size:Z?"small":"medium",count:Math.floor((null===b||void 0===b?void 0:b.total)/(null===b||void 0===b?void 0:b.pageSize))+1,page:null===b||void 0===b?void 0:b.current,color:"primary",shape:"rounded",onChange:function(e,i){var l,t;m(!0);var n=f.filter,d={name:null===n||void 0===n||null===(l=n.name)||void 0===l?void 0:l.trim(),status:null===n||void 0===n?void 0:n.status};null!==n&&void 0!==n&&null!==(t=n.name)&&void 0!==t&&t.trim()||delete d.name,""===(null===n||void 0===n?void 0:n.status)&&delete d.status;var s={filter:JSON.stringify(d),range:JSON.stringify([i*b.pageSize-b.pageSize,i*b.pageSize]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,title,websiteId,categoryId,author,source,status,createdAt"};h({type:"article/fetch",payload:s,callback:function(e){m(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,r.Z)("error",null===e||void 0===e?void 0:e.message)}})}})]}),0===(null===j||void 0===j?void 0:j.length)&&(0,V.jsx)(B.Z,{}),u&&(0,V.jsx)(p.Z,{}),w&&(0,V.jsx)(R.Z,{name:null===i||void 0===i?void 0:i.title,open:w,handleClose:function(e){S(!1),e&&h({type:"article/delete",payload:{id:null===i||void 0===i?void 0:i.id},callback:function(e){!0===(null===e||void 0===e?void 0:e.success)?((0,r.Z)("success",null===e||void 0===e?void 0:e.message),x()):!1===(null===e||void 0===e?void 0:e.success)&&(0,r.Z)("error",e&&e.message)}})}})]})},U=Number("20"),$=function(){var e=(0,o.I0)(),i=(0,o.v9)(a.Y2),l=(0,d.useState)(!1),u=(0,n.Z)(l,2),c=u[0],v=u[1],m=(0,d.useState)(!1),x=(0,n.Z)(m,2),h=x[0],g=x[1],Z=(0,d.useState)({id:0,title:"",description:"",createdAt:"",status:0}),f=(0,n.Z)(Z,2),j=f[0],p=f[1];(0,d.useEffect)((function(){b()}),[]);var b=function(){v(!0);var l=i.query,n=i.filter,d={filter:JSON.stringify({}),range:JSON.stringify([0,U]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,title,websiteId,categoryId,author,source,status,createdAt"};"{}"!==(null===l||void 0===l?void 0:l.filter)&&(d=(0,t.Z)((0,t.Z)({},d),{},{filter:null===l||void 0===l?void 0:l.filter})),"{}"!==(null===l||void 0===l?void 0:l.range)&&(d=(0,t.Z)((0,t.Z)({},d),{},{range:null===l||void 0===l?void 0:l.range})),"{}"!==(null===l||void 0===l?void 0:l.sort)&&(d=(0,t.Z)((0,t.Z)({},d),{},{sort:null===l||void 0===l?void 0:l.sort})),e((0,a.hX)(n)),e({type:"article/fetch",payload:d,callback:function(e){v(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,r.Z)("error",null===e||void 0===e?void 0:e.message)}})};return(0,V.jsxs)(s.Z,{title:(0,V.jsx)(O,{setDataEdit:p,setVisibleDrawer:g,setLoading:v}),content:!1,children:[(0,V.jsx)(K,{getList:b,dataEdit:j,setDataEdit:p,setVisibleDrawer:g,loading:c,setLoading:v}),(0,V.jsx)(C,{open:h,dataEdit:j,handleClose:function(){return g(!1)},getList:b})]})}}}]);
//# sourceMappingURL=454.0871a83d.chunk.js.map