"use strict";(self.webpackChunkprotal_web=self.webpackChunkprotal_web||[]).push([[606],{45912:function(e,i,n){var l=n(70885),t=n(1413),o=n(4942),d=n(72791),r=n(20890),a=n(95193),s=n(22293),u=n(47071),c=n(15473),v=n(65902),h=n(83090),f=n(6748),x=n(28182),m=n(13967),p=n(81131),g=n(38996),Z=n(29388),b=n(93051),j=n(80184),y=d.forwardRef((function(e,i){var n,l=e.classes,t=e.className,d=e.label,a=e.nodeId,s=e.icon,u=e.expansionIcon,c=e.displayIcon,h=(0,v.Z)(a),f=h.disabled,m=h.expanded,p=h.selected,g=h.focused,Z=h.handleExpansion,b=h.handleSelection,y=h.preventSelection,w=s||u||c;return(0,j.jsxs)("div",{className:(0,x.Z)(t,l.root,(n={},(0,o.Z)(n,l.expanded,m),(0,o.Z)(n,l.selected,p),(0,o.Z)(n,l.focused,g),(0,o.Z)(n,l.disabled,f),n)),onMouseDown:function(e){y(e)},ref:i,style:{padding:"3px 0"},children:[(0,j.jsx)("div",{onClick:function(e){Z(e)},className:l.iconContainer,children:w}),(0,j.jsx)(r.Z,{onClick:function(e){b(e)},component:"div",className:l.label,children:d})]})})),w=function(e){return(0,j.jsx)(h.Z,(0,t.Z)({ContentComponent:y},e))};i.Z=function(e){var i,n,t,o=e.formik,r=e.setFieldValue,v=e.addOrEdit,h=e.websiteId,x=e.categoryGroupId,y=(0,b.I0)(),I=(0,m.Z)(),S=(0,a.Z)(I.breakpoints.down("xl")),C=(0,a.Z)(I.breakpoints.down("lg")),k=(0,d.useState)([]),N=(0,l.Z)(k,2),z=N[0],O=N[1];(0,d.useEffect)((function(){h?F():O([])}),[h]);var E=function(e,i){e.hasOwnProperty("children")?e.children.push(i):e.children=[i]},F=function(){y({type:"category/fetchLazyLoading",payload:{filter:JSON.stringify({status:1,websiteId:h,categoryGroupId:x||""}),range:JSON.stringify([0,300])},callback:function(e){if(null!==e&&void 0!==e&&e.success){for(var i=(null===e||void 0===e?void 0:e.results).list,n=0;n<i.length-1;n++)for(var l=i[n],t=n+1;t<i.length;t++){var o=i[t];l.id===o.parent?E(l,o):o.id===l.parent&&E(o,l)}var d=i.filter((function(e){return!e.parent}));O(d)}}})},P=d.useState(null),V=(0,l.Z)(P,2),M=V[0],D=V[1],T=(0,d.useState)(""),B=(0,l.Z)(T,2),J=B[0],A=B[1],L=(0,d.useState)((null===o||void 0===o||null===(i=o.values)||void 0===i?void 0:i.categoryName)||""),W=(0,l.Z)(L,2),R=W[0],H=W[1];(0,d.useEffect)((function(){var e;H((null===o||void 0===o||null===(e=o.values)||void 0===e?void 0:e.categoryName)||"")}),[null===o||void 0===o||null===(n=o.values)||void 0===n?void 0:n.categoryName]);var q=function(){D(null)},G=Boolean(M),Y=G?"simple-popover":void 0,_=function e(i){return(0,j.jsx)(w,{nodeId:i.id,label:i.text,children:Array.isArray(i.children)?i.children.map((function(i){return e(i)})):null},i.id)};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(s.Z,{size:"small",required:!1,label:v?(0,j.jsxs)("span",{className:"input-label",children:["Chuy\xean m\u1ee5c ",(0,j.jsx)("span",{children:" *"})]}):"Chuy\xean m\u1ee5c",name:"categoryId",id:"categoryId",defaultValue:R,value:R,onClick:function(e){D(e.currentTarget)},sx:{width:"100%"},error:o.touched.categoryId&&Boolean(null===(t=o.errors)||void 0===t?void 0:t.categoryId)}),o.touched.categoryId&&o.errors.categoryId&&(0,j.jsxs)(u.Z,{error:!0,className:"error-custom",children:[(0,j.jsx)(Z.Z,{fontSize:"small",sx:{mr:.5,width:"18px",height:"18px"}}),o.errors.categoryId]}),(0,j.jsx)(c.ZP,{id:Y,open:G,anchorEl:M,onClose:q,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,j.jsx)(f.Z,{"aria-label":"icon expansion",defaultSelected:J,selected:J,defaultCollapseIcon:(0,j.jsx)(p.Z,{}),defaultExpandIcon:(0,j.jsx)(g.Z,{}),onNodeSelect:function(e,i){A(i),r("categoryId",i),r("categoryName",e.target.innerText),H(e.target.innerText),q()},sx:{maxHeight:300,flexGrow:1,width:C?"445px":S?"240px":"300px",overflowY:"auto",p:"5px 10px"},children:null===z||void 0===z?void 0:z.map((function(e){return _(e)}))})})]})}},73202:function(e,i,n){var l=n(1413),t=n(70885),o=n(72791),d=n(14868),r=n(64554),a=n(22293),s=n(47071),u=n(29388),c=n(93051),v=n(80184);i.Z=function(e){var i,n,h=e.formik,f=e.addOrEdit,x=e.handleChange,m=e.websiteId,p=e.categoryId,g=e.productsSelected,Z=e.fetchData,b=(0,c.I0)(),j=(0,o.useState)([]),y=(0,t.Z)(j,2),w=y[0],I=y[1];(0,o.useEffect)((function(){I(null===w||void 0===w?void 0:w.filter((function(e){return!(null!==g&&void 0!==g&&g.includes(null===e||void 0===e?void 0:e.value))})))}),[g]),(0,o.useEffect)((function(){S()}),[p,Z,m]),(0,o.useEffect)((function(){S()}),[]);var S=function(){b({type:"product/fetchLazyLoading",payload:{filter:JSON.stringify({status:1,websiteId:m,categoryId:p||""}),range:JSON.stringify([0,1e3])},callback:function(e){var i=(null===e||void 0===e?void 0:e.results).list,n=null===i||void 0===i?void 0:i.map((function(e){return{price:e.price,images:e.images,negotiablePrice:e.negotiablePrice,value:e.id,label:e.name}}));I(g?null===n||void 0===n?void 0:n.filter((function(e){return!(null!==g&&void 0!==g&&g.includes(null===e||void 0===e?void 0:e.value))})):n)}})};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.Z,{fullWidth:!0,size:"small",disablePortal:!0,id:"combo-box-demo",value:{value:g?"":null===h||void 0===h||null===(i=h.values)||void 0===i?void 0:i.productId,label:g?"":null===h||void 0===h||null===(n=h.values)||void 0===n?void 0:n.productName},options:w,disableClearable:f,renderOption:function(e,i){var n,t;return(0,v.jsxs)(r.Z,(0,l.Z)((0,l.Z)({component:"li",sx:{"& > img":{mr:2,flexShrink:0}}},e),{},{children:[(0,v.jsx)("img",{loading:"lazy",width:"20",src:"".concat("https://cms-protal-sever.naru.software").concat(null===w||void 0===w||null===(n=w.find((function(e){return e.value===i.value})))||void 0===n||null===(t=n.images)||void 0===t?void 0:t.split(",")[0]),alt:null===i||void 0===i?void 0:i.label}),i.label]}))},renderInput:function(e){var i;return(0,v.jsx)(a.Z,(0,l.Z)((0,l.Z)({},e),{},{name:"productId",label:f?(0,v.jsxs)("span",{className:"input-label",children:["S\u1ea3n ph\u1ea9m ",(0,v.jsx)("span",{children:" *"})]}):"S\u1ea3n ph\u1ea9m",error:h.touched.productId&&Boolean(null===(i=h.errors)||void 0===i?void 0:i.productId)}))},onChange:function(e,i){x&&x(i)}}),h.touched.productId&&h.errors.productId&&(0,v.jsxs)(s.Z,{error:!0,className:"error-custom",children:[(0,v.jsx)(u.Z,{fontSize:"small",sx:{mr:.5,width:"18px",height:"18px"}}),h.errors.productId]})]})}},62461:function(e,i,n){n.d(i,{Z:function(){return a}});var l=n(1413),t=n(14868),o=n(22293),d=[{value:"",label:"T\u1ea5t c\u1ea3"},{value:1,label:"K\xedch ho\u1ea1t"},{value:0,label:"B\u1ecb \u1ea9n"}],r=n(80184),a=function(e){var i=e.formik,n=e.setFieldValue,a=e.addOrEdit;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(t.Z,{fullWidth:!0,size:"small",disablePortal:!0,disableClearable:!0,id:"combo-box-demo",value:null===d||void 0===d?void 0:d.filter((function(e){var n;return e.value===(null===i||void 0===i||null===(n=i.values)||void 0===n?void 0:n.status)}))[0],options:a?d.filter((function(e){return""!==e.value})):d,renderInput:function(e){return(0,r.jsx)(o.Z,(0,l.Z)((0,l.Z)({},e),{},{label:"Tr\u1ea1ng th\xe1i"}))},onChange:function(e,i){return n("status",null===i||void 0===i?void 0:i.value)}})})}},20958:function(e,i,n){var l=n(1413),t=n(70885),o=n(72791),d=n(14868),r=n(22293),a=n(47071),s=n(29388),u=n(93051),c=n(9478),v=n(80184);i.Z=function(e){var i=e.formik,n=e.setFieldValue,h=e.addOrEdit,f=e.readOnly,x=e.handleChange,m=(0,u.I0)(),p=(0,o.useState)([]),g=(0,t.Z)(p,2),Z=g[0],b=g[1],j=JSON.parse(localStorage.getItem("user")||"{}");(0,o.useEffect)((function(){(null===j||void 0===j?void 0:j.userGroupId)===c.hi?w():y()}),[]);var y=function(){m({type:"website/fetchLazyLoading",payload:{filter:JSON.stringify({status:1}),range:JSON.stringify([0,50])},callback:function(e){var i=(null===e||void 0===e?void 0:e.results).list,n=null===i||void 0===i?void 0:i.map((function(e){return{value:e.id,label:e.name}}));b(n)}})},w=function(){m({type:"websiteUser/fetch",payload:{id:j.id},callback:function(e){if(null!==e&&void 0!==e&&e.success){var i,n,l=e.results.list,t=null===l||void 0===l||null===(i=l[0])||void 0===i||null===(n=i.websites)||void 0===n?void 0:n.map((function(e){return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name}}));b(t)}}})};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.Z,{fullWidth:!0,size:"small",disablePortal:!0,id:"combo-box-demo",value:(null===Z||void 0===Z?void 0:Z.length)>0?null===Z||void 0===Z?void 0:Z.filter((function(e){var n;return e.value===(null===i||void 0===i||null===(n=i.values)||void 0===n?void 0:n.websiteId)}))[0]:{value:"",label:""},readOnly:f,options:Z,disableClearable:h,renderInput:function(e){var n;return(0,v.jsx)(r.Z,(0,l.Z)((0,l.Z)({},e),{},{name:"websiteId",label:h?(0,v.jsxs)("span",{className:"input-label",children:["Website ",(0,v.jsx)("span",{children:" *"})]}):"Website",error:i.touched.websiteId&&Boolean(null===(n=i.errors)||void 0===n?void 0:n.websiteId)}))},onChange:function(e,i){n("websiteId",null===i||void 0===i?void 0:i.value),x&&x()}}),i.touched.websiteId&&i.errors.websiteId&&(0,v.jsxs)(a.Z,{error:!0,className:"error-custom",children:[(0,v.jsx)(s.Z,{fontSize:"small",sx:{mr:.5,width:"18px",height:"18px"}}),i.errors.websiteId]})]})}},58357:function(e,i,n){n.d(i,{Z:function(){return a}});var l=n(5289),t=n(65661),o=n(97123),d=n(36151),r=n(80184);function a(e){var i=e.name,n=e.open,a=e.handleClose;return(0,r.jsx)(l.Z,{open:n,onClose:function(){return a(!1)},keepMounted:!0,maxWidth:"xs","aria-labelledby":"item-delete-title","aria-describedby":"item-delete-description",children:n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.Z,{id:"item-delete-title",children:(0,r.jsxs)("p",{children:[i," - B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a kh\xf4ng?"]})})," ",(0,r.jsxs)(o.Z,{sx:{mr:2},children:[(0,r.jsx)(d.Z,{size:"small",onClick:function(){return a(!1)},variant:"outlined",children:"H\u1ee7y"}),(0,r.jsx)(d.Z,{variant:"contained",onClick:function(){return a(!0)},autoFocus:!0,size:"small",children:"X\xf3a"})]})]})})}},36370:function(e,i,n){var l=n(1413),t=(n(72791),n(95193)),o=n(5289),d=n(64554),r=n(39157),a=n(20890),s=n(13400),u=n(13967),c=n(5130),v=n(80184);i.Z=function(e){var i=e.children,n=e.title,h=e.open,f=e.handleClose,x=e.styleDialog,m=e.styleBox,p=e.styleTitle,g=e.styleChildBox,Z=e.showButtonCloseDialog,b=(0,u.Z)(),j=(0,t.Z)(b.breakpoints.down("sm")),y=(0,t.Z)(b.breakpoints.down("lg"));return(0,v.jsx)(o.Z,{open:h,onClose:function(){return f()},keepMounted:!0,"aria-labelledby":"item-delete-title","aria-describedby":"item-delete-description",fullScreen:!0,sx:{"&>div:nth-of-type(3)":{"&>div":(0,l.Z)({m:0,borderRadius:j?"0px":"15px",width:j?"100%":"auto",height:j?"100vh":"auto",background:"#F9FAFB"},x)}},children:h&&(0,v.jsx)(d.Z,{children:(0,v.jsxs)(r.Z,{sx:(0,l.Z)({maxHeight:"90vh",minHeight:"450px",overflowY:"auto",p:"0px",position:"relative",width:j?"100%":y?"750px":"800px"},m),children:[(0,v.jsxs)(d.Z,{sx:(0,l.Z)({position:"sticky",top:0,borderBottom:"1px solid #BCC7D2",pb:1,width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#F9FAFB",zIndex:9999},p),children:[(0,v.jsx)(a.Z,{sx:{fontSize:"18px",fontWeight:600,"&:first-letter":{textTransform:"capitalize"}},children:n}),Z&&(0,v.jsx)(s.Z,{onClick:function(){return f()},size:"small",children:(0,v.jsx)(c.Z,{fontSize:"small"})})]}),(0,v.jsx)(d.Z,{sx:(0,l.Z)({},g),className:"box-popup",children:i})]})})})}},99198:function(e,i,n){var l=n(80184);i.Z=function(){return(0,l.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(214, 214, 214, 0.2)",zIndex:9999},children:(0,l.jsx)("div",{className:"lds-hourglass"})})}},79472:function(e,i,n){var l=n(13967),t=n(47524),o=n(80184);i.Z=function(){var e=(0,l.Z)();return(0,o.jsxs)("div",{className:"noData",children:[(0,o.jsx)(t.Z,{sx:{mr:1,color:e.palette.primary.dark}}),(0,o.jsx)("p",{style:{fontSize:"14px"},children:"Kh\xf4ng c\xf3 b\u1ea3n ghi n\xe0o \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb"})]})}},39987:function(e,i,n){var l=n(1413),t=(n(72791),n(9955)),o=n(66934),d=n(80184);i.Z=function(e){var i=e.status,n=e.id,r=e.handleStatus,a=(0,o.ZP)((function(e){return(0,d.jsx)(t.Z,(0,l.Z)({focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,onChange:function(e,i){return r(i?1:0,n)},defaultChecked:!!i},e))}))((function(e){var i=e.theme;return{width:40,height:20,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(20px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:"dark"===i.palette.mode?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:"light"===i.palette.mode?i.palette.grey[100]:i.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:"light"===i.palette.mode?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:16,height:16},"& .MuiSwitch-track":{borderRadius:13,backgroundColor:"light"===i.palette.mode?"#E9E9EA":"#39393D",opacity:1,transition:i.transitions.create(["background-color"],{duration:500})}}}));return(0,d.jsx)(a,{})}},15405:function(e,i,n){var l=n(1413),t=n(45987),o=n(72791),d=n(22293),r=n(47071),a=n(29388),s=n(80184),u=["name","required","label","formik","errors","size","maxLength","type","bgColor","handleChange","readOnly"];i.Z=function(e){var i,n,c,v=e.name,h=e.required,f=e.label,x=e.formik,m=e.errors,p=e.size,g=e.maxLength,Z=e.type,b=e.bgColor,j=e.handleChange,y=e.readOnly,w=(0,t.Z)(e,u),I=(0,o.useMemo)((function(){var e,i,n,t,o,u;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,(0,l.Z)((0,l.Z)({},w),{},{sx:{"& input":{background:b||"#fff"}},label:h?(0,s.jsxs)("span",{className:"input-label",children:["".concat(f),(0,s.jsx)("span",{children:" *"})]}):f,type:Z||"text",fullWidth:!0,id:v,name:v,size:p||"small",value:null===x||void 0===x||null===(e=x.values)||void 0===e?void 0:e[v],onChange:function(e){g&&e.target.value.length>g&&(e.target.value=e.target.value.slice(0,g)),null===x||void 0===x||x.setFieldTouched(v,!0),null===x||void 0===x||x.handleChange(e),j&&j(e.target.value)},error:(null===x||void 0===x||null===(i=x.touched)||void 0===i?void 0:i[v])&&Boolean(null===x||void 0===x||null===(n=x.errors)||void 0===n?void 0:n[v])||Boolean(null===m||void 0===m?void 0:m[v]),InputProps:{readOnly:y}})),((null===x||void 0===x||null===(t=x.touched)||void 0===t?void 0:t[v])&&(null===x||void 0===x||null===(o=x.errors)||void 0===o?void 0:o[v])||(null===m||void 0===m?void 0:m[v]))&&(0,s.jsxs)(r.Z,{error:!0,className:"error-custom",children:[(0,s.jsx)(a.Z,{fontSize:"small",sx:{mr:.5,width:"18px",height:"18px"}}),(null===x||void 0===x||null===(u=x.errors)||void 0===u?void 0:u[v])||(null===m||void 0===m?void 0:m[v])]})]})}),[null===x||void 0===x||null===(i=x.values)||void 0===i?void 0:i[v],null===x||void 0===x||null===(n=x.touched)||void 0===n?void 0:n[v],null===x||void 0===x||null===(c=x.errors)||void 0===c?void 0:c[v],null===m||void 0===m?void 0:m[v],h,f,Z]);return(0,s.jsx)(s.Fragment,{children:I})}},56606:function(e,i,n){n.r(i),n.d(i,{default:function(){return Q}});var l=n(1413),t=n(70885),o=n(72791),d=n(94667),r=n(93051),a=n(82070),s=n(32004),u=n(13967),c=n(95193),v=n(64554),h=n(61889),f=n(36151),x=n(96051),m=n(55705),p=n(53329),g=n(38926),Z=n(36370),b=n(15405),j=n(99198),y=n(20958),w=n(45912),I=n(35855),S=n(53994),C=n(20890),k=n(13400),N=n(39281),z=n(79836),O=n(56890),E=n(53382),F=n(27247),P=n(73202),V=n(79472),M=n(80184),D=function(e){var i,n,d,r,a,s,u,c,f,x,p,g,Z=e.formikProp,b=(0,o.useState)(!1),j=(0,t.Z)(b,2),y=j[0],D=j[1],T=(0,m.TA)({enableReinitialize:!0,initialValues:{categoryId:"",categoryName:"",productId:""},onSubmit:function(e){}});(0,o.useEffect)((function(){T.setFieldValue("categoryId",""),T.setFieldValue("categoryName","")}),[null===Z||void 0===Z||null===(i=Z.values)||void 0===i?void 0:i.websiteId]);var B={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},J=function(e){return(0,M.jsx)(v.Z,{children:(0,M.jsx)(k.Z,{size:"small",onClick:function(){!function(e){var i,n;D(!y),Z.setFieldValue("collectionProducts",null===Z||void 0===Z||null===(i=Z.values)||void 0===i||null===(n=i.collectionProducts)||void 0===n?void 0:n.map((function(i){return(null===i||void 0===i?void 0:i.productId)===(null===e||void 0===e?void 0:e.productId)?(0,l.Z)((0,l.Z)({},i),{},{flag:"delete"}):i})))}(e)},children:(0,M.jsx)(F.Z,{fontSize:"small",color:"error"})})})};return(0,M.jsxs)(v.Z,{children:[(0,M.jsxs)(h.ZP,{container:!0,spacing:3,children:[(0,M.jsx)(h.ZP,{item:!0,xs:4,children:(0,M.jsx)(w.Z,{formik:T,setFieldValue:T.setFieldValue,addOrEdit:!1,websiteId:null===Z||void 0===Z||null===(n=Z.values)||void 0===n?void 0:n.websiteId,categoryGroupId:2})}),(0,M.jsx)(h.ZP,{item:!0,xs:8,children:(0,M.jsx)(P.Z,{formik:T,addOrEdit:!1,websiteId:null===Z||void 0===Z||null===(d=Z.values)||void 0===d?void 0:d.websiteId,categoryId:null===T||void 0===T||null===(r=T.values)||void 0===r?void 0:r.categoryId,handleChange:function(e){!function(e){var i;Z.setFieldValue("collectionProducts",null===Z||void 0===Z||null===(i=Z.values)||void 0===i?void 0:i.collectionProducts.concat([(0,l.Z)((0,l.Z)({},e),{},{name:null===e||void 0===e?void 0:e.label,productId:null===e||void 0===e?void 0:e.value,flag:"add"})]))}(e)},productsSelected:null===Z||void 0===Z||null===(a=Z.values)||void 0===a||null===(s=a.collectionProducts)||void 0===s||null===(u=s.filter((function(e){return"delete"!==(null===e||void 0===e?void 0:e.flag)})))||void 0===u?void 0:u.map((function(e){return null===e||void 0===e?void 0:e.productId})),fetchData:y})})]}),(0,M.jsx)(v.Z,{children:(0,M.jsxs)(N.Z,{sx:{overflow:"auto",minHeight:"200px"},children:[(0,M.jsxs)(z.Z,{children:[(0,M.jsx)(O.Z,{children:function(){var e={whiteSpace:"nowrap",fontWeight:"bold"};return(0,M.jsxs)(I.Z,{children:[(0,M.jsx)(S.Z,{sx:(0,l.Z)((0,l.Z)({},e),{},{width:"5%"}),align:"center",children:"#"}),(0,M.jsx)(S.Z,{sx:e,children:"T\xean s\u1ea3n ph\u1ea9m"}),(0,M.jsx)(S.Z,{sx:e,children:"Gi\xe1"}),(0,M.jsx)(S.Z,{sx:e,children:"Gi\xe1 Sale"}),(0,M.jsx)(S.Z,{align:"center",sx:e,children:"#"})]})}()}),(0,M.jsx)(E.Z,{children:null===Z||void 0===Z||null===(c=Z.values)||void 0===c||null===(f=c.collectionProducts)||void 0===f||null===(x=f.filter((function(e){return"delete"!==(null===e||void 0===e?void 0:e.flag)})))||void 0===x?void 0:x.map((function(e,i){return function(e,i){var n;return(0,M.jsxs)(I.Z,{hover:!0,children:[(0,M.jsx)(S.Z,{sx:{width:"5%"},align:"center",children:(0,M.jsx)(C.Z,{variant:"body2",children:i+1})}),(0,M.jsxs)(S.Z,{sx:(0,l.Z)((0,l.Z)({maxWidth:350},B),{},{display:"flex",alignItems:"center"}),component:"th",scope:"row",children:[(0,M.jsx)("img",{height:"30px",width:"30px",src:"".concat("https://cms-protal-sever.naru.software").concat(null===e||void 0===e||null===(n=e.images)||void 0===n?void 0:n.split(",")[0]),style:{marginRight:"10px"},alt:null===e||void 0===e?void 0:e.name}),null===e||void 0===e?void 0:e.name]}),(0,M.jsx)(S.Z,{children:null===e||void 0===e?void 0:e.price}),(0,M.jsx)(S.Z,{children:null===e||void 0===e?void 0:e.negotiablePrice}),(0,M.jsx)(S.Z,{align:"center",children:J(e)})]},e.productId)}(e,i)}))})]}),!(null!==Z&&void 0!==Z&&null!==(p=Z.values)&&void 0!==p&&null!==(g=p.collectionProducts)&&void 0!==g&&g.length)&&(0,M.jsx)(V.Z,{})]})})]})},T=function(e){var i,n,d,a=e.open,I=e.dataEdit,S=e.handleClose,C=e.getList,k=(0,r.I0)(),N=(0,u.Z)(),z=(0,c.Z)(N.breakpoints.down("lg")),O=(0,o.useState)({}),E=(0,t.Z)(O,2),F=E[0],P=E[1],V=(0,o.useState)(!1),T=(0,t.Z)(V,2),B=T[0],J=T[1],A=(0,o.useState)({}),L=(0,t.Z)(A,2),W=L[0],R=L[1];(0,o.useEffect)((function(){a&&(null!==I&&void 0!==I&&I.id?(J(!0),k({type:"collection/getOne",payload:{id:null===I||void 0===I?void 0:I.id},callback:function(e){if(J(!1),!0===(null===e||void 0===e?void 0:e.success)){var i=e.results.list;P(i)}else!1===(null===e||void 0===e?void 0:e.success)&&(0,s.Z)("error",null===e||void 0===e?void 0:e.message)}})):P({}))}),[a]);var H=x.Ry().shape({name:x.Z_().trim().max(254).required("Vui l\xf2ng nh\u1eadp t\xean b\u1ed9 danh s\xe1ch"),description:x.Z_().trim().max(254),websiteId:x.Z_().required("Vui l\xf2ng ch\u1ecdn website"),categoryId:x.Z_().required("Vui l\xf2ng ch\u1ecdn chuy\xean m\u1ee5c")}),q=(0,m.TA)({enableReinitialize:!0,initialValues:{id:(null===F||void 0===F?void 0:F.id)||0,name:(null===F||void 0===F?void 0:F.name)||"",description:(null===F||void 0===F?void 0:F.description)||"",websiteId:(null===F||void 0===F?void 0:F.websiteId)||"",categoryId:(null===F||void 0===F?void 0:F.categoryId)||"",categoryName:(null===F||void 0===F||null===(i=F.category)||void 0===i?void 0:i.text)||"",collectionProducts:(null===F||void 0===F||null===(n=F.products)||void 0===n?void 0:n.map((function(e){return{productId:null===e||void 0===e?void 0:e.id,name:null===e||void 0===e?void 0:e.name,price:null===e||void 0===e?void 0:e.price,negotiablePrice:null===e||void 0===e?void 0:e.negotiablePrice,images:null===e||void 0===e?void 0:e.images}})))||[],status:0===(null===F||void 0===F?void 0:F.status)?0:1},validationSchema:H,onSubmit:function(e){G(e)}}),G=function(e){var i,n;J(!0);var t=(0,l.Z)((0,l.Z)({},e),{},{name:null===e||void 0===e||null===(i=e.name)||void 0===i?void 0:i.trim(),nameOld:null===F||void 0===F||null===(n=F.name)||void 0===n?void 0:n.trim()});null!==F&&void 0!==F&&F.id?k({type:"collection/update",payload:{id:null===F||void 0===F?void 0:F.id,params:t},callback:function(e){J(!1),null!==e&&void 0!==e&&e.success?((0,s.Z)("success",null===e||void 0===e?void 0:e.message),C(),Y()):(0,s.Z)("error",e.message)}}):k({type:"collection/add",payload:t,callback:function(e){J(!1),null!==e&&void 0!==e&&e.success?((0,s.Z)("success",null===e||void 0===e?void 0:e.message),C(),Y()):(0,s.Z)("error",e.message)}})},Y=function(){S(),q.resetForm(),q.setTouched({},!1),R({})};return(0,M.jsx)(Z.Z,{open:a,title:null!==F&&void 0!==F&&F.id?"C\u1eadp nh\u1eadt th\xf4ng tin ".concat(null===F||void 0===F?void 0:F.name):"Th\xeam m\u1edbi b\u1ed9 danh s\xe1ch",handleClose:function(){Y()},styleBox:{minWidth:z?"100%":"1300px",minHeight:"700px"},styleChildBox:{p:"0px 30px 20px"},styleTitle:{p:"10px 30px"},showButtonCloseDialog:!0,children:(0,M.jsxs)(v.Z,{children:[(0,M.jsxs)("form",{onSubmit:q.handleSubmit,children:[(0,M.jsxs)(h.ZP,{container:!0,spacing:3,sx:{mt:0},children:[(0,M.jsx)(h.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,M.jsx)(b.Z,{name:"name",formik:q,errors:W,required:!0,label:"T\xean b\u1ed9 danh s\xe1ch"})}),(0,M.jsx)(h.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,M.jsx)(y.Z,{formik:q,setFieldValue:q.setFieldValue,addOrEdit:!0,handleChange:function(){q.setFieldValue("categoryId",""),q.setFieldValue("categoryName","")}})}),(0,M.jsx)(h.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,M.jsx)(w.Z,{formik:q,setFieldValue:q.setFieldValue,addOrEdit:!0,websiteId:null===q||void 0===q||null===(d=q.values)||void 0===d?void 0:d.websiteId,categoryGroupId:2})}),(0,M.jsx)(h.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,M.jsx)(b.Z,{name:"description",formik:q,errors:W,label:"M\xf4 t\u1ea3",multiline:!0,rows:4})}),(0,M.jsx)(h.ZP,{item:!0,xs:12,children:(0,M.jsx)(D,{formikProp:q})})]}),(0,M.jsxs)(v.Z,{sx:{mt:3,mb:z?5:0,display:"flex",justifyContent:"center"},children:[(0,M.jsx)(f.Z,{onClick:function(){return Y()},size:"small",variant:"outlined",sx:{mr:"10px"},endIcon:(0,M.jsx)(g.Z,{}),children:"H\u1ee7y"}),(0,M.jsx)(f.Z,{size:"small",variant:"contained",type:"submit",endIcon:(0,M.jsx)(p.Z,{}),children:"L\u01b0u l\u1ea1i"})]})]}),B&&(0,M.jsx)(j.Z,{})]})})},B=n(5403),J=n(42419),A=n(62461),L=Number("20"),W=function(e){var i,n,l,t=e.setDataEdit,o=e.setVisibleDrawer,d=e.setLoading,u=(0,r.I0)(),c=(0,r.v9)(a.hJ),v=(0,m.TA)({enableReinitialize:!0,initialValues:{name:(null===c||void 0===c||null===(i=c.filter)||void 0===i?void 0:i.name)||"",websiteId:(null===c||void 0===c||null===(n=c.filter)||void 0===n?void 0:n.websiteId)||"",status:(null===c||void 0===c||null===(l=c.filter)||void 0===l?void 0:l.status)||""},onSubmit:function(e){x(e)}}),x=function(e){var i,n;d(!0);var l={name:null===e||void 0===e||null===(i=e.name)||void 0===i?void 0:i.trim(),websiteId:null===e||void 0===e?void 0:e.websiteId,status:"".concat(null===e||void 0===e?void 0:e.status)};null!==e&&void 0!==e&&null!==(n=e.name)&&void 0!==n&&n.trim()||delete l.name,null!==e&&void 0!==e&&e.websiteId||delete l.websiteId,null!==e&&void 0!==e&&e.status||delete l.status;var t={filter:JSON.stringify(l),range:JSON.stringify([0,L]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,name,description,status,createdAt"};u((0,a.hX)(e)),u({type:"collection/fetch",payload:t,callback:function(e){d(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,s.Z)("error",null===e||void 0===e?void 0:e.message)}})};return(0,M.jsx)("form",{onSubmit:v.handleSubmit,children:(0,M.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,M.jsx)(h.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,M.jsx)(b.Z,{name:"name",formik:v,label:"T\xean b\u1ed9 danh s\xe1ch"})}),(0,M.jsx)(h.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,M.jsx)(y.Z,{formik:v,setFieldValue:v.setFieldValue,addOrEdit:!1})}),(0,M.jsx)(h.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,M.jsx)(A.Z,{addOrEdit:!1,formik:v,setFieldValue:v.setFieldValue})}),(0,M.jsxs)(h.ZP,{item:!0,xs:12,md:6,lg:3,sx:{display:"flex",justifyContent:"flex-end"},children:[(0,M.jsx)(f.Z,{variant:"contained",endIcon:(0,M.jsx)(B.Z,{}),type:"submit",children:"T\xecm ki\u1ebfm"}),(0,M.jsx)(f.Z,{variant:"outlined",color:"success",endIcon:(0,M.jsx)(J.Z,{}),sx:{ml:2},onClick:function(){t({}),o(!0)},children:"Th\xeam m\u1edbi"})]})]})})},R=n(57246),H=n(41286),q=n(39987),G=n(58357),Y=n(72426),_=n.n(Y),X=Number("20"),K=function(e){var i=e.dataEdit,n=e.setDataEdit,d=e.setVisibleDrawer,h=e.loading,x=e.setLoading,m=e.getList,p=(0,r.I0)(),g=(0,u.Z)(),Z=(0,c.Z)(g.breakpoints.down("md")),b=(0,r.v9)(a.hJ),y=b.data.list,w=b.data.pagination,k=(0,o.useState)(!1),P=(0,t.Z)(k,2),D=P[0],T=P[1],B=function(e,i){p({type:"collection/updateStatus",payload:{id:i,params:{status:e}},callback:function(e){!0===(null===e||void 0===e?void 0:e.success)?(0,s.Z)("success",null===e||void 0===e?void 0:e.message):(0,s.Z)("error",null===e||void 0===e?void 0:e.message)}})},J=function(e){return(0,M.jsx)(q.Z,{status:null===e||void 0===e?void 0:e.status,id:null===e||void 0===e?void 0:e.id,handleStatus:B})},A=function(e){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(f.Z,{size:"small",variant:"outlined",endIcon:(0,M.jsx)(H.Z,{}),onClick:function(){n(e),d(!0)},children:"S\u1eeda"}),(0,M.jsx)(f.Z,{size:"small",variant:"outlined",color:"error",sx:{ml:1},endIcon:(0,M.jsx)(F.Z,{}),onClick:function(){T(!0),n(e)},children:"X\xf3a"})]})};return(0,M.jsxs)(v.Z,{sx:{position:"relative",pb:2},children:[(0,M.jsxs)(N.Z,{sx:{overflow:"auto"},children:[(0,M.jsxs)(z.Z,{children:[(0,M.jsx)(O.Z,{children:function(){var e={whiteSpace:"nowrap",fontWeight:"bold"};return(0,M.jsxs)(I.Z,{children:[(0,M.jsx)(S.Z,{sx:(0,l.Z)((0,l.Z)({},e),{},{width:"5%"}),align:"center",children:"#"}),(0,M.jsx)(S.Z,{sx:e,children:"T\xean b\u1ed9 danh s\xe1ch"}),(0,M.jsx)(S.Z,{sx:e,children:"Website"}),(0,M.jsx)(S.Z,{sx:e,children:"Chuy\xean m\u1ee5c"}),(0,M.jsx)(S.Z,{sx:e,children:"Ng\xe0y t\u1ea1o"}),(0,M.jsx)(S.Z,{sx:e,children:"Tr\u1ea1ng th\xe1i"}),(0,M.jsx)(S.Z,{align:"right",sx:e,children:"H\xe0nh \u0111\u1ed9ng"})]})}()}),(0,M.jsx)(E.Z,{children:null===y||void 0===y?void 0:y.map((function(e,i){return function(e,i){var n,l;return(0,M.jsxs)(I.Z,{hover:!0,children:[(0,M.jsx)(S.Z,{sx:{width:"5%"},align:"center",children:(0,M.jsx)(C.Z,{variant:"body2",children:i+X*((null===w||void 0===w?void 0:w.current)-1)+1})}),(0,M.jsx)(S.Z,{sx:{width:"20%",overflow:"hidden",maxWidth:300},component:"th",scope:"row",children:e.name}),(0,M.jsx)(S.Z,{children:null===e||void 0===e||null===(n=e.website)||void 0===n?void 0:n.name}),(0,M.jsx)(S.Z,{children:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.text}),(0,M.jsx)(S.Z,{children:_()(null===e||void 0===e?void 0:e.createdAt).format("DD/MM/YYYY HH:mm")}),(0,M.jsx)(S.Z,{children:J(e)}),(0,M.jsx)(S.Z,{align:"right",children:A(e)})]},e.id)}(e,i)}))})]}),(null===y||void 0===y?void 0:y.length)>0&&(0,M.jsx)(R.Z,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},size:Z?"small":"medium",count:Math.floor((null===w||void 0===w?void 0:w.total)/(null===w||void 0===w?void 0:w.pageSize))+1,page:null===w||void 0===w?void 0:w.current,color:"primary",shape:"rounded",onChange:function(e,i){var n,l;x(!0);var t=b.filter,o={name:null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.trim(),status:null===t||void 0===t?void 0:t.status};null!==t&&void 0!==t&&null!==(l=t.name)&&void 0!==l&&l.trim()||delete o.name,""===(null===t||void 0===t?void 0:t.status)&&delete o.status;var d={filter:JSON.stringify(o),range:JSON.stringify([i*w.pageSize-w.pageSize,i*w.pageSize]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,name,description,status,createdAt"};p({type:"collection/fetch",payload:d,callback:function(e){x(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,s.Z)("error",null===e||void 0===e?void 0:e.message)}})}})]}),0===(null===y||void 0===y?void 0:y.length)&&(0,M.jsx)(V.Z,{}),h&&(0,M.jsx)(j.Z,{}),D&&(0,M.jsx)(G.Z,{name:null===i||void 0===i?void 0:i.name,open:D,handleClose:function(e){T(!1),e&&p({type:"collection/delete",payload:{id:null===i||void 0===i?void 0:i.id},callback:function(e){!0===(null===e||void 0===e?void 0:e.success)?((0,s.Z)("success",null===e||void 0===e?void 0:e.message),m()):!1===(null===e||void 0===e?void 0:e.success)&&(0,s.Z)("error",e&&e.message)}})}})]})},U=Number("20"),Q=function(){var e=(0,r.I0)(),i=(0,r.v9)(a.hJ),n=(0,o.useState)(!1),u=(0,t.Z)(n,2),c=u[0],v=u[1],h=(0,o.useState)(!1),f=(0,t.Z)(h,2),x=f[0],m=f[1],p=(0,o.useState)({id:0,name:"",description:"",createdAt:"",status:0}),g=(0,t.Z)(p,2),Z=g[0],b=g[1];(0,o.useEffect)((function(){j()}),[]);var j=function(){v(!0);var n=i.query,t=i.filter,o={filter:JSON.stringify({}),range:JSON.stringify([0,U]),sort:JSON.stringify(["createdAt","DESC"]),attributes:"id,name,description,status,createdAt"};"{}"!==(null===n||void 0===n?void 0:n.filter)&&(o=(0,l.Z)((0,l.Z)({},o),{},{filter:null===n||void 0===n?void 0:n.filter})),"{}"!==(null===n||void 0===n?void 0:n.range)&&(o=(0,l.Z)((0,l.Z)({},o),{},{range:null===n||void 0===n?void 0:n.range})),"{}"!==(null===n||void 0===n?void 0:n.sort)&&(o=(0,l.Z)((0,l.Z)({},o),{},{sort:null===n||void 0===n?void 0:n.sort})),e((0,a.hX)(t)),e({type:"collection/fetch",payload:o,callback:function(e){v(!1),!1===(null===e||void 0===e?void 0:e.success)&&(0,s.Z)("error",null===e||void 0===e?void 0:e.message)}})};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(d.Z,{title:(0,M.jsx)(W,{setDataEdit:b,setVisibleDrawer:m,setLoading:v}),content:!1,children:(0,M.jsx)(K,{getList:j,dataEdit:Z,setDataEdit:b,setVisibleDrawer:m,loading:c,setLoading:v})}),(0,M.jsx)(T,{open:x,handleClose:function(){return m(!1)},dataEdit:Z,getList:j})]})}},42419:function(e,i,n){var l=n(64836);i.Z=void 0;var t=l(n(45649)),o=n(80184),d=(0,t.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");i.Z=d},5130:function(e,i,n){var l=n(64836);i.Z=void 0;var t=l(n(45649)),o=n(80184),d=(0,t.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");i.Z=d},39157:function(e,i,n){n.d(i,{Z:function(){return p}});var l=n(4942),t=n(63366),o=n(87462),d=n(72791),r=n(28182),a=n(94419),s=n(66934),u=n(31402),c=n(21217);function v(e){return(0,c.Z)("MuiDialogContent",e)}(0,n(75878).Z)("MuiDialogContent",["root","dividers"]);var h=n(17673),f=n(80184),x=["className","dividers"],m=(0,s.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:function(e,i){var n=e.ownerState;return[i.root,n.dividers&&i.dividers]}})((function(e){var i=e.theme,n=e.ownerState;return(0,o.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((i.vars||i).palette.divider),borderBottom:"1px solid ".concat((i.vars||i).palette.divider)}:(0,l.Z)({},".".concat(h.Z.root," + &"),{paddingTop:0}))})),p=d.forwardRef((function(e,i){var n=(0,u.Z)({props:e,name:"MuiDialogContent"}),l=n.className,d=n.dividers,s=void 0!==d&&d,c=(0,t.Z)(n,x),h=(0,o.Z)({},n,{dividers:s}),p=function(e){var i=e.classes,n={root:["root",e.dividers&&"dividers"]};return(0,a.Z)(n,v,i)}(h);return(0,f.jsx)(m,(0,o.Z)({className:(0,r.Z)(p.root,l),ownerState:h,ref:i},c))}))}}]);
//# sourceMappingURL=606.c1d0827f.chunk.js.map